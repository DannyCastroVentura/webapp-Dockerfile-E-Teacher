<!doctype html>
<html lang="en" ng-app="UsersApp" ng-controller="ProfileController as profile">
<controllerTrabalho ng-controller="TrabalhosController as trabalhos">
  <controllerUsers ng-controller="SearchUsersController as searchUsers">

    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>E&#8209;Teacher</title>

      <!-- favicon -->
      <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
      <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
      <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
      <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
      <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
      <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
      <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
      <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
      <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
      <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
      <link rel="manifest" href="/manifest.json">
      <meta name="msapplication-TileColor" content="#ffffff">
      <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
      <meta name="theme-color" content="#ffffff">


      <!-- web links -->
      <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
      <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css"
        integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous" />

      <!-- Bootstrap core CSS -->
      <link href="./assets/dist/css/bootstrap.css" rel="stylesheet">

      <style>
        .actionButtons {
          width: 70px;
        }

        a {
          text-decoration: none;
        }

        .iconLog {
          height: 150px;
        }

        .actionTd {
          width: 20%;
          text-align: center;
        }


        .searchBarDiv {
          padding-bottom: 10em;
          display: none;
          top: 50%;
          width: 75%;
          min-width: 400px;
        }

        @keyframes mandarParaCima {
          0% {
            top: 29%;
            transform: translateX(-50%);
          }

          100% {
            top: 15%;
            transform: translateX(-50%);
          }
        }


        @keyframes mandarParaBaixo {
          0% {
            top: 33%;
            transform: translateX(-50%);
          }

          100% {
            top: 47%;
            transform: translateX(-50%);
          }
        }

        .semiTitles {
          font-size: 25px;
        }

        .semiBigTitles {
          font-size: 30px;
        }

        .semiBigFont {
          font-size: 20px;
        }

        .responsiveButtonNovo {
          top: 1em;
          right: 1em;
        }

        .w3-modal {
          padding-top: 30px;
        }

        .responsiveButtonDebaixoDoErro {
          margin-top: 0.5em;
        }

        @media screen and (min-width: 601px) {
          .responsiveSmalText {
            font-size: 25px;
          }

          /*footer*/
          .responsiveVerySmalText {
            font-size: 15px;
          }

          .responsiveButtonNovo {
            font-size: 15px;
          }

          .responsiveMensagemDeErro {
            font-size: 15px;
          }


        }


        /* If the screen size is 600px wide or less, set the font-size of <div> to 30px */
        @media screen and (max-width: 600px) {


          .iconLog {
            height: 100px;
          }

          .semiBigTitles {
            font-size: 23px;
          }

          .semiTitles {
            font-size: 18px;
          }

          .semiBigFont {
            font-size: 15px;
          }

          .searchBarDiv {
            padding-bottom: 10em;
            display: none;
            top: 70%;
            width: 75%;
            min-width: 400px;
          }

          @keyframes mandarParaCima {
            0% {
              top: 29%;
              transform: translateX(-50%);
            }

            100% {
              top: 15%;
              transform: translateX(-50%);
            }
          }


          @keyframes mandarParaBaixo {
            0% {
              top: 15%;
              transform: translateX(-50%);
            }

            100% {
              top: 29%;
              transform: translateX(-50%);
            }
          }

          .responsiveSmalText {
            font-size: 15px;
          }

          /*footer*/
          .responsiveVerySmalText {
            font-size: 9px;
          }

          /*botoes*/
          .responsiveKindaSmalText {
            font-size: 13px;
          }

          .responsiveButtonNovo {
            font-size: 12px;
          }

          .responsiveMensagemDeErro {
            font-size: 10px;
          }

          .w3-modal {
            padding-top: 15px;
          }

          .display- {
            font-size: 20px;
          }
        }

        .removerAlunoDoTrabalho {
          color: black;
          text-decoration: none;
        }

        .removerAlunoDoTrabalho:hover {
          color: red;
          cursor: pointer;
        }


        @media screen and (min-height: 800px) {
          .loginPaddingTop {
            padding-top: 10em;
          }
        }

        @media screen and (max-height: 800px) {
          .loginPaddingTop {
            padding-top: 20em;
          }
        }

        @-webkit-keyframes zoom {
          from {
            -webkit-transform: scale(0)
          }

          to {
            -webkit-transform: scale(1)
          }
        }

        @keyframes zoom {
          from {
            transform: scale(0)
          }

          to {
            transform: scale(1)
          }
        }

        .aspasComeco:before {
          content: '\275D  ';
        }

        .bd-placeholder-img {
          font-size: 1.125rem;
          text-anchor: middle;
          -webkit-user-select: none;
          -moz-user-select: none;
          user-select: none;
        }

        @media (min-width: 768px) {
          .bd-placeholder-img-lg {
            font-size: 3.5rem;
          }
        }

        html,
        body {
          height: 100%;
          margin: 0px;
          padding: 0px;
          background-color: #f5f5f5;
        }
      </style>


      <!-- Custom styles for this template -->
      <link href="./css/carousel.css" rel="stylesheet">
      <link href="./css/heroes.css" rel="stylesheet">
      <link href="./css/signin.css" rel="stylesheet">
      <link href="./css/myCss.css" rel="stylesheet">



    </head>

    <body>


      <header>
        <nav class="navbar navbar-expand-sm navbar-dark fixed-top bg-dark">
          <div class="container-fluid" style="margin-right: 2em;margin-left: 2em;">
            <a class="navbar-brand" href="#"><img alt="logotipo"
                onclick="document.location.href = window.location.origin;" src="./img/logo/logoWhite.png"
                style="height: 3em;"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
              aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-text">
              <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav me-auto mb-2 mb-md-0 text-left">
                  <li class="nav-item w3-animate-opacity" id="loginNavBar" style="display: none;">
                    <a id="callLogin" class="nav-link navBarETeacher"
                      onclick="callLogin();document.getElementById('nav-Teacher-tab-login').click();"
                      class="btn btn-lg btn-primary" style="cursor: pointer;">Login</a>
                  </li>
                  <li class="nav-item" id="searchNavBar">
                    <a id="callSearch" class="nav-link navBarETeacher traduzir" pt="Pesquisar" eng="Search"
                      onclick="callSearch();" style="cursor: pointer;">Search</a>
                  </li>
                  <li class="nav-item dropdown" id="accountNavBar" style="display: block;">
                    <a class="nav-link navBarETeacher dropdown-toggle traduzir " pt="Conta" eng="Account" href="#"
                      id="callAccount" role="button" ng-show="profile.originalEmail" data-toggle="dropdown"
                      aria-haspopup="true" aria-expanded="false" style="display:block;">
                      Account
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <div class="rowDaNavBar">
                        <a id="callPerfil" class="nav-link navBarETeacher traduzir" ng-show="profile.permissions != 2"
                          onclick="callPerfil();" class="btn btn-lg btn-primary" pt="Perfil" eng="Profile"
                          style="cursor: pointer;color: black;">Profile</a>
                      </div>
                      <div class="dropdown-divider" ng-if="profile.permissions != 2"></div>
                      <div class="rowDaNavBar">
                        <a id="callViewMyTeachers" class="nav-link navBarETeacher traduzir active" pt="Meus professores"
                          eng="My teachers" ng-if="profile.permissions == 2" onclick="callViewMyTeachers();"
                          class="btn btn-lg btn-primary" style="cursor: pointer;color: black;">My teachers</a>
                      </div>
                      <div class="dropdown-divider" ng-if="profile.permissions == 2"></div>
                      <div class="rowDaNavBar">
                        <a id="callChangePassword" style="color: black;" onclick="callChangePassword();"
                          class="nav-link navBarETeacher traduzir" aria-current="page" href="#" eng="Change password"
                          pt="Alterar palavra&#8209;passe">Change password</a>
                      </div>
                      <div class="dropdown-divider"></div>
                      <div class="rowDaNavBar">
                        <a id="callLogout" style="color: black;" onclick="logout();" class="nav-link navBarETeacher"
                          aria-current="page" href="#">Logout</a>
                      </div>
                    </div>
                  </li>
                  <li class="nav-item dropdown" id="accountNavBar" style="display: block;">
                    <a class="nav-link navBarETeacher dropdown-toggle" href="#" id="callLanguage" role="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:block;">
                      Language
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <div style="cursor: pointer;" id="escolherPt" class="rowDaNavBar active escolherLingua"
                        onclick="openNavBar('escolherPt', 'escolherLingua');changeLanguage('pt');">
                        &nbsp;<img src="./img/flags/portugal.png" height="30px" />
                        Português
                      </div>

                      <div class="dropdown-divider"></div>

                      <div style="cursor: pointer;" id="escolherEn" class="rowDaNavBar escolherLingua"
                        onclick="openNavBar('escolherEn', 'escolherLingua');changeLanguage('en');">
                        &nbsp;<img src="./img/flags/reino-unido.png" height="30px" />
                        English
                      </div>
                    </div>
                  </li><img id="imagemFlagIdioma" src="./img/flags/reino-unido.png" class="align-middle"
                    style="height: 30px;width: 30px;margin: 5px 1em;" />
                </ul>
              </div>
            </div>
          </div>
        </nav>
      </header>
      <div loading> </div>
      <!-- notifications -->
      <div id="notification"><i class="fa fa-info-circle"></i>&nbsp;<span id="notificationText">Project successfully
          updated!</span></div>

      <div id="indexPage" class="h-100 text-center mainPage"
        style="margin-bottom: 0;background-color: #f5f5f5; display:none">
        <div class="d-flex justify-content-center align-items-center" style="height: 100%; min-width: 50%;">
          <div class="row featurette">
            <div class="">
              <!-- login -->
              <div id="loginIndex" class="w3-container loginPaddingTop loginOrSigninIndex w3-animate-opacity"
                style="padding-bottom: 10em;">
                <div class="d-flex justify-content-center">
                  <form style="width: 50%; min-width: 300px;"
                    onsubmit="login('emailLoginIndex', 'passwordLoginIndex', 'nav-Teacher-tab-login-index', 'nav-Student-tab-login-index',true, 'nav-Admin-tab-login-index');">
                    <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
                    <h1 class="h3 mb-3 fw-normal traduzir" pt="Iniciar sessão" eng="Log in" id="loginIndexTitulo">Login
                    </h1>
                    <nav>
                      <div class="nav nav-tabs" id="nav-tab-login-index" role="tablist">
                        <button class="nav-link loginIndexNavLink active traduzir" pt="Professor" eng="Teacher"
                          id="nav-Teacher-tab-login-index"
                          onclick="openNavBar('nav-Teacher-tab-login-index', 'loginIndexNavLink')" data-bs-toggle="tab"
                          type="button">Teacher</button>
                        <button class="nav-link traduzir loginIndexNavLink" pt="Aluno" eng="Student"
                          id="nav-Student-tab-login-index"
                          onclick="openNavBar('nav-Student-tab-login-index', 'loginIndexNavLink')" data-bs-toggle="tab"
                          type="button">Student</button>
                        <button class="nav-link traduzir loginIndexNavLink" pt="Admin" eng="Admin"
                          id="nav-Admin-tab-login-index"
                          onclick="openNavBar('nav-Admin-tab-login-index', 'loginIndexNavLink')" data-bs-toggle="tab"
                          type="button">Admin</button>
                      </div>
                    </nav>
                    <div class="border border-top-0 container p-4" style="max-width: 300px;background-color: white;">
                      <div style="max-width: 300px;">
                        <div class="form-floating">
                          <input type="email" class="form-control" id="emailLoginIndex" placeholder="name@example.com"
                            required>
                          <label for="emailLoginIndex" class="traduzir" pt="Endereço de email" eng="Email address">Email
                            address</label>
                        </div>
                        <div class="form-floating">
                          <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                            title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                            class="form-control traduzirTitle" id="passwordLoginIndex" placeholder="Password" required>
                          <label for="passwordLoginIndex" class="traduzir" pt="Palavra-passe"
                            eng="Password">Password</label>
                        </div>
                        <div id="divErroLoginIndex" style="display: none;margin-bottom: -1.5em;">
                          <p id="mensagemDeErroLoginIndex" class="w3-padding responsiveMensagemDeErro"
                            style="color: #dc3545"></p>
                        </div>

                        <button class="w-100 btn btn-lg btn-success traduzir responsiveButtonDebaixoDoErro"
                          pt="Iniciar sessão" eng="Log in" id="LogInIndexSubmit" type="submit">Login</button>

                      </div>
                    </div>
                    <p class="p-4 text-muted">&copy; 2021</p>

                    <div class="w3-container">
                      <span class="w3-padding"><span class="traduzir" pt="Esqueceu-se da " eng="Forgot ">Forgot
                        </span><a href="#" onclick="openLink('forgotPasswordPage', 'mainPage');" class="traduzir"
                          pt="palavra-passe?" eng="password?">password?</a></span>
                    </div>
                    <div class="w3-container" style="padding:1em;">
                      <span class="w3-padding"><span class="traduzir" pt="Não possui uma " eng="Do not have an ">Do not
                          have an </span><a class="traduzir link" pt="conta?" eng="account?" style="cursor:pointer;"
                          onclick="openLink('signinIndex', 'loginOrSigninIndex')">account?</a></span>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Verification Account -->
              <div id="verificationAccountIndex" class=" w3-container loginOrSigninIndex w3-animate-opacity"
                style="display: none;">
                <div class="d-flex justify-content-center">
                  <div style="width: 50%; min-width: 300px;">
                    <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
                    <h1 class="h3 mb-3 fw-normal traduzir" pt="Verificação de conta" eng="Account verification">
                      Verification</h1>

                    <div class="w3-container" style="padding:1em;">
                      <span class="traduzir" pt="Clique no link enviado para o seu email para ativar a sua conta!"
                        eng="Click on the link sent to your email to activate your account!">Click on the link sent to
                        your email to activate your
                        account!</span>
                    </div>
                    <div class="w3-container" style="padding:1em;">
                      <span class="w3-padding"><span class="traduzir" pt="Já dispõe de uma "
                          eng="Already have an ">Already have
                          an </span><a class="traduzir link" style="cursor:pointer;" pt="conta?" eng="account?"
                          onclick="openLink('loginIndex', 'loginOrSigninIndex')">account?</a></span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- signinindex -->
              <div id="signinIndex" class=" w3-container loginOrSigninIndex w3-animate-opacity"
                style="display: none; padding-top: 20em; padding-bottom: 10em;">
                <div class="d-flex justify-content-center">
                  <form style="width: 50%; min-width: 300px;"
                    onsubmit="registar('emailSigninIndex', 'nameSigninIndex', 'studentNumberSigninIndex', 'passwordSinginIndex', 'confirmPasswordSigninIndex', true);">
                    <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
                    <h1 class="h3 mb-3 traduzir fw-normal" id="signInIndexTitulo" pt="Registar" eng="Sign in">Sign in
                    </h1>
                    <nav>
                      <div class="nav nav-tabs" id="nav-tab-registar-index" role="tablist">
                        <button class="nav-link traduzir active" pt="Professor" eng="Teacher"
                          id="nav-Teacher-tab-registar-index" data-bs-toggle="tab" type="button">Teacher</button>
                      </div>
                    </nav>
                    <div class="border border-top-0 container p-4" style="max-width: 300px;background-color: white;">
                      <div style="max-width: 300px;">
                        <div class="form-floating">
                          <input type="email" class="form-control" id="emailSigninIndex" placeholder="name@example.com"
                            required>
                          <label for="emailSignin" class="traduzir" pt="Endereço de email" eng="Email address">Email
                            address</label>
                        </div>
                        <div class="form-floating">
                          <input type="name" class="form-control" id="nameSigninIndex" placeholder="name" required>
                          <label for="nameSignin" class="traduzir" pt="Nome" eng="Name">Name</label>
                        </div>
                        <div class="form-floating">
                          <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                            title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                            class="form-control traduzirTitle" id="passwordSinginIndex" placeholder="Password" required>
                          <label for="passwordSingin" class="traduzir" pt="Palavra-passe"
                            eng="Password">Password</label>
                        </div>
                        <div class="form-floating" style="margin-bottom: 1.5em;">
                          <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                            title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                            class="form-control traduzirTitle" id="confirmPasswordSigninIndex" placeholder="Password" required>
                          <label for="confirmPasswordSignin" class="traduzir" pt="Confirmar palavra-passe"
                            eng="Confirm password" id="confirmPasswordSigninIndexLabel">Confirm Password</label>
                        </div>
                        <div id="divErroSigninIndex" style="display: none;">
                          <p id="mensagemDeErroSigninIndex" class="w3-padding responsiveMensagemDeErro"
                            style="color: #dc3545"></p>
                        </div>
                        <button class="w-100 btn btn-lg btn-success responsiveButtonDebaixoDoErro traduzir"
                          pt="Registar" eng="Sign in" id="signInIndexSubmit" type="submit">Sign in</button>
                      </div>
                    </div>
                    <p class="p-4 text-muted">&copy; 2021</p>
                    <div class="w3-container">
                      <span class="w3-padding"><span class="traduzir" pt="Já dispõe de uma "
                          eng="Already have an ">Already have
                          an </span><a class="traduzir link" pt="conta?" eng="account?" style="cursor:pointer;"
                          onclick="openLink('loginIndex', 'loginOrSigninIndex')">account?</a></span>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ESQUECEU-SE DA PALAVRA PASSE -->
      <div id="forgotPasswordPage" class="h-100 text-center mainPage"
        style="margin-bottom: 0;background-color: #f5f5f5; display:none">
        <div class="d-flex justify-content-center align-items-center" style="height: 100%; min-width: 50%; ">
          <div class="row featurette">
            <div class="">
              <div id="forgotPasswordIndex" class="w3-animate-opacity" style="padding-top: 10em; padding-bottom: 10em;">
                <div class="d-flex justify-content-center">
                  <form style="width: 50%; min-width: 300px;"
                    onsubmit="forgotPasswordUser('forgotPasswordEmailUserIndex', 'divErroforgotConfirmPasswordUserIndex', 'mensagemDeErroforgotConfirmPasswordUserIndex');">
                    <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
                    <h1 class="h3 mb-3 fw-normal traduzir" pt="Repor palavra&#8209;passe" eng="Forgot password">
                      Forgot
                      password
                    </h1>
                    <div class="form-floating">
                      <input type="email" class="form-control" id="forgotPasswordEmailUserIndex" placeholder="Email"
                        required>
                      <label for="forgotPasswordEmailUserIndex" class="traduzir" pt="Endereço de email"
                        eng="Email address">Email address</label>
                    </div>

                    <div id="divErroforgotConfirmPasswordUserIndex" style="display: none;">
                      <p id="mensagemDeErroforgotConfirmPasswordUserIndex" class="w3-padding responsiveMensagemDeErro"
                        style="color: #dc3545"></p>
                    </div>
                    <div>
                      <p class="traduzir" style="padding-top: 1em;"
                        pt="Digite o seu email acima para lhe enviar-mos um email com um link de recuperação da palavra passe."
                        eng="Enter your email above and we'll send you an email with a password recovery link.">
                        Enter your email above and we'll send you an email with a password recovery link.</p>
                    </div>
                    <button class="w-100 btn btn-lg btn-success responsiveButtonDebaixoDoErro traduzir" pt="Enviar"
                      eng="Send" type="submit">Send</button>

                    <p class="mt-5 mb-3 text-muted">&copy; 2021</p>
                    <div class="w3-container">
                      <span class="w3-padding"><span class="traduzir" pt="Voltar para " eng="Back to ">Back to </span>
                        <a class="traduzir link" pt="iniciar sessão?" eng="log in?" style="cursor:pointer;"
                          onclick="openLink('indexPage', 'mainPage');">log in?</a></span>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


      <!-- RESET PALAVRA PASSE -->
      <div id="resetPasswordPage" class="h-100 text-center mainPage"
        style="margin-bottom: 0;background-color: #f5f5f5; display:none">
        <div class="d-flex justify-content-center align-items-center" style="height: 100%; min-width: 50%; ">
          <div class="row featurette">
            <div class="">
              <div id="resetPassword" class="w3-animate-opacity" style="padding-top: 10em; padding-bottom: 10em;">
                <div class="d-flex justify-content-center">
                  <form style="min-width: 300px;" onsubmit="resetPasswordUser();">
                    <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
                    <h1 class="h3 mb-3 fw-normal traduzir" pt="Repor palavra-passe" eng="Reset password">Reset
                      password
                    </h1>
                    <div style="max-width: 300px;">
                      <div class="form-floating" style="display: none;">
                        <input type="email" disabled="disabled" class="form-control" id="resetPasswordEmailUser"
                          placeholder="Email" required>
                        <label for="resetPasswordEmailUser" class="traduzir" pt="Endereço de email"
                          eng="Email address">Email</label>
                      </div>
                      <div class="form-floating" style="display: none;">
                        <input type="password" class="form-control" id="resetPasswordOldPasswordUser"
                          placeholder="Old Password" required>
                        <label for="resetPasswordOldPasswordUser" class="traduzir" pt="Palavra-passe antiga"
                          eng="Old Password">Old Password</label>
                      </div>
                      <div class="form-floating">
                        <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                          title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                          class="form-control traduzirTitle" id="resetPasswordPasswordUser" placeholder="Password" required>
                        <label for="resetPasswordPasswordUser" class="traduzir" pt="Palavra-passe"
                          eng="Password">Password</label>
                      </div>
                      <div class="form-floating">
                        <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                          title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                          style="margin-bottom: 1.5em;" class="form-control traduzirTitle" id="resetPasswordConfirmPasswordUser"
                          placeholder="Confirm Password" required>
                        <label for="resetPasswordConfirmPasswordUser" class="traduzir" pt="Confirmar palavra-passe"
                          eng="Confirm password">Confirm Password</label>
                      </div>
                      <div id="divErroConfirmPasswordUserReset" style="display: none;">
                        <p id="mensagemDeErroConfirmPasswordUserReset" class="w3-padding responsiveMensagemDeErro"
                          style="color: #dc3545"></p>
                      </div>

                      <button class="w-100 btn btn-lg btn-warning responsiveButtonDebaixoDoErro traduzir"
                        pt="Alterar palavra-passe" eng="Update password" type="submit">Update</button>

                    </div>
                    <p class="mt-5 mb-3 text-muted">&copy; 2021</p>

                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


      <!-- ALTERAR PALAVRA PASSE -->
      <div id="changePasswordPage" class="h-100 text-center mainPage"
        style="margin-bottom: 0;background-color: #f5f5f5; display:none">
        <div class="d-flex justify-content-center align-items-center" style="height: 100%; min-width: 50%; ">
          <div class="row featurette">
            <div class="">
              <div id="changePassword" class="w3-animate-opacity" style="padding-top: 10em; padding-bottom: 10em;">
                <div class="d-flex justify-content-center">
                  <form style="min-width: 300px;" onsubmit="changePasswordUser();">
                    <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
                    <h1 class="h3 mb-3 fw-normal traduzir" pt="Alterar palavra-passe" eng="Change password">Change
                      password
                    </h1>
                    <div style="max-width: 300px;">
                      <div class="form-floating">
                        <input type="email" disabled="disabled" class="form-control" id="createPasswordEmailUser"
                          placeholder="Email" required>
                        <label for="createPasswordEmailUser" class="traduzir" pt="Endereço de email"
                          eng="Email address">Email</label>
                      </div>
                      <div class="form-floating">
                        <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                          title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                          class="form-control traduzirTitle" id="createPasswordOldPasswordUser" placeholder="Old Password" required>
                        <label for="createPasswordOldPasswordUser" class="traduzir" pt="Palavra-passe antiga"
                          eng="Old Password">Old Password</label>
                      </div>
                      <div class="form-floating">
                        <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                          title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                          class="form-control traduzirTitle" id="createPasswordPasswordUser" placeholder="Password" required>
                        <label for="createPasswordPasswordUser" class="traduzir" pt="Palavra-passe"
                          eng="Password">Password</label>
                      </div>
                      <div class="form-floating">
                        <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                          title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                          style="margin-bottom: 1.5em;" class="form-control traduzirTitle" id="createPasswordConfirmPasswordUser"
                          placeholder="Confirm Password" required>
                        <label for="createPasswordConfirmPasswordUser" class="traduzir" pt="Confirmar palavra-passe"
                          eng="Confirm password">Confirm Password</label>
                      </div>
                      <div id="divErroConfirmPasswordUser" style="display: none;">
                        <p id="mensagemDeErroConfirmPasswordUser" class="w3-padding responsiveMensagemDeErro"
                          style="color: #dc3545"></p>
                      </div>

                      <button class="w-100 btn btn-lg btn-warning responsiveButtonDebaixoDoErro traduzir"
                        pt="Alterar palavra-passe" eng="Update password" type="submit">Update</button>

                    </div>
                    <p class="mt-5 mb-3 text-muted">&copy; 2021</p>

                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


      <!-- CRIAR PALAVRA PASSE PARA ALUNO -->
      <div id="criarPalavraPasseAlunoPage" class="h-100 text-center mainPage"
        style="margin-bottom: 0;background-color: #f5f5f5; display:none">
        <div class="d-flex justify-content-center align-items-center" style="height: 100%; min-width: 50%; ">
          <div class="row featurette">
            <div class="">
              <div id="criarPassword" class="w3-animate-opacity" style="padding-top: 10em; padding-bottom: 10em;">
                <div class="d-flex justify-content-center">
                  <form style="min-width: 300px;" onsubmit="changePasswordStudent();">
                    <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
                    <h1 class="h3 mb-3 fw-normal traduzir" pt="Criar palavra-passe" eng="Create password">Create
                      password
                    </h1>
                    <div style="max-width: 300px;">
                      <div class="form-floating">
                        <input type="email" disabled="disabled" class="form-control" id="createPasswordEmail"
                          placeholder="Email" required>
                        <label for="createPasswordEmail" class="traduzir" pt="Endereço de email"
                          eng="Email address">Email</label>
                      </div>
                      <div class="form-floating">
                        <input type="password" disabled="disabled" class="form-control" id="createPasswordOldPassword"
                          placeholder="Old Password" required>
                        <label for="createPasswordOldPassword" class="traduzir" pt="Código Recebido"
                          eng="Received Code">Received Code</label>
                      </div>
                      <div class="form-floating">
                        <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                          title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                          class="form-control traduzirTitle" id="createPasswordPassword" placeholder="Password" required>
                        <label for="createPasswordPassword" class="traduzir" pt="Palavra-passe"
                          eng="Password">Password</label>
                      </div>
                      <div class="form-floating">
                        <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                          title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                          style="margin-bottom: 1.5em;" class="form-control traduzirTitle" id="createPasswordConfirmPassword"
                          placeholder="Confirm Password" required>
                        <label for="createPasswordConfirmPassword" class="traduzir" pt="Confirmar palavra-passe"
                          eng="Confirm password">Confirm Password</label>
                      </div>
                      <div id="divErroConfirmPassword" style="display: none;">
                        <p id="mensagemDeErroConfirmPassword" class="w3-padding responsiveMensagemDeErro"
                          style="color: #dc3545"></p>
                      </div>

                      <button class="w-100 btn btn-lg btn-success responsiveButtonDebaixoDoErro traduzir"
                        pt="Criar palavra-passe" eng="Create password" type="submit">Create</button>

                    </div>
                    <p class="mt-5 mb-3 text-muted">&copy; 2021</p>

                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="loginOrSignin" class="w3-modal modal">
        <div class="w3-animate-zoom form-signin text-center modal-content"
          style="width: 90%; max-width:600px; min-height:auto; background-color: #f5f5f5;">

          <div class="w3-center"><br>
            <span onclick="leaveLoginOrSignin();" class="w3-button w3-xlarge w3-transparent w3-display-topright"
              title="Close Modal">×</span>
          </div>

          <!-- signin -->
          <div id="signin" class=" w3-container loginOrSignin w3-animate-opacity">
            <div class="d-flex justify-content-center">
              <form style="width: 50%; min-width: 275px;"
                onsubmit="registar('emailSignin', 'nameSignin', 'studentNumberSignin', 'passwordSingin', 'confirmPasswordSignin', false);">
                <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
                <h1 class="h3 mb-3 traduzir fw-normal" pt="Registar" eng="Sign in">Sign in</h1>
                <nav>
                  <div class="nav nav-tabs" id="nav-tab-registar" role="tablist">
                    <button class="nav-link traduzir active" pt="Professor" eng="Teacher" id="nav-Teacher-tab-registar"
                      data-bs-toggle="tab" type="button">Teacher</button>
                  </div>
                </nav>
                <div class="border border-top-0 container p-4" style="max-width: 300px;background-color: white;">
                  <div style="max-width: 275px;">
                    <div class="form-floating">
                      <input type="email" class="form-control" id="emailSignin" placeholder="name@example.com" required>
                      <label for="emailSignin" class="traduzir" pt="Endereço de email" eng="Email address">Email
                        address</label>
                    </div>
                    <div class="form-floating">
                      <input type="name" class="form-control" id="nameSignin" placeholder="name" required>
                      <label for="nameSignin" class="traduzir" pt="Nome" eng="Name">Name</label>
                    </div>
                    <div class="form-floating">
                      <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                        title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                        class="form-control traduzirTitle" id="passwordSingin" placeholder="Password" required>
                      <label for="passwordSingin" class="traduzir" pt="Palavra-passe" eng="Password">Password</label>
                    </div>
                    <div class="form-floating" style="margin-top:-1em;">
                      <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                        title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                        class="form-control traduzirTitle" id="confirmPasswordSignin" placeholder="Password" required>
                      <label for="confirmPasswordSignin" class="traduzir" pt="Confirmar palavra-passe"
                        eng="Confirm password">Confirm Password</label>
                    </div>
                    <div id="divErroSignin" style="display: none;">
                      <p id="mensagemDeErroSignin" class="w3-padding responsiveMensagemDeErro" style="color: #dc3545">
                      </p>
                    </div>
                    <button class="w-100 btn btn-lg traduzir btn-success responsiveButtonDebaixoDoErro" pt="Registar"
                      eng="Sign in" type="submit">Sign
                      in</button>
                  </div>
                </div>
                <p class="p-3 text-muted">&copy; 2021</p>

                <div class="w3-container" style="padding-bottom:2em;margin: -1em;">
                  <span class="w3-padding"><span class="traduzir" pt="Já dispõe de uma " eng="Already have an ">Already
                      have an
                    </span><a id="openLogin" class="traduzir link" pt="conta?" eng="account?" style="cursor:pointer;"
                      onclick="openLink('login', 'loginOrSignin')">account?</a></span>
                </div>
              </form>
            </div>
          </div>

          <!-- Verification Account -->
          <div id="verificationAccount" class=" w3-container loginOrSignin w3-animate-opacity">
            <div class="d-flex justify-content-center">
              <div style="width: 50%; min-width: 275px;">
                <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
                <h1 class="h3 mb-3 fw-normal traduzir" pt="Verificação de conta" eng="Account verification">Verification
                </h1>

                <div class="w3-container" style="padding:1em;">
                  <span class="traduzir" pt="Clique no link enviado para o seu email para ativar a sua conta!"
                    eng="Click on the link sent to your email to activate your account!">Click on the link sent to your
                    email to activate your
                    account!</span>
                </div>
                <div class="w3-container" style="padding:1em;">
                  <span class="w3-padding"><span class="traduzir" pt="Já dispõe de uma " eng="Already have an ">Already
                      have an
                    </span><a id="openLogin" class="traduzir link" pt="conta?" eng="account?" style="cursor:pointer;"
                      onclick="openLink('login', 'loginOrSignin')">account?</a></span>
                </div>
              </div>
            </div>
          </div>


          <!-- login -->
          <div id="login" class=" w3-container loginOrSignin w3-animate-opacity">
            <div class="d-flex justify-content-center">
              <form style="width: 50%; min-width: 275px;"
                onsubmit="login('emailLogin', 'passwordLogin', 'nav-Teacher-tab-login', 'nav-Student-tab-login',false, 'nav-Admin-tab-login');">
                <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
                <h1 class="h3 mb-3 fw-normal traduzir" pt="Iniciar sessão" eng="Log in">Login</h1>
                <nav>
                  <div class="nav nav-tabs " id="nav-tab-login" role="tablist">
                    <button class="nav-link loginNavLink active traduzir" pt="Professor" eng="Teacher"
                      id="nav-Teacher-tab-login" data-bs-toggle="tab"
                      onclick="openNavBar('nav-Teacher-tab-login', 'loginNavLink')" type="button">Teacher</button>
                    <button class="nav-link loginNavLink traduzir" pt="Aluno" eng="Student" id="nav-Student-tab-login"
                      data-bs-toggle="tab" onclick="openNavBar('nav-Student-tab-login', 'loginNavLink')"
                      type="button">Student</button>
                    <button class="nav-link loginNavLink traduzir" pt="Admin" eng="Admin" id="nav-Admin-tab-login"
                      data-bs-toggle="tab" onclick="openNavBar('nav-Admin-tab-login', 'loginNavLink')"
                      type="button">Admin</button>
                  </div>
                </nav>
                <div class="border border-top-0 container p-4" style="max-width: 300px;background-color: white;">
                  <div style="max-width: 275px;">
                    <div class="form-floating" style="margin-bottom: 1px;">
                      <input type="email" class="form-control" id="emailLogin" placeholder="name@example.com" required>
                      <label for="emailLogin" class="traduzir" pt="Endereço de email" eng="Email address">Email
                        address</label>
                    </div>
                    <div class="form-floating">
                      <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                        title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                        class="form-control traduzirTitle" id="passwordLogin" placeholder="Password" required>
                      <label for="passwordLogin" class="traduzir" pt="Palavra-passe" eng="Password">Password</label>
                    </div>
                    <div id="divErroLogin" style="display: none;">
                      <p id="mensagemDeErroLogin" class="w3-padding responsiveMensagemDeErro" style="color: #dc3545">
                      </p>
                    </div>
                    <button class="w-100 btn btn-lg btn-success traduzir responsiveButtonDebaixoDoErro"
                      pt="Iniciar sessão" eng="Log in" type="submit">Login</button>
                  </div>
                </div>
                <p class="p-4 text-muted" style="margin-bottom: 0px;">&copy; 2021</p>

                <div class="w3-container">
                  <span class="w3-padding"><span class="traduzir" pt="Esqueceu-se da " eng="Forgot ">Forgot </span><a
                      href="#" onclick="openLink('forgotPassword', 'loginOrSignin');" class="traduzir"
                      pt="palavra-passe?" eng="password?">password?</a></span>
                </div>
                <div class="w3-container" style="padding:1em;">
                  <span class="w3-padding"><span class="traduzir" pt="Não possui uma " eng="Do not have an ">Do not have
                      an </span><a id="openSignin" class="traduzir link" style="cursor:pointer;" pt="conta?"
                      eng="account?"
                      onclick="openLink('signin', 'loginOrSignin'); document.getElementById('nav-Teacher-tab-registar').click();">account?</a></span>
                </div>
              </form>
            </div>
          </div>


          <!-- ESQUECEU-SE DA PALAVRA PASSE -->

          <div id="forgotPassword" class="w3-animate-opacity loginOrSignin">
            <div class="d-flex justify-content-center">
              <form style="width: 50%; min-width: 275px;"
                onsubmit="forgotPasswordUser('forgotPasswordEmailUser', 'divErroforgotConfirmPasswordUser', 'mensagemDeErroforgotConfirmPasswordUser');">
                <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
                <h1 class="h3 mb-3 fw-normal traduzir" pt="Repor palavra&#8209;passe" eng="Forgot password">
                  Forgot password
                </h1>
                <div class="form-floating">
                  <input type="email" class="form-control" id="forgotPasswordEmailUser" placeholder="Email" required>
                  <label for="forgotPasswordEmailUser" class="traduzir" pt="Endereço de email" eng="Email address">Email
                    address</label>
                </div>

                <div id="divErroforgotConfirmPasswordUser" style="display: none;">
                  <p id="mensagemDeErroforgotConfirmPasswordUser" class="w3-padding responsiveMensagemDeErro"
                    style="color: #dc3545"></p>
                </div>
                <div>
                  <p class="traduzir" style="padding-top: 1em;"
                    pt="Digite o seu email acima para lhe enviar-mos um email com um link de recuperação da palavra passe."
                    eng="Enter your email above and we'll send you an email with a password recovery link.">
                    Enter your email above and we'll send you an email with a password recovery link.</p>
                </div>
                <button class="w-100 btn btn-lg btn-success responsiveButtonDebaixoDoErro traduzir" pt="Enviar"
                  eng="Send" type="submit">Send</button>

                <p class="mt-5 mb-3 text-muted">&copy; 2021</p>
                <div class="w3-container" style="padding-bottom: 1em;">
                  <span class="w3-padding"><span class="traduzir" pt="Voltar para " eng="Back to ">Back to
                    </span>
                    <a class="traduzir link" pt="iniciar sessão?" eng="log in?" style="cursor:pointer;"
                      onclick="openLink('login', 'loginOrSignin');">log in?</a></span>
                </div>
              </form>
            </div>
          </div>

        </div>
      </div>
      <div id="searchPage" class="h-100 text-center mainPage"
        style="margin-bottom: 0;background-color: #f5f5f5; display:none">
        <div class="h-100 row featurette w3-animate-opacity ">
          <!-- searchbar -->
          <div id="search" class="container h-100">
            <div id="searchBar" class="mandarParaBaixo" style="width: 100%;">
              <img class="mb-4 iconLog" src="./img/logo/logoGrey.png" alt="logo do site">
              <h1 class="h3 mb-3 fw-normal traduzir" pt="Pesquisar" eng="Search">Search</h1>
              <div class="container">
                <form class="d-flex justify-content-center" autocomplete="off">
                  <input required onkeyUp="mandarSearchParaCima();mandarSearchParaBaixo();" onfocus="focusSearchBar();"
                    ng-model="search" style="width:50%; min-width: 200px;" class="form-control me-2" type="search"
                    placeholder="Search" id="searchBarInput" aria-label="Search" minlength="3">
                  <button class="btn btn-primary w3-animate-right" id="searchButton" type="submit" onclick=""
                    style="width: 5%; min-width: 5em;display: none;"><i class="fas fa-search"></i></button>
                </form>
              </div>
              <div>
              </div>

            </div>
            <div class="w3-animate-bottom container searchBarDiv" id="resultDoSearch">
              <div ng-repeat="user in searchUsers.users | filter : search as searchFilter">
                <a href="#" ng-click="profile.searchProfile(user.email);trabalhos.trabalhosSearch(user.email);"
                  onclick="searchProfessor();" class="list-group-item list-group-item-action">
                  <div style="height: 5em;">
                    <div style="position: absolute; left: 0px;top:0px;">
                      <img ng-src="{{user.fotoPerfil}}" alt="Profile Picture"
                        style="height: 6em; width: 5em; border: 1px solid;object-fit: cover;" /> &nbsp; {{ user.nome }}
                    </div>
                  </div>
                </a>
              </div>
              <div ng-if="searchFilter.length == 0">
                <div href="#" class="list-group-item">
                  <div style="height: 5em;">
                    <div style="position: absolute; left: 50%; top:50%; transform: translate(-50%, -50%);">
                      <span class="traduzir" pt="Utilizador não encontrado!" eng="User not found!">User not found!
                        </i></span>&nbsp;&nbsp;<i class="fas fa-exclamation-triangle"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="viewMyTeachersPage" class="h-100 text-center mainPage "
        style="margin-bottom: 0;background-color: #f5f5f5; display:none">
        <div class="h-100 row featurette w3-animate-opacity ">
          <!-- all teachers of this student -->

          <div class="container d-flex justify-content-center align-items-center">
            <div class="container" style="min-width: 400px;">
              <div class="display-5 traduzir" pt="Meus professores" eng="My teachers" style="padding-bottom: 1em;">My
                teachers</div>
              <div ng-repeat="teachersOfThisStudent in profile.teachersOfAStudent">
                <a href="#"
                  ng-click="profile.searchProfile(teachersOfThisStudent.email);trabalhos.trabalhosSearch(teachersOfThisStudent.email);"
                  onclick="searchProfessor();" class="list-group-item list-group-item-action">
                  <div style="height: 5em;">
                    <div style="position: absolute; left: 0px;top:0px;">
                      <img ng-src="{{teachersOfThisStudent.fotoPerfil}}" alt="Profile Picture"
                        style="height: 6em; width: 5em; border: 1px solid;object-fit: cover;" /> &nbsp; {{
                      teachersOfThisStudent.nome }}
                    </div>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- profilePage -->
      <div id="profilePage" class="mainPage" style="background-color: #f5f5f5; display:none;">
        <div class="container w3-animate-opacity" style="margin-top: 5em;margin-bottom: 5em;">
          <div class="row featurette" style="margin-bottom: 7em;">
            <div>
              <div ng-repeat="user in profile.profileForEmail" ng-if="profile.existe">


                <div id="alterarProfile" class="w3-modal modal">
                  <div class="w3-animate-zoom form-signin text-center modal-content"
                    style="width: 90%; max-width:600px; min-height:auto; background-color: #f5f5f5;">

                    <div class="w3-center"><br>
                      <span onclick="closeAlterar();" id="closeAlterarPerfil"
                        class="w3-button w3-xlarge w3-transparent w3-display-topright" title="Close Modal">×</span>
                    </div>

                    <div id="changeFotoProfile" class="changeProfile "
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 250px;margin-bottom: 5em;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Foto de perfil" eng="Profile picture">
                          Profile picture</h1>
                        <form onsubmit="alterarFotoPerfil('fotoPerfil');" ng-submit="searchUsers.reload();">
                          <div class="form-floating" style="margin-top: 3em;">
                            <input value="{{ profile.fotoPerfil }}" type="text" class="form-control"
                              id="alterarFotoPerfilLink" placeholder="Profile pircture link" required>
                            <label for="alterarFotoPerfilLink" class="traduzir" pt="Link para a foto de perfil"
                              eng="Profile picture link">Profile picture link</label>
                          </div>
                          <div id="divErroAlterarFotoPerfil" style="display: none;">
                            <p id="mensagemDeErroAlterarFotoPerfil" class="w3-padding responsiveMensagemDeErro"
                              style="color: #dc3545"></p>
                          </div>
                          <button class="btn btn-lg btn-warning traduzir" pt="Alterar" eng="Update"
                            style="bottom: 2em; position: absolute; left: 50%; transform: translateX(-105%); width: 10%; min-width: 6em;">Update</button>
                        </form>
                        <button class="btn btn-lg btn-danger traduzir" pt="Eliminar" eng="Delete"
                          style="bottom: 2em; position: absolute; right: 50%; transform: translateX(105%); width: 10%; min-width: 6em;"
                          onclick="apagarFoto('perfil');"
                          ng-click="profile.apagarFoto('fotoPerfil'); searchUsers.reload();">Delete</button>
                      </div>
                    </div>

                    <div id="changeFotoBackground" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 250px;margin-bottom: 5em;">
                        <h1 class="h3 mb-3 fw-normal traduzir display-6" pt="Foto de fundo" eng="Background photo">
                          Background photo</h1>
                        <form onsubmit="alterarFotoFundo('fotoFundo');" ng-submit="searchUsers.reload();">
                          <div class="form-floating" style="margin-top: 3em;">
                            <input type="text" class="form-control" id="alterarFotoFundoLink"
                              value="{{ profile.fotoFundo }}" placeholder="Background Photo link" required>
                            <label for="alterarFotoFundoLink" class="traduzir" pt="Link para a foto de fundo"
                              eng="Background photo link">Background Photo link</label>
                          </div>
                          <div id="divErroAlterarFotoFundo" style="display: none;">
                            <p id="mensagemDeErroAlterarFotoFundo" class="w3-padding responsiveMensagemDeErro"
                              style="color: #dc3545"></p>
                          </div>
                          <button class="btn btn-lg btn-warning traduzir" pt="Alterar" eng="Update"
                            style="bottom: 2em; position: absolute; left: 50%; transform: translateX(-105%); width: 10%; min-width: 6em;">Update</button>
                        </form>
                        <button class="btn btn-lg btn-danger traduzir" pt="Eliminar" eng="Delete"
                          style="bottom: 2em; position: absolute; right: 50%; transform: translateX(105%); width: 10%; min-width: 6em;"
                          onclick="apagarFoto('fundo');"
                          ng-click="profile.apagarFoto('fotoFundo'); searchUsers.reload();">Delete</button>
                      </div>
                    </div>


                    <div id="changeInfoProfile" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 250px;">
                        <h1 class="h3 mb-3 fw-normal traduzir display-6" pt="Perfil" eng="Profile">Profile</h1>
                        <form onsubmit="alterarInfoProfile();" ng-submit="searchUsers.reload();">
                          <div class="form-floating" style="margin-top: 3em;">
                            <input type="text" value="{{profile.nome}}" maxlength="50" class="form-control"
                              id="alterarNomeLink" placeholder="Name" required>
                            <label for="alterarFotoFundoLink" class="traduzir" pt="Nome" eng="Name">Name</label>
                          </div>
                          <div class="form-floating">
                            <input type="number" value="{{profile.exp}}" class="form-control"
                              placeholder="Year you started teaching" id="alterarExpLink">
                            <label for="alterarExpLink" class="traduzir" pt="Ano que começou a ensinar"
                              eng="Year started teaching">Year you started teaching</label>
                          </div>
                          <div class="form-floating">
                            <select class="form-select" id="alterarIdAreaLink" value="{{profile.idArea}}"
                              aria-label="Area">
                              <option ng-repeat="areaPorEscolher in profile.allAreas" ng-if="areaPorEscolher.nome != ''"
                                ng-selected="areaPorEscolher.idArea == profile.idArea"
                                value="{{ areaPorEscolher.idArea }}">{{ areaPorEscolher.nome }}</option>
                            </select>
                            <label for="alterarFotoFundoLink" class="traduzir" pt="Área de trabalho"
                              eng="Workspace">Workspace</label>
                          </div>
                          <div class="form-floating">
                            <textarea class="form-control" maxlength="1000" id="alterarResumoLink" style="height: 10em;"
                              placeholder="Brief summary">{{profile.resumo}}</textarea>
                            <label for="alterarFotoFundoLink" class="traduzir" pt="Breve sumário"
                              eng="Brief summary">Brief summary</label>
                          </div>
                          <div id="divErroInfoProfile" style="display: none;">
                            <p id="mensagemDeErroInfoProfile" class="w3-padding responsiveMensagemDeErro"
                              style="color: #dc3545"></p>
                          </div>
                          <button class="w-100 btn btn-lg btn-warning traduzir responsiveButtonDebaixoDoErro"
                            pt="Alterar" eng="Update">Update</button>
                        </form>
                        <br>
                      </div>
                    </div>


                    <div id="createProject" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 250px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Projeto final de curso"
                          eng="End-of-course project">End-of-course Project</h1>
                        <form onsubmit="createProject();">
                          <div class="form-floating" style="margin-top: 3em;">
                            <input type="text" class="form-control" maxlength="10" id="createProjectIdTrabalho"
                              placeholder="Project Id" required>
                            <label for="createProjectIdTrabalho" class="traduzir" pt="Id do projeto"
                              eng="Project Id">Project Id</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" class="form-control" maxlength="50" id="createProjectNome"
                              placeholder="Name" required>
                            <label for="createProjectNome" class="traduzir" pt="Nome" eng="Name">Name</label>
                          </div>
                          <div class="form-floating">
                            <textarea class="form-control" maxlength="1000" id="createProjectResumo"
                              style="height: 10em;" placeholder="Brief summary"></textarea>
                            <label for="createProjectResumo" class="traduzir" pt="Resumo" eng="Summary">Summary</label>
                          </div>
                          <div id="divErroCreateProject" style="display: none;">
                            <p id="mensagemDeErroCreateProject" class="w3-padding responsiveMensagemDeErro"
                              style="color: #dc3545"></p>
                          </div>
                          <button class="w-100 btn btn-lg btn-success traduzir responsiveButtonDebaixoDoErro" pt="Criar"
                            eng="Create">Create</button>
                        </form><br>
                      </div>
                    </div>


                    <div id="createResearchProject" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 250px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Projetos de pesquisa"
                          eng="Research projects">Research Projects</h1>
                        <form onsubmit="createResearchProject();">
                          <div class="form-floating" style="margin-top: 3em;">
                            <input type="text" class="form-control" maxlength="100" id="createResearchProjectTitle"
                              placeholder="Title" required>
                            <label for="createResearchProjectTitle" class="traduzir" pt="Título"
                              eng="Title">Title</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" class="form-control" maxlength="20" id="createResearchProjectSigla"
                              placeholder="Inicials" required>
                            <label for="createResearchProjectSigla" class="traduzir" pt="Sigla"
                              eng="Inicials">Inicials</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" class="form-control" maxlength="50"
                              id="createResearchProjectPrincipalInvestigador" placeholder="Principal Investigator"
                              required>
                            <label for="createResearchProjectPrincipalInvestigador" class="traduzir"
                              pt="Investigador principal" eng="Principal investigator">Principal investigator</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" class="form-control" maxlength="50" id="createResearchProjectFinanciador"
                              placeholder="Fincancier" required>
                            <label for="createResearchProjectFinanciador" class="traduzir" pt="Financiador"
                              eng="Financier">Fincancier</label>
                          </div>
                          <div class="form-floating">
                            <input type="number" class="form-control" id="createResearchProjectLinkDataInicio"
                              placeholder="Start date" required>
                            <label for="createResearchProjectLinkDataInicio" class="traduzir" pt="Ano de início"
                              eng="Start year">Start year</label>
                          </div>
                          <div class="form-floating">
                            <input type="number" class="form-control" id="createResearchProjectLinkDataFim"
                              placeholder="End date">
                            <label for="createResearchProjectLinkDataFim" class="traduzir" pt="Ano do fim"
                              eng="End year">End year</label>
                          </div>
                          <div id="divErroCreateResearchProject" style="display: none;">
                            <p id="mensagemDeErroCreateResearchProject" class="w3-padding responsiveMensagemDeErro"
                              style="color: #dc3545"></p>
                          </div>
                          <button class="w-100 btn btn-lg btn-success traduzir responsiveButtonDebaixoDoErro" pt="Criar"
                            eng="Create">Create</button>
                        </form><br>
                      </div>
                    </div>

                    <div id="addAlunoAoTrabalho" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div class="d-flex justify-content-center">
                        <div style="min-width: 250px;">
                          <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Adicionar aluno ao projeto"
                            eng="Add student to the project">Add student to the project</h1><br />
                          <form onsubmit="addAlunoAoTrabalho();">
                            <div class="form-floating">
                              <select class="form-select" id="adicionarAlunoAoTrabalho" value="0"
                                aria-label="Adicionar aluno ao trabalho">
                                <option ng-repeat="studentPorEscolher in profile.alunosPorEscolher"
                                  value="{{ studentPorEscolher.email }}">{{studentPorEscolher.nome}} |
                                  {{studentPorEscolher.numero}}</option>
                              </select>
                              <label for="alterarFotoFundoLink" class="traduzir" pt="Aluno"
                                eng="Student">Student</label>
                            </div>
                            <div id="divErroAddAluno" style="display: none;">
                              <p id="mensagemDeErroAddAluno" class="w3-padding responsiveMensagemDeErro"
                                style="color: #dc3545"></p>
                            </div>
                            <button class="w-100 btn btn-lg btn-success traduzir responsiveButtonDebaixoDoErro"
                              pt="Adicionar" eng="Add">Add</button>
                          </form>
                          <br>
                        </div>
                      </div>
                    </div>


                    <div id="addAlunoAoProfessor" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div class="d-flex justify-content-center">
                        <div style="min-width: 250px;">
                          <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Adicionar aluno" eng="Add student">Add
                            student</h1><br />
                          <form onsubmit="addAlunoAoProfessor();">
                            <div class="form-floating">
                              <input type="number" max="99999999" min="10000000" class="form-control"
                                placeholder="Student Number" id="adicionarAlunoAoProfessor" required />
                              <label for="alterarFotoFundoLink" class="traduzir" pt="Número de aluno"
                                eng="Student number">Student number</label>
                            </div>
                            <div id="divErroAddAlunoAoProfessor" style="display: none;">
                              <p id="mensagemDeErroAddAlunoAoProfessor" class="w3-padding responsiveMensagemDeErro"
                                style="color: #dc3545"></p>
                            </div>
                            <button class="w-100 btn btn-lg btn-success traduzir responsiveButtonDebaixoDoErro"
                              pt="Adicionar" eng="Add" id="addAlunoAoProfessorSubmit">Add</button>
                            <div class="w3-container" style="padding:1em;">
                              <span class="w3-padding"><span class="traduzir" pt="Deseja " eng="Do you want to ">Do
                                  you
                                  want to </span><a class="link traduzir" pt="registar um aluno?"
                                  eng="register a student?" style="cursor:pointer;"
                                  onclick="openLink('signinStudent', 'changeProfile')">register a student?</a></span>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>

                    <div id="signinStudent" class="changeProfile w3-animate-opacity"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div class="d-flex justify-content-center">
                        <div style="min-width: 250px;">
                          <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Registar aluno" eng="Sign in student">
                            Sign in student</h1><br />
                          <form onsubmit="signInStudent();">
                            <div class="form-floating">
                              <input type="email" class="form-control" id="emailSigninStudent"
                                placeholder="name@example.com" required>
                              <label for="emailSigninStudent" class="traduzir" pt="Endereço de email"
                                eng="Email address">Email
                                address</label>
                            </div>
                            <div class="form-floating">
                              <input type="name" class="form-control" id="nameSigninStudent" placeholder="name"
                                required>
                              <label for="nameSigninStudent" class="traduzir" pt="Nome" eng="Name">Name</label>
                            </div>
                            <div class="form-floating">
                              <input type="number" max="99999999" min="10000000" name="studentNumber"
                                class="form-control" id="studentNumberSigninStudent" placeholder="Student Number"
                                required>
                              <label for="studentNumberSigninStudent" class="traduzir" pt="Número de aluno"
                                eng="Student number">Student number</label>
                            </div>
                            <div id="divErroSigninStudent" style="display: none;">
                              <p id="mensagemDeErroSigninStudent" class="w3-padding responsiveMensagemDeErro"
                                style="color: #dc3545"></p>
                            </div>
                            <button class="w-100 btn btn-lg btn-success traduzir responsiveButtonDebaixoDoErro"
                              type="submit" pt="Registar" eng="Sign in">Sign
                              in</button>
                          </form>
                          <div class="w3-container" style="padding:1em;">
                            <span class="w3-padding"><span class="traduzir" pt="Aluno já na base de dados? "
                                eng="Student already in database? ">Student already in database? </span><a
                                id="openLogin" class="link traduzir" pt="Adiciona-o!" eng="Add him!"
                                style="cursor:pointer;" onclick="openLink('addAlunoAoProfessor', 'changeProfile')">Add
                                him!</a></span>
                          </div>
                        </div>
                      </div>
                    </div>



                    <div id="alterarAluno" class="changeProfile w3-animate-opacity"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div class="d-flex justify-content-center">
                        <div style="min-width: 250px;">
                          <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Alterar aluno" eng="Update student">
                            Update student</h1><br />
                          <form onsubmit="alterarAluno();">
                            <div class="form-floating">
                              <input disabled type="email" class="form-control" id="emailAlterarAluno"
                                placeholder="name@example.com" required>
                              <label for="emailAlterarAluno" class="traduzir" pt="Endereço de email"
                                eng="Email address">Email address</label>
                            </div>
                            <div class="form-floating">
                              <input type="text" class="form-control" id="nameAlterarAluno" placeholder="name" required>
                              <label for="nameAlterarAluno" class="traduzir" pt="Nome" eng="Name">Name</label>
                            </div>
                            <div class="form-floating">
                              <input type="number" max="99999999" min="10000000" name="studentNumber"
                                class="form-control" id="studentNumberAlterarAluno" placeholder="Student Number"
                                required>
                              <label for="studentNumberAlterarAluno" class="traduzir" pt="Número de aluno"
                                eng="Student number">Student number</label>
                            </div>
                            <div id="divErroAlterarAluno" style="display: none;">
                              <p id="mensagemDeErroAlterarAluno" class="w3-padding responsiveMensagemDeErro"
                                style="color: #dc3545"></p>
                            </div>
                            <button class="w-100 btn btn-lg btn-success traduzir responsiveButtonDebaixoDoErro"
                              pt="Alterar" eng="Update" type="submit">Update</button>
                          </form>
                        </div>
                      </div>
                    </div>

                    <div id="alterarRecursoDigital" class="changeProfile w3-animate-opacity"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div class="d-flex justify-content-center">
                        <div style="min-width: 250px;">
                          <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Alterar recurso digital"
                            eng="Update digital resource">
                            Update digital resource</h1><br />
                          <form onsubmit="alterarRecursoDigital();">
                            <input disabled hidden type="text" class="form-control" id="idAlterarRecursoDigital"
                              placeholder="descrição" required>
                            <div class="form-floating">
                              <input type="text" class="form-control" id="descricaoAlterarRecursoDigital"
                                placeholder="descrição" required>
                              <label for="descricaoAlterarRecursoDigital" class="traduzir" pt="Descrição"
                                eng="Description">Description</label>
                            </div>
                            <div class="form-floating">
                              <input type="text" class="form-control" id="urlAlterarRecursoDigital" placeholder="Url"
                                required>
                              <label for="urlAlterarRecursoDigital" class="traduzir" pt="Link do recurso digital"
                                eng="Digital resource link">Digital resource link</label>
                            </div>
                            <div id="divErroAlterarRecursoDigital" style="display: none;">
                              <p id="mensagemDeErroAlterarRecursoDigital" class="w3-padding responsiveMensagemDeErro"
                                style="color: #dc3545"></p>
                            </div>
                            <button class="w-100 btn btn-lg btn-warning traduzir responsiveButtonDebaixoDoErro"
                              pt="Alterar" eng="Update" type="submit">Update</button>
                          </form>
                        </div>
                      </div>
                    </div>



                    <div id="addDisciplinasAoProfessor" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Adicionar disciplina" eng="Add subject">
                          Add
                          subject</h1><br />
                        <form onsubmit="addDisciplinaAoProfessor();">
                          <div class="form-floating">
                            <select class="form-select" id="addDisciplinaInstituicaoAoProfessor">
                              <option ng-repeat="instituicaoPorEscolher in profile.AllInstituicoes"
                                value="{{ instituicaoPorEscolher.idInstituicao }}">
                                {{instituicaoPorEscolher.nome}}
                              </option>
                            </select>
                            <label for="alterarFotoFundoLink" class="traduzir" pt="Instituição"
                              eng="Institution">Institution</label>
                          </div>
                          <div class="form-floating">
                            <select class="form-select" id="addDisciplinaSemestreAoProfessor" value="0"
                              aria-label="semester">
                              <option value="1" class="traduzir" pt="Primeiro semestre" eng="First Semester">First
                                Semester</option>
                              <option value="2" class="traduzir" pt="Segundo semestre" eng="Secound Semester">Secound
                                Semester</option>
                            </select>
                            <label for="alterarFotoFundoLink" class="traduzir" pt="Semestre"
                              eng="Semester">Semester</label>
                          </div>
                          <div class="form-floating">
                            <select class="form-select" id="addDisciplinaDisciplinaAoProfessor">
                              <option ng-repeat="disciplinaPorEscolher in profile.AllDisciplinas"
                                value="{{ disciplinaPorEscolher.idDisciplinas }}">
                                {{disciplinaPorEscolher.nome}}
                              </option>
                            </select>
                            <label for="alterarFotoFundoLink" class="traduzir" pt="Disciplina"
                              eng="Subject">Subject</label>
                          </div>
                          <div id="divErroAddDisciplinasAoProfessor" style="display: none;">
                            <p id="mensagemDeErroAddDisciplinasAoProfessor" class="w3-padding responsiveMensagemDeErro"
                              style="color: #dc3545">
                            </p>
                          </div>
                          <button class="w-100 btn btn-lg btn-success traduzir responsiveButtonDebaixoDoErro"
                            pt="Adicionar" eng="Add">Add</button>
                        </form>
                        <br>
                      </div>
                    </div>


                    <div id="addRecursoDigitalAoProfessor" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Adicionar recurso digital"
                          eng="Add digital resource">
                          Add digital resource</h1><br />
                        <form onsubmit="addRecursoDigitalAoProfessor();">
                          <div class="form-floating">
                            <input type="text" id="addRecursoDigitalAoProfessorDescricao" maxlength="100"
                              class="form-control" placeholder="Description" required>
                            <label for="addRecursoDigitalAoProfessorDescricao" class="traduzir" pt="Descrição"
                              eng="Description">Description</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" id="addRecursoDigitalAoProfessorUrl" maxlength="100" class="form-control"
                              placeholder="Course name" required>
                            <label for="addRecursoDigitalAoProfessorUrl" class="traduzir" pt="Link para o recurso"
                              eng="Resource link">Resource link</label>
                          </div>
                          <div id="divErroAddRecursoDigitalAoProfessor" style="display: none;">
                            <p id="mensagemDeErroAddRecursoDigitalAoProfessor"
                              class="w3-padding responsiveMensagemDeErro" style="color: #dc3545">
                            </p>
                          </div>
                          <button class="w-100 btn btn-lg btn-success responsiveButtonDebaixoDoErro traduzir"
                            pt="Adicionar" eng="Add">Add</button>
                        </form>
                        <br>
                      </div>
                    </div>




                    <div id="addOrientacaoAoProfessor" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Adicionar orientação"
                          eng="Add orientation">Add orientation</h1><br />
                        <form onsubmit="addOrientacaoAoProfessor();">
                          <div class="form-floating">
                            <select class="form-select" id="addOrientacaoAoProfessorAluno">
                              <option ng-repeat="studentPorEscolher in profile.alunosPorEscolher"
                                value="{{ studentPorEscolher.email }}">{{studentPorEscolher.nome}} |
                                {{studentPorEscolher.numero}}</option>
                            </select>
                            <label for="addOrientacaoAoProfessorAluno" class="traduzir" pt="Aluno"
                              eng="Student">Student</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" id="addOrientacaoAoProfessorNomeDoCurso" maxlength="100"
                              class="form-control" placeholder="Course name" required>
                            <label for="addOrientacaoAoProfessorNomeDoCurso" class="traduzir" pt="Nome do curso"
                              eng="Course name">Course name</label>
                          </div>
                          <div class="form-floating">
                            <select class="form-select" id="addOrientacaoAoProfessorTitulo" value="0"
                              aria-label="semester">
                              <option value="true" class="traduzir" pt="Mestrado" eng="Master's degree">Master's
                                degree
                              </option>
                              <option value="false" class="traduzir" pt="Doutoramento" eng="Doctorate's degree">
                                Doctorate's degree</option>
                            </select>
                            <label for="addOrientacaoAoProfessorTitulo" class="traduzir" pt="Título"
                              eng="Title">Title</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" id="addOrientacaoAoProfessorTema" maxlength="100" class="form-control"
                              placeholder="Theme" required>
                            <label for="addOrientacaoAoProfessorTema" class="traduzir" pt="Tema"
                              eng="Theme">Theme</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" id="addOrientacaoAoProfessorRelatorio" maxlength="1000"
                              class="form-control" placeholder="Report Link" required>
                            <label for="addOrientacaoAoProfessorRelatorio" class="traduzir" pt="Link do relatório"
                              eng="Report link">Report link</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" id="addOrientacaoAoProfessorLink" maxlength="1000" class="form-control"
                              placeholder="More Info Link" required>
                            <label for="addOrientacaoAoProfessorLink" class="traduzir" pt="Link para mais informação"
                              eng="More info link">More info link</label>
                          </div>
                          <div class="form-floating">
                            <select class="form-select" id="addOrientacaoAoProfessorInstituicao">
                              <option ng-repeat="instituicaoPorEscolher in profile.AllInstituicoes"
                                value="{{ instituicaoPorEscolher.idInstituicao }}">
                                {{instituicaoPorEscolher.nome}}
                              </option>
                            </select>
                            <label for="addOrientacaoAoProfessorInstituicao" class="traduzir" pt="Instituição"
                              eng="Institution">Institution</label>
                          </div>
                          <div class="row">
                            <div style="width: 50%; padding-right: 0px;">
                              <div class="form-floating">
                                <input class="form-control" type="number" id="addOrientacaoAoProfessorStartYear"
                                  placeholder="Start Year" required>
                                <label for="addOrientacaoAoProfessorStartYear" class="traduzir" pt="Ano de início"
                                  eng="Start year">Start year</label>
                              </div>
                            </div>
                            <div style="width: 50%;padding-left: 0px; ">
                              <div class="form-floating">
                                <input class="form-control" type="number" id="addOrientacaoAoProfessorEndYear"
                                  placeholder="End Year">
                                <label for="addOrientacaoAoProfessorEndYear" class="traduzir" pt="Ano do fim"
                                  eng="End year">End year</label>
                              </div>
                            </div>
                          </div>
                          <div id="divErroAddOrientacaoAoProfessor" style="display: none;">
                            <p id="mensagemDeErroAddOrientacaoAoProfessor" class="w3-padding responsiveMensagemDeErro"
                              style="color: #dc3545">
                            </p>
                          </div>
                          <button class="w-100 btn btn-lg btn-success responsiveButtonDebaixoDoErro traduzir"
                            pt="Adicionar" eng="Add">Add</button>
                        </form>
                        <br>
                      </div>
                    </div>


                    <div id="changeOrientacaoAoProfessor" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Alterar orientação"
                          eng="Update orientation">Update orientation</h1><br />
                        <form onsubmit="updateOrientacaoAoProfessor();">
                          <input style="display:none;" id="updateOrientacaoAoProfessorIdOrientacao">
                          <div class="form-floating">
                            <select class="form-select" disabled>
                              <option id="changeOrientacaoAoProfessorAluno"></option>
                            </select>
                            <label for="changeOrientacaoAoProfessorAluno" class="traduzir" pt="Aluno"
                              eng="Student">Student</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" id="changeOrientacaoAoProfessorNomeDoCurso" maxlength="100"
                              class="form-control" placeholder="Course name" required>
                            <label for="changeOrientacaoAoProfessorNomeDoCurso" class="traduzir" pt="Nome do curso"
                              eng="Course name">Course name</label>
                          </div>
                          <div class="form-floating">
                            <select class="form-select" id="changeOrientacaoAoProfessorTitulo" value="0"
                              aria-label="semester">
                              <option value="t" class="traduzir" pt="Mestrado" eng="Master's degree">Master's degree
                              </option>
                              <option value="f" class="traduzir" pt="Doutoramento" eng="Doctorate's degree">
                                Doctorate's
                                degree</option>
                            </select>
                            <label for="changeOrientacaoAoProfessorTitulo" class="traduzir" pt="Título"
                              eng="Title">Title</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" id="changeOrientacaoAoProfessorTema" maxlength="100" class="form-control"
                              placeholder="Theme" required>
                            <label for="changeOrientacaoAoProfessorTema" class="traduzir" pt="Tema"
                              eng="Theme">Theme</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" id="changeOrientacaoAoProfessorRelatorio" maxlength="1000"
                              class="form-control" placeholder="Report Link" required>
                            <label for="changeOrientacaoAoProfessorRelatorio" class="traduzir" pt="Link do relatório"
                              eng="Report link">Report link</label>
                          </div>
                          <div class="form-floating">
                            <input type="text" id="changeOrientacaoAoProfessorLink" maxlength="1000"
                              class="form-control" placeholder="More Info Link" required>
                            <label for="changeOrientacaoAoProfessorLink" class="traduzir" pt="Link para mais informação"
                              eng="More info link">More info link</label>
                          </div>
                          <div class="form-floating">
                            <select class="form-select" id="changeOrientacaoAoProfessorInstituicao">
                              <option ng-repeat="instituicaoPorEscolher in profile.AllInstituicoes"
                                value="{{ instituicaoPorEscolher.idInstituicao }}">
                                {{instituicaoPorEscolher.nome}}
                              </option>
                            </select>
                            <label for="changeOrientacaoAoProfessorInstituicao" class="traduzir" pt="Instituição"
                              eng="Institution">Institution</label>
                          </div>
                          <div class="row">
                            <div style="width: 50%; padding-right: 0px;">
                              <div class="form-floating">
                                <input class="form-control" type="number" id="changeOrientacaoAoProfessorStartYear"
                                  placeholder="Start Year" required>
                                <label for="changeOrientacaoAoProfessorStartYear" class="traduzir" pt="Ano de ínicio"
                                  eng="Start year">Start year</label>
                              </div>
                            </div>
                            <div style="width: 50%;padding-left: 0px; ">
                              <div class="form-floating">
                                <input class="form-control" type="number" id="changeOrientacaoAoProfessorEndYear"
                                  placeholder="End Year">
                                <label for="changeOrientacaoAoProfessorEndYear" class="traduzir" pt="Ano do fim"
                                  eng="End year">End year</label>
                              </div>
                            </div>
                          </div>
                          <div id="divErroChangeOrientacaoAoProfessor" style="display: none;">
                            <p id="mensagemDeErroChangeOrientacaoAoProfessor"
                              class="w3-padding responsiveMensagemDeErro" style="color: #dc3545">
                            </p>
                          </div>
                          <button class="w-100 btn btn-lg btn-success responsiveButtonDebaixoDoErro traduzir"
                            pt="Alterar" eng="Update">Update</button>
                        </form>
                        <br>
                      </div>
                    </div>



                    <div id="confirmRemoverOrientation" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Confirmar remoção" eng="Confirm remove">
                          Confirm Remove</h1>
                      </div>
                      </p>
                      <br>
                      <p style="font-size: 20px;" class="traduzir" pt="Tem a certeza que quer remover esta orientação?"
                        eng="Are you sure you want to remove this orientation?">Are you sure you want to remove this
                        orientation?</p>
                      <br>
                      <br>
                      <button class="btn btn-lg btn-danger traduzir" pt="Sim" eng="Yes"
                        id="removeOrientacaoAoProfessorId"
                        style="bottom: 2em; position: absolute; left: 50%; transform: translateX(-105%); width: 10%; min-width: 6em;"
                        onclick="removerOrientacao(this)">Yes</button>
                      <button class="btn btn-lg btn-secondary traduzir" pt="Não" eng="No"
                        style="bottom: 2em; position: absolute; right: 50%; transform: translateX(105%); width: 10%; min-width: 6em;"
                        onclick="closeAlterar();">No</button>
                      <br>
                    </div>


                    <div id="confirmRemoverDisciplina" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Confirmar remoção" eng="Confirm remove">
                          Confirm remove</h1>
                      </div>
                      </p>
                      <br>
                      <p style="font-size: 20px;" class="traduzir" pt="Tem a certeza que quer remover esta disciplina?"
                        eng="Are you sure you want to remove this subject?">Are you sure you want to remove this
                        subject?</p>
                      <br>
                      <br>
                      <button class="btn btn-lg btn-danger traduzir" pt="Sim" eng="Yes"
                        id="removeDisciplinaAoProfessorId"
                        style="bottom: 2em; position: absolute; left: 50%; transform: translateX(-105%); width: 10%; min-width: 6em;"
                        idDisciplinas="" idInstituicao="" onclick="removerDisciplina(this)">Yes</button>
                      <button class="btn btn-lg btn-secondary traduzir" pt="Não" eng="No"
                        style="bottom: 2em; position: absolute; right: 50%; transform: translateX(105%); width: 10%; min-width: 6em;"
                        onclick="closeAlterar();">No</button>
                      <br>
                    </div>


                    <div id="confirmRemoverRecursoDigital" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Confirmar exclusão" eng="Confirm delete">
                          Confirm delete</h1>
                      </div>
                      </p>
                      <br>
                      <p style="font-size: 20px;" class="traduzir"
                        pt="Tem a certeza que quer remover esta recurso digital?"
                        eng="Are you sure you want to remove this digital resource?">Are you sure you want to remove
                        this digital resource?</p>
                      <br>
                      <br>
                      <button class="btn btn-lg btn-danger traduzir" pt="Sim" eng="Yes"
                        id="removeRecursoDigitalAoProfessorId"
                        style="bottom: 2em; position: absolute; left: 50%; transform: translateX(-105%); width: 10%; min-width: 6em;"
                        onclick="removerRecursoDigital(this)">Yes</button>
                      <button class="btn btn-lg btn-secondary traduzir" pt="Não" eng="No"
                        style="bottom: 2em; position: absolute; right: 50%; transform: translateX(105%); width: 10%; min-width: 6em;"
                        onclick="closeAlterar();">No</button>
                      <br>
                    </div>





                    <div id="confirmApagarDisciplina" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Confirmar exclusão" eng="Confirm delete">
                          Confirm delete</h1>
                      </div>
                      </p>
                      <br>
                      <p style="font-size: 20px;" class="traduzir"
                        pt="Tem a certeza que deseja eliminar esta disciplina?"
                        eng="Are you sure you want to delete this subject?">Are you sure you want to delete this
                        subject?</p>
                      <br>
                      <br>
                      <button class="btn btn-lg btn-danger traduzir" pt="Sim" eng="Yes"
                        id="apagarDisciplinaAoProfessorId"
                        style="bottom: 2em; position: absolute; left: 50%; transform: translateX(-105%); width: 10%; min-width: 6em;"
                        idDisciplinas="" idInstituicao="" onclick="apagarDisciplina(this)">Yes</button>
                      <button class="btn btn-lg btn-secondary traduzir" pt="Não" eng="No"
                        style="bottom: 2em; position: absolute; right: 50%; transform: translateX(105%); width: 10%; min-width: 6em;"
                        onclick="closeAlterar();">No</button>
                      <br>
                    </div>


                    <div id="confirmRemoverAlunosDoProfessor" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Confirmar remoção" eng="Confirm remove">
                          Confirm remove</h1>
                      </div>
                      </p>
                      <br>
                      <p style="font-size: 20px;" class="traduzir" pt="Tem a certeza que deseja remover este aluno?"
                        eng="Are you sure you want to remove this student?">Are you sure you want to remove this
                        student?</p>
                      <br>
                      <br>
                      <button class="btn btn-lg btn-danger traduzir" pt="Sim" eng="Yes" id="removeStudentAoProfessor"
                        style="bottom: 2em; position: absolute; left: 50%; transform: translateX(-105%); width: 10%; min-width: 6em;"
                        onclick="eliminarStudentFromThisTeacher(this)">Yes</button>
                      <button class="btn btn-lg btn-secondary traduzir" pt="Não" eng="No"
                        style="bottom: 2em; position: absolute; right: 50%; transform: translateX(105%); width: 10%; min-width: 6em;"
                        onclick="closeAlterar();">No</button>
                      <br>
                    </div>

                    <div id="confirmApagarTrabalhos" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Confirmar exclusão" eng="Confirm delete">
                          Confirm delete</h1>
                      </div>
                      </p>
                      <br>
                      <p style="font-size: 20px;" class="traduzir"
                        pt="Tem a certeza que deseja eliminar este projeto fim de curso?"
                        eng="Are you sure you want to delete this End-of-course project?">Are you sure you want to
                        delete this End-of-course project?</p>
                      <br>
                      <br>
                      <button class="btn btn-lg btn-danger traduzir" pt="Sim" eng="Yes" id="removeProjetoAoProfessor"
                        style="bottom: 2em; position: absolute; left: 50%; transform: translateX(-105%); width: 10%; min-width: 6em;"
                        onclick="eliminarProjeto(this)">Yes</button>
                      <button class="btn btn-lg btn-secondary traduzir" pt="Não" eng="No"
                        style="bottom: 2em; position: absolute; right: 50%; transform: translateX(105%); width: 10%; min-width: 6em;"
                        onclick="closeAlterar();">No</button>
                      <br>
                    </div>


                    <div id="confirmApagarResearchProject" class="changeProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Confirmar exclusão" eng="Confirm delete">
                          Confirm delete</h1>
                      </div>
                      </p>
                      <br>
                      <p style="font-size: 20px;" class="traduzir"
                        pt="Tem a certeza que deseja eliminar este projeto de pesquisa?"
                        eng="Are you sure you want to delete this research project?">Are you sure you want to delete
                        this research project?</p>
                      <br>
                      <br>
                      <button class="btn btn-lg btn-danger traduzir" pt="Sim" eng="Yes"
                        id="removeResearchProjetoAoProfessor"
                        style="bottom: 2em; position: absolute; left: 50%; transform: translateX(-105%); width: 10%; min-width: 6em;"
                        onclick="eliminarResearchProjeto(this)">Yes</button>
                      <button class="btn btn-lg btn-secondary traduzir" pt="Não" eng="No"
                        style="bottom: 2em; position: absolute; right: 50%; transform: translateX(105%); width: 10%; min-width: 6em;"
                        onclick="closeAlterar();">No</button>
                      <br>
                    </div>




                  </div>
                </div>

                <div id="infoProfile" class="w3-modal modal">
                  <div class="w3-animate-zoom form-signin text-center modal-content"
                    style="width: 90%; max-width:700px; min-height:auto; background-color: #f5f5f5;padding:0px; ">

                    <div class="w3-center"><br>
                      <span onclick="closeInfo();" id="closeInfoPerfil"
                        class="w3-button w3-xlarge w3-transparent w3-display-topright" title="Close Modal">×</span>
                    </div>

                    <div id="infoOrientacao" class="infoProfile"
                      style="margin-left: 5%;margin-right: 5%;margin-bottom: 5%;">
                      <div style="min-width: 200px;">
                        <h1 class="h3 mb-3 fw-normal display-6 traduzir" pt="Orientação:" eng="Orientation:">
                          Orientation:</h1><br />
                        <div style="border: 1px solid black;">
                          <table class="table table-hover " style="margin-bottom: 0px;">
                            <tbody>
                              <tr>
                                <th scope="row" class="traduzir bg-dark text-light" pt="Aluno" eng="Student">Student
                                </th>
                                <td id="infoOrientationStudent" class="bg-white text-dark"></td>
                              </tr>
                              <tr>
                                <th scope="row" class="traduzir bg-dark text-light" pt="Nome do curso"
                                  eng="Course name">Course name</th>
                                <td id="infoOrientationCourseName" class="bg-white text-dark"></td>
                              </tr>
                              <tr>
                                <th scope="row" class="traduzir bg-dark text-light" pt="Título" eng="Title">Title</th>
                                <td id="infoOrientationTitle" class="bg-white text-dark"></td>
                              </tr>
                              <tr>
                                <th scope="row" class="traduzir bg-dark text-light" pt="Tema" eng="Theme">Theme</th>
                                <td id="infoOrientationTheme" class="bg-white text-dark"></td>
                              </tr>
                              <tr>
                                <th scope="row" class="traduzir bg-dark text-light" pt="Link do relatório"
                                  eng="Report link">Report link
                                </th>
                                <td class="bg-white text-dark"><a class="traduzir" pt="Relatório" eng="Report"
                                    id="infoOrientationReport" target="_blank" href="www.link.com">Report</a></td>
                              </tr>
                              <tr>
                                <th scope="row" class="traduzir bg-dark text-light" pt="Mais informação aqui"
                                  eng="More info here">More
                                  info here</th>
                                <td class="bg-white text-dark"><a id="infoOrientationLink" target="_blank"
                                    href="www.link.com" class="traduzir" pt="Site" eng="Website">Website</a></td>
                              </tr>
                              <tr>
                                <th scope="row" class="traduzir bg-dark text-light" pt="Instituição" eng="Institution">
                                  Institution</th>
                                <td id="infoOrientationInstitution" class="bg-white text-dark"></td>
                              </tr>
                              <tr>
                                <th scope="row" class="traduzir bg-dark text-light" pt="Duração" eng="Duration">
                                  Duration
                                </th>
                                <td id="infoOrientationDuration" class="bg-white text-dark"></td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>

                <!-- foto de perfil e foto de fundo -->
                <div
                  class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative"
                  style="height: 252px;">

                  <div class="containerFotoPerfil position-relative">
                    <img class="bd-placeholder-img fotoPerfil" style="border: 10px solid #212529;object-fit: cover;"
                      ng-src="{{profile.fotoPerfil}}" id="fotoPerfilOriginal" alt="Profile Picture">
                    <div class="overFotoZoom">
                      <!-- butoes para alterar ou ver foto de perfil -->
                      <button class="w-100 btn btn-lg btn-secondary traduzir" pt="Ver" eng="View"
                        onclick="fotoZoom('perfil');" id="zoomFotoPerfil">View</button><br>
                      <button class="w-100 btn btn-lg btn-warning traduzir" pt="Alterar" eng="Update"
                        style="margin-top: 1em;" ng-if="profile.permissions == 3"
                        onclick="callAlterar('changeFotoProfile', 'changeProfile');">Update</button>
                    </div>
                  </div>
                  <div class="containerFotoFundo col d-flex flex-column position-static">
                    <img class="bd-placeholder-img fotoFundo"
                      style="border: 0.5px solid #212529;width: 100%;height: 100%;object-fit: cover;"
                      ng-src="{{profile.fotoFundo}}" id="fotoFundoOriginal" alt="Background Photo">
                    <div class="overFotoZoom " style="margin-left: 100px;">
                      <!-- butoes para alterar ou ver foto de fundo -->
                      <button class="w-100 btn btn-lg btn-secondary traduzir" pt="Ver" eng="View"
                        onclick="fotoZoom('fundo');" id="zoomFotoPerfil">View</button><br>
                      <button class="w-100 btn btn-lg btn-warning traduzir" pt="Alterar" eng="Update"
                        ng-if="profile.permissions == 3" onclick="callAlterar('changeFotoBackground', 'changeProfile');"
                        style="margin-top: 1em;">Update</button>
                    </div>
                  </div>
                </div>


                <!-- Foto zoom -->
                <div id="fotoZoom" class="modalFotoZoom">
                  <div>
                    <span class="closeImageZoom"
                      onclick="document.getElementById('fotoZoom').style.display = 'none';">&times;</span>
                    <img class="modal-content-fotoZoom" id="fotoZoomed">
                    <div id="caption-fotoZoom"></div>
                  </div>
                </div>

                <div class="p-4 p-md-5 mb-4 text-white rounded bg-dark position-relative">
                  <div class="col-md-12 px-0">
                    <strong class="mb-2" style="color: {{ profile.areaCor }};"
                      ng-if="profile.areaNome != 'None' && profile.areaNome != 'Vazio'">{{
                      profile.areaNome }}</strong>
                    <h2 class="display-4"> {{ profile.nome }} <div class="responsiveSmalText">{{
                        user.email }}</div>
                    </h2>
                    <div ng-if="profile.years" class="mb-1 fst-italic">{{ profile.years }} <span class="traduzir"
                        pt="anos de experiência" eng="years of experience">years of experience</span></div>
                    <h6 ng-if="profile.resumo" style="margin-top: 1em;" class="lead"><b class="traduzir"
                        pt="Breve resumo" eng="Brief summary">Brief summary</b></h6>
                    <p ng-if="profile.resumo" class="lead my-2 mb-auto" style="white-space: pre-wrap;">{{
                      profile.resumo }}</p>
                    <button ng-if="profile.permissions == 3" class="btn btn-warning traduzir responsiveKindaSmalText"
                      pt="Alterar" eng="Update" style="position: absolute; right:1em;top: 1em;"
                      onclick="callAlterar('changeInfoProfile', 'changeProfile');">Update</button>
                  </div>
                </div>

                <ul class="nav nav-tabs" id="myTab" role="tablist">
                  <li class="nav-item">
                    <button class="nav-link active traduzir responsiveKindaSmalText" pt="Ensino" eng="Teaching"
                      id="Teaching-tab" data-toggle="tab" href="#Teaching" role="tab" aria-controls="Teaching"
                      aria-selected="true">Teaching</button>
                  </li>
                  <li class="nav-item">
                    <button class="nav-link traduzir responsiveKindaSmalText" pt="Orientações" eng="Orientation"
                      id="Orientation-tab" data-toggle="tab" href="#Orientation" role="tab" aria-controls="Orientation"
                      aria-selected="false">Orientation</button>
                  </li>
                  <li class="nav-item">
                    <button class="nav-link traduzir responsiveKindaSmalText" pt="Projetos de pesquisa"
                      eng="Research projects" id="Research-projects-tab" data-toggle="tab" href="#Research-projects"
                      role="tab" aria-controls="Research-projects" aria-selected="false">Research projects</button>
                  </li>
                  <li class="nav-item">
                    <button class="nav-link traduzir responsiveKindaSmalText" pt="Projetos final de curso"
                      eng="End-of-course projects" id="End-of-course-projects-tab" data-toggle="tab"
                      href="#End-of-course-projects" role="tab" aria-controls="End-of-course-projects"
                      aria-selected="false">End-of-course projects</button>
                  </li>
                  <li class="nav-item">
                    <button class="nav-link traduzir responsiveKindaSmalText" pt="Alunos" eng="Students"
                      id="Students-tab" data-toggle="tab" href="#Students" role="tab" aria-controls="Students"
                      aria-selected="false">Students</button>
                  </li>
                  <li class="nav-item">
                    <button class="nav-link traduzir responsiveKindaSmalText" pt="Recursos digitais"
                      eng="Digital resources" id="recursosDigitais-tab" data-toggle="tab" href="#recursosDigitais"
                      role="tab" aria-controls="recursosDigitais" aria-selected="false">Digital resources</button>
                  </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                  <!--Digital resources -->
                  <div
                    class="tab-pane fade row g-0 border border-top-0 rounded-bottom overflow-hidden flex-md-row shadow-sm h-md-250 position-relative"
                    style="background-color: white;" id="recursosDigitais" role="tabpanel"
                    aria-labelledby="recursosDigitais-tab">
                    <div class="col-md-12 p-4 d-flex flex-column position-static">
                      <div ng-if="profile.recursosDigitais.length > 0" style="position: relative;">
                        <div
                          ng-style="profile.permissions == 3 && profile.recursosDigitais.length != 0 && {'padding-top': '2em'}">
                          <table class="table table-hover">
                            <thead>
                              <tr>
                                <th scope="col" class=" traduzir " pt="Descrição" eng="Description">
                                  Description</th>
                                <th scope="col" class="actionTd traduzir" pt="Ação" ng-if="profile.permissions == 3"
                                  eng="Action">
                                  Action</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr ng-repeat="rs in profile.recursosDigitais">
                                <td scope="row" onclick="openNewTab(this.getAttribute('link'));" link="{{ rs.url }}"
                                  class="link-primary" style="cursor: pointer;">{{ rs.descricao }}
                                </td>
                                <td scope="row" class="actionTd" ng-if="profile.permissions == 3">
                                  <button class="btn btn-sm btn-warning actionButtons traduzir actionButtons"
                                    idRS="{{rs.id}}" eng="Update" pt="Alterar" descricao="{{rs.descricao}}"
                                    url="{{rs.url}}" onclick='updateRecursoDigital(this)'>Update</button>
                                  <button class="btn btn-sm btn-danger actionButtons traduzir actionButtons"
                                    eng="Delete" value="{{rs.id}}" pt="Eliminar"
                                    onclick='confirmApagarRecursoDigitalOpen(this)'>Delete</button>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <span ng-if="profile.recursosDigitais.length === 0" class="text-muted traduzir p-4"
                        pt="Professor sem recursos digitais disponíveis de momento"
                        eng="Teacher with no available digital resources at the moment">Teacher with no available
                        digital resources at the moment</span>

                      <button class="btn btn-success traduzir responsiveButtonNovo" style="position: absolute; "
                        ng-if="profile.permissions == 3" pt="Adicionar novo +" eng="Add new +"
                        onclick="callAlterar('addRecursoDigitalAoProfessor', 'changeProfile');">Add
                        new +</button>


                    </div>

                  </div>

                  <!--DISCIPLINAS DADAS PELOS PROFESSORES -->
                  <div
                    class="show active tab-pane fade row g-0 border border-top-0 rounded-bottom overflow-hidden flex-md-row shadow-sm h-md-250 position-relative"
                    style="background-color: white;" id="Teaching" role="tabpanel" aria-labelledby="Teaching-tab">
                    <div class="col-md-12 p-5 d-flex flex-column position-static">

                      <div ng-if="profile.instituicoesAtuais.length > 0">

                        <h3 class="display-6 traduzir semiTitles" pt="Atualmente ensinando:" eng="Currently teaching:">
                          Currently teaching:</h3>
                        <hr>
                        <div class="row " ng-repeat="instituicao in profile.instituicoesAtuais">
                          <h4 class="display-6 semiBigTitles" style="padding-top: 1em;"
                            ng-style="$first && {'padding-top': '0.2em'}">{{ instituicao.sigla }} - {{
                            instituicao.nome }}</h4>
                          <div class="col-md-6" ng-if="instituicao.semestre1"
                            ng-class="{'col-md-12':instituicao.semestre2 == false}">
                            <h5 style="padding-top: 0.5em;" class="display-6 traduzir semiBigFont"
                              pt="Primeiro semestre" eng="First semester">First semester</h5>
                            <table class="table table-hover">
                              <thead>
                                <tr>
                                  <th scope="col" class=" traduzir" pt="Nome" eng="Name">Name</th>
                                  <th scope="col" ng-if="profile.permissions == 3" class="actionTd traduzir" pt="Ação"
                                    eng="Action">Action</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr ng-repeat="disciplinas in instituicao.disciplinas"
                                  ng-if="disciplinas.semestre == 1">
                                  <td scope="row">{{ disciplinas.sigla }}</td>
                                  <td ng-if="profile.permissions == 3" class="actionTd"><button
                                      idDisciplinas="{{ disciplinas.idDisciplinas }}"
                                      idInstituicao="{{ instituicao.idInstituicao }}"
                                      class="btn btn-sm btn-danger traduzir" pt="Remover" eng="Remove"
                                      onclick='confirmRemoverDisciplinasOpen(this);'>Remove</button>
                                  </td>
                                </tr>
                              </tbody>
                            </table>

                          </div>
                          <div class="col-md-6" ng-if="instituicao.semestre2"
                            ng-class="{'col-md-12':instituicao.semestre1 == false}">
                            <h5 style="padding-top: 0.5em;" class="display-6 traduzir semiBigFont" pt="Segundo semestre"
                              eng="Second semester">Second semester</h5>
                            <table class="table table-hover">
                              <thead>
                                <tr>
                                  <th scope="col" class=" traduzir" pt="Nome" eng="Name">Name</th>
                                  <!-- <th scope="col">Email</th> -->
                                  <th scope="col" ng-if="profile.permissions == 3" class="traduzir actionTd" pt="Ação"
                                    eng="Action">Action</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr ng-repeat="disciplinas in instituicao.disciplinas"
                                  ng-if="disciplinas.semestre == 2">
                                  <td scope="row">{{ disciplinas.sigla }}</td>
                                  <td ng-if="profile.permissions == 3" class="actionTd"><button
                                      idDisciplinas="{{ disciplinas.idDisciplinas }}"
                                      idInstituicao="{{ instituicao.idInstituicao }}"
                                      class="btn btn-sm btn-danger traduzir" pt="Remover" eng="Remove"
                                      onclick='confirmRemoverDisciplinasOpen(this);'>Remove</button>
                                  </td>
                                </tr>
                              </tbody>
                            </table>

                          </div>
                        </div>
                      </div>
                      <h3 style="padding-top: 2em;" class="display-6 traduzir semiTitles" pt="Histórico de ensino:"
                        eng="All-time teaching:" ng-if="profile.instituicoesAtuais.length > 0">All-time teaching:
                      </h3>
                      <hr ng-if="profile.instituicoesAtuais.length > 0" />
                      <h3 ng-if="profile.instituicoesAtuais.length === 0 && profile.instituicoesHistorico.length > 0"
                        class="display-6 traduzir semiTitles" pt="Histórico de ensino:" eng="All-time teaching:">
                        All-time
                        teaching:
                      </h3>
                      <hr ng-if="profile.instituicoesAtuais.length === 0 && profile.instituicoesHistorico.length > 0" />
                      <span ng-if="profile.instituicoesHistorico.length === 0" class="text-muted traduzir"
                        pt="Professor sem histórico de disciplinas lecionadas" eng="Teacher with no
                    history of taught subjects">Teacher with no history of taught subjects</span>

                      <div class="row" ng-repeat="instituicaoHistorico in profile.instituicoesHistorico">
                        <h4 style="padding-top: 1em;" class="display-6 semiBigTitles"
                          ng-style="$first && {'padding-top': '0.2em'}">{{ instituicaoHistorico.sigla
                          }} - {{ instituicaoHistorico.nome }}</h4>
                        <div class="col-md-12" style="padding-top: 0.5em;">
                          <table class="table table-hover">
                            <thead>
                              <tr>
                                <th scope="col" class=" traduzir" pt="Nome" eng="Name">Name</th>
                                <th scope="col" class=" traduzir" pt="Nome completo" eng="Full name">Full name</th>
                                <th scope="col" ng-if="profile.permissions == 3" class="traduzir actionTd" pt="Ação"
                                  eng="Action">
                                  Action</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr ng-repeat="disciplinas in instituicaoHistorico.disciplinas">
                                <td scope="row">{{ disciplinas.sigla }}</td>
                                <td scope="row">{{ disciplinas.nome }}</td>
                                <td ng-if="profile.permissions == 3" class="actionTd"><button
                                    ng-click="profile.removerDisciplinaHistorico(disciplinas.idDisciplinas, instituicaoHistorico.idInstituicao);"
                                    class="btn btn-sm btn-danger traduzir" pt="Eliminar" eng="Delete"
                                    idDisciplinas="{{ disciplinas.idDisciplinas }}"
                                    idInstituicao="{{ instituicaoHistorico.idInstituicao }}"
                                    onclick='confirmApagarDisciplinasOpen(this)'>Delete</button>
                                </td>
                              </tr>
                            </tbody>
                          </table>

                        </div>
                      </div>

                      <button class="btn btn-success traduzir responsiveButtonNovo" style="position: absolute; "
                        ng-if="profile.permissions == 3" pt="Addicionar novo +" eng="Add new +"
                        onclick="callAlterar('addDisciplinasAoProfessor', 'changeProfile');">Add
                        new +</button>
                    </div>

                  </div>
                  <!-- PROJETOS DE PESQUISA -->
                  <div id="Research-projects" role="tabpanel" aria-labelledby="Research-projects-tab"
                    class="tab-pane fade row g-0 border border-top-0 rounded-bottom overflow-hidden flex-md-row shadow-sm h-md-250 position-relative text-light"
                    style="background-color: white;"
                    ng-style="profile.permissions == 3 && trabalhos.trabalhosDePesquisaForProfessorAtuais.length != 0 && trabalhos.trabalhosDePesquisaForProfessorHistorico.length != 0 && {'padding-top': '2em'}">
                    <!-- projects of a teacher CURRENTLY -->
                    <div class="col-md-12" style="padding-left: 2.5em;padding-top: 2.5em;padding-right: 2.5em;"
                      ng-if="trabalhos.trabalhosDePesquisaForProfessorAtuais.length > 0">
                      <h3 class="display-6 traduzir semiTitles" style="color: #495057;" pt="Atualmente pesquisando:"
                        eng="Currently researching:">Currently researching:</h3>
                      <hr style="color: #6c757d;">
                    </div>
                    <div class="col p-4 d-flex flex-column position-static"
                      ng-if="trabalhos.trabalhosDePesquisaForProfessorAtuais.length > 0"
                      style="padding-left: 2.5em !important; padding-right: 2.5em !important; padding-top: 0px !important;">
                      <div
                        ng-repeat="allTrabalhos in trabalhos.trabalhosDePesquisaForProfessorAtuais track by allTrabalhos.id">
                        <div
                          class="row g-0 border rounded-left overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative text-dark">
                          <div class="col p-4 d-flex flex-column position-relative" style="background-color: #f5f5f5; ">

                            <h3 class="mb-0">{{ allTrabalhos.titulo }} - {{ allTrabalhos.sigla }}</h3>
                            <div class="mb-1 text-muted">{{ allTrabalhos.ano }}</div>
                            <p><span class="traduzir" pt="Financiador: " eng="Financier: ">Financier: </span>{{
                              allTrabalhos.financiador }}<br><span class="traduzir" pt="Investigador principal: "
                                eng="Principal investigator: ">Principal investigator: </span>{{
                              allTrabalhos.investigadorPrincipal }}
                            </p>
                            <p class="card-text mb-auto" ng-if="allTrabalhos.resumo"
                              style="white-space: pre-wrap;padding-bottom: 1em;">{{
                              allTrabalhos.resumo }}</p>
                            <p ng-if="allTrabalhos.link">
                              <span style="width: 100%;">
                                <span class="traduzir" pt="Mais informações " eng="More info ">More info </span><a
                                  ng-href="{{allTrabalhos.link}}" class="traduzir" pt="aqui!" eng="here!" role="button"
                                  target="_blank">here!</a>
                              </span>
                            </p>
                            <span ng-if="allTrabalhos.dataInicio && allTrabalhos.dataFim">
                              <em>{{allTrabalhos.dataInicio}} - {{allTrabalhos.dataFim}}</em>
                            </span><br>
                            <p>
                              <span style="width: 100%;" ng-if="allTrabalhos.podeAlterar == true">
                                <a data-toggle="collapse" href="#accordion-{{allTrabalhos.id}}" role="button"
                                  aria-expanded="false" class="accordionTrabalhos traduzir" pt="Editar"
                                  eng="Edit">Edit</a>
                              </span>
                            </p>
                          </div>

                          <div class="col-auto d-none d-lg-block">
                            <img ng-src="{{allTrabalhos.imagem}}"
                              style="border: 1px solid grey;object-fit: cover; height: 100%;" class="bd-placeholder-img"
                              width="200" alt="Project picture">
                          </div>
                          <div class="collapse" id="accordion-{{allTrabalhos.id}}"
                            ng-if="allTrabalhos.podeAlterar == true">
                            <div class="card card-body rounded-0" style="background-color: lightgrey;">
                              <div class="container col-md-12">
                                <div class="row d-flex justify-content-center" style="padding-bottom: 5em;">
                                  <form
                                    onsubmit="alterarProjetoInvestigacao(this, angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.profileEmail);"
                                    class="row d-flex justify-content-center">
                                    <input type="text" value="{{allTrabalhos.id}}"
                                      id="alteraridProjetoInvestigacao{{allTrabalhos.id}}" name="id"
                                      style="display: none;" disabled required>
                                    <div class="col-md-6">
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" value="{{allTrabalhos.titulo}}" class="form-control"
                                          placeholder="Title" id="alterarTituloProjetoInvestigacao{{allTrabalhos.id}}"
                                          name="titulo" required>
                                        <label for="alterarTituloProjetoInvestigacao{{allTrabalhos.id}}"
                                          class="traduzir" pt="Título" eng="Title">Title</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" value="{{allTrabalhos.investigadorPrincipal}}"
                                          class="form-control"
                                          id="alterarinvestigadorPrincipalProjetoInvestigacao{{allTrabalhos.id}}"
                                          name="investigadorPrincipal" placeholder="Principal investigator" required>
                                        <label for="alterarinvestigadorPrincipalProjetoInvestigacao{{allTrabalhos.id}}"
                                          class="traduzir" pt="Investigador principal"
                                          eng="Principal investigator">Principal
                                          investigator</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" value="{{allTrabalhos.imagem}}" name="Image"
                                          class="form-control" id="alterarImagemProjetoInvestigacao{{allTrabalhos.id}}"
                                          placeholder="Image" required>
                                        <label for="alterarImagemProjetoInvestigacao{{allTrabalhos.id}}"
                                          class="traduzir" pt="Imagem" eng="Image">Image</label>
                                      </div>

                                      <div class="form-floating" style="margin-bottom:1em;"
                                        ng-if="profile.permissions == 3">
                                        <input type="number" name="dataInicio" value="{{allTrabalhos.dataInicio}}"
                                          class="form-control" min="1900"
                                          id="alterarDataInicioProjetoInvestigacao{{allTrabalhos.id}}"
                                          placeholder="Start year" required>
                                        <label for="alterarDataInicioProjetoInvestigacao{{allTrabalhos.id"
                                          class="traduzir" pt="Ano de início" eng="Start year">Start
                                          year</label>
                                      </div>

                                    </div>

                                    <div class="col-md-6">
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" name="sigla" value="{{allTrabalhos.sigla}}"
                                          class="form-control" id="alterarSiglaProjetoInvestigacao{{allTrabalhos.id}}"
                                          placeholder="Initials" required>
                                        <label for="alterarSiglaProjetoInvestigacao{{allTrabalhos.id}}" class="traduzir"
                                          pt="Sigla" eng="Initials">Initials</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" name="financiador" required
                                          value="{{allTrabalhos.financiador}}" class="form-control"
                                          id="alterarFinanciadorProjetoInvestigacao{{allTrabalhos.id}}"
                                          placeholder="Financier">
                                        <label for="alterarFinanciadorProjetoInvestigacao{{allTrabalhos.id}}"
                                          class="traduzir" pt="Financiador" eng="Financier">Financier</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" name="link" value="{{allTrabalhos.link}}"
                                          class="form-control" id="alterarLinkProjetoInvestigacao{{allTrabalhos.id}}"
                                          placeholder="Project Link">
                                        <label for="alterarLinkProjetoInvestigacao{{allTrabalhos.id}}" class="traduzir"
                                          pt="Link do projeto" eng="Project link">Project link</label>
                                      </div>

                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="number" name="dataFim" value="{{allTrabalhos.dataFim}}"
                                          class="form-control" min="1900"
                                          id="alterarDataFimProjetoInvestigacao{{allTrabalhos.id}}"
                                          placeholder="End year">
                                        <label for="alterarDataFimProjetoInvestigacao{{allTrabalhos.id}}"
                                          class="traduzir" pt="Ano do fim" eng="End year">End
                                          year</label>
                                      </div>
                                    </div>
                                    <div id="divErroUpdateResearchProject{{allTrabalhos.id}}" style="display: none;">
                                      <p id="mensagemDeErroUpdateResearchProject{{allTrabalhos.id}}"
                                        class="text-center w3-padding responsiveMensagemDeErro" style="color: #dc3545">
                                      </p>
                                    </div>
                                    <div class="col-md-12">
                                      <div class="form-floating">
                                        <textarea class="form-control" name="resumo"
                                          id="alterarResumoProjetoInvestigacao{{allTrabalhos.id}}" style="height: 10em;"
                                          placeholder="Brief summary">{{allTrabalhos.resumo}}</textarea>
                                        <label for="alterarResumoProjetoInvestigacao{{allTrabalhos.id}}"
                                          class="traduzir" pt="Breve resumo do projeto"
                                          eng="Project's brief summary">Project's brief
                                          summary</label>
                                      </div>

                                    </div>

                                    <button class="btn btn-lg btn-warning traduzir" pt="Alterar" eng="Update"
                                      ng-if="profile.permissions == 3 && allTrabalhos.versao2 != 't'"
                                      style="position: absolute; bottom: 0.5em; left: 50%; transform: translateX(-125%); margin: 1em;width: 10%;min-width: 6em;">Update</button>
                                    <button class="btn btn-lg btn-warning traduzir" pt="Alterar" eng="Update"
                                      ng-if="allTrabalhos.versao2 != 't' && profile.permissions != 3"
                                      style="position: absolute; bottom: 0.5em; left: 50%; transform: translateX(-65%); margin: 1em;width: 10%;min-width: 6em;">Update</button>
                                  </form>
                                  <button class="btn btn-lg btn-danger traduzir" pt="Eliminar" eng="Delete"
                                    ng-if="profile.permissions == 3 && allTrabalhos.versao2 != 't'"
                                    style="position: absolute; right: 50%; transform: translateX(125%); bottom: 0.5em; margin: 1em;width: 10%;min-width: 6em;"
                                    onclick="eliminarResearchProjetoOpen(this);"
                                    value="{{ allTrabalhos.id }}">Delete</button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>

                    <!-- projects of a teacher COMPLETED -->
                    <div class="col-md-12" style="padding-left: 2.5em;padding-top: 2.5em;padding-right: 2.5em;"
                      ng-if="trabalhos.trabalhosDePesquisaForProfessorHistorico.length > 0">
                      <h3 class="display-6 traduzir semiTitles" pt="Pesquisas concluídas:" eng="Completed researches"
                        style="color: black;">Completed researches:</h3>
                      <hr style="color: #6c757d;">
                    </div>
                    <div class="col p-4 d-flex flex-column position-static"
                      ng-if="trabalhos.trabalhosDePesquisaForProfessorHistorico.length > 0"
                      style="padding-left: 2.5em !important; padding-right: 2.5em !important; padding-top: 0px !important;">
                      <div
                        ng-repeat="allTrabalhos in trabalhos.trabalhosDePesquisaForProfessorHistorico track by allTrabalhos.id">
                        <div
                          class="row g-0 border rounded-left overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative text-dark">
                          <div class="col p-4 d-flex flex-column position-relative" style="background-color: #f5f5f5; ">

                            <h3 class="mb-0">{{ allTrabalhos.titulo }} - {{ allTrabalhos.sigla }}</h3>
                            <div class="mb-1 text-muted">{{ allTrabalhos.ano }}</div>
                            <p><span class="traduzir" pt="Financiador: " eng="Financier: ">Financier: </span>{{
                              allTrabalhos.financiador }}<br><span class="traduzir" pt="Investigador principal: "
                                eng="Principal investigator: ">Principal investigator: </span>{{
                              allTrabalhos.investigadorPrincipal }}
                            </p>
                            <p class="card-text mb-auto" ng-if="allTrabalhos.resumo"
                              style="white-space: pre-wrap;padding-bottom: 1em;">{{
                              allTrabalhos.resumo }}</p>
                            <p ng-if="allTrabalhos.link">
                              <span style="width: 100%;">
                                <span class="traduzir" pt="Mais informações " eng="More info ">More info </span><a
                                  ng-href="{{allTrabalhos.link}}" role="button" class="traduzir" pt="aqui!" eng="here!"
                                  target="_blank">here!</a>
                              </span>
                            </p>
                            <span ng-if="allTrabalhos.dataInicio && allTrabalhos.dataFim">
                              <em>{{allTrabalhos.dataInicio}} - {{allTrabalhos.dataFim}}</em>
                            </span>
                            <p>
                              <span style="width: 100%;" ng-if="allTrabalhos.podeAlterar == true">
                                <a data-toggle="collapse" href="#accordion-{{allTrabalhos.id}}" role="button"
                                  aria-expanded="false" class="accordionTrabalhos traduzir" pt="Editar"
                                  eng="Edit">Edit</a>
                              </span>
                            </p>
                          </div>

                          <div class="col-auto d-none d-lg-block">
                            <img ng-src="{{allTrabalhos.imagem}}"
                              style="border: 1px solid grey;object-fit: cover; height: 100%;" class="bd-placeholder-img"
                              width="200" alt="Project picture">
                          </div>
                          <div class="collapse" id="accordion-{{allTrabalhos.id}}"
                            ng-if="allTrabalhos.podeAlterar == true">
                            <div class="card card-body rounded-0" style="background-color: lightgrey;">
                              <div class="container col-md-12">
                                <div class="row d-flex justify-content-center" style="padding-bottom: 5em;">
                                  <form
                                    onsubmit="alterarProjetoInvestigacao(this, angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.profileEmail);"
                                    class="row d-flex justify-content-center">
                                    <input type="text" value="{{allTrabalhos.id}}" name="id" style="display: none;"
                                      disabled required>
                                    <div class="col-md-6">
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" value="{{allTrabalhos.titulo}}" class="form-control"
                                          placeholder="Title" name="titulo" required>
                                        <label class="traduzir" pt="Título" eng="Title">Title</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" value="{{allTrabalhos.investigadorPrincipal}}"
                                          class="form-control" name="investigadorPrincipal"
                                          placeholder="Principal investigator" required>
                                        <label class="traduzir" pt="Investigador principal"
                                          eng="Principal investigator">Principal investigator</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" value="{{allTrabalhos.imagem}}" name="Image"
                                          class="form-control" placeholder="Image" required>
                                        <label class="traduzir" pt="Imagem" eng="Image">Image</label>
                                      </div>

                                      <div class="form-floating" style="margin-bottom:1em;"
                                        ng-if="profile.permissions == 3">
                                        <input type="number" name="dataInicio" value="{{allTrabalhos.dataInicio}}"
                                          class="form-control" min="1900" placeholder="Start year" required>
                                        <label class="traduzir" pt="Ano do ínicio" eng="Start year">Start year</label>
                                      </div>

                                    </div>

                                    <div class="col-md-6">
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" name="sigla" value="{{allTrabalhos.sigla}}"
                                          class="form-control" placeholder="Initials" required>
                                        <label for="alterarSiglaProjetoInvestigacao{{allTrabalhos.id}}" class="traduzir"
                                          pt="Sigla" eng="Inicials">Initials</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" name="financiador" value="{{allTrabalhos.financiador}}"
                                          class="form-control" placeholder="Financier" required>
                                        <label class="traduzir" pt="Financiador" eng="Financier">Financier</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" name="link" value="{{allTrabalhos.link}}"
                                          class="form-control" placeholder="Project Link">
                                        <label for="alterarLinkProjetoInvestigacao{{allTrabalhos.id}}" class="traduzir"
                                          pt="Link do projeto" eng="Project link">Project link</label>
                                      </div>

                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="number" name="dataFim" value="{{allTrabalhos.dataFim}}"
                                          class="form-control" min="1900" placeholder="End year">
                                        <label class="traduzir" pt="Ano do fim" eng="End year">End year</label>
                                      </div>
                                    </div>
                                    <div id="divErroUpdateResearchProject{{allTrabalhos.id}}" style="display: none;">
                                      <p id="mensagemDeErroUpdateResearchProject{{allTrabalhos.id}}"
                                        class="text-center w3-padding responsiveMensagemDeErro" style="color: #dc3545">
                                      </p>
                                    </div>
                                    <div class="col-md-12">
                                      <div class="form-floating">
                                        <textarea class="form-control" name="resumo" style="height: 10em;"
                                          placeholder="Brief summary">{{allTrabalhos.resumo}}</textarea>
                                        <label class="traduzir" pt="Breve resumo do projeto"
                                          eng="Project's brief summary">Project's brief summary</label>
                                      </div>
                                    </div>

                                    <button class="btn btn-lg btn-warning traduzir" pt="Alterar" eng="Update"
                                      ng-if="profile.permissions == 3 && allTrabalhos.versao2 != 't'"
                                      style="position: absolute; bottom: 0.5em; left: 50%; transform: translateX(-125%); margin: 1em;width: 10%;min-width: 6em;">Update</button>
                                    <button class="btn btn-lg btn-warning traduzir" pt="Alterar" eng="Update"
                                      ng-if="allTrabalhos.versao2 != 't' && profile.permissions != 3"
                                      style="position: absolute; bottom: 0.5em; left: 50%; transform: translateX(-65%); margin: 1em;width: 10%;min-width: 6em;">Update</button>
                                  </form>
                                  <button class="btn btn-lg btn-danger traduzir" pt="Eliminar" eng="Delete"
                                    ng-if="profile.permissions == 3 && allTrabalhos.versao2 != 't'"
                                    style="position: absolute; right: 50%; transform: translateX(125%); bottom: 0.5em; margin: 1em;width: 10%;min-width: 6em;"
                                    onclick="eliminarResearchProjetoOpen(this);"
                                    value="{{ allTrabalhos.id }}">Delete</button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                    <div class="col p-4 d-flex flex-column position-static"
                      ng-if="trabalhos.trabalhosDePesquisaForProfessorAtuais.length === 0 && trabalhos.trabalhosDePesquisaForProfessorHistorico.length === 0">
                      <span class="p-4 text-muted traduzir" pt="Professor sem histórico de projetos de pesquisa"
                        eng="Teacher with no history of research projects">Teacher with no history of research
                        projects</span>
                    </div>
                    <div>
                      <button class="btn btn-success traduzir responsiveButtonNovo" pt="Adicionar novo +"
                        eng="Add new +" style="position: absolute;" ng-if="profile.permissions == 3"
                        onclick="callAlterar('createResearchProject', 'changeProfile');">Add new
                        +</button>
                    </div>
                  </div>




                  <!-- PROJETOS FINAIS DE CURSO -->
                  <div id="End-of-course-projects" role="tabpanel" aria-labelledby="End-of-course-projects-tab"
                    class="tab-pane fade  row g-0 border border-top-0 rounded-bottom overflow-hidden flex-md-row shadow-sm h-md-250 position-relative text-light"
                    style="background-color: white;"
                    ng-style="profile.permissions == 3 && trabalhos.trabalhosForProfessor.length != 0 && {'padding-top': '2em'}">
                    <!-- projects of a teacher -->
                    <div class="col p-4 d-flex flex-column position-static"
                      style="padding-left: 2.5em !important; padding-right: 2.5em !important;">
                      <div style="padding-top: 1em;"
                        ng-repeat="allTrabalhos in trabalhos.trabalhosForProfessor track by allTrabalhos.idTrabalho"
                        ng-hide="allTrabalhos.podeAlterar != true && allTrabalhos.versao2 == 't'">
                        <div
                          class="row g-0 border rounded-left overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative text-dark">
                          <div class="col p-4 d-flex flex-column position-relative"
                            ng-style="allTrabalhos.versao2 == 't' && {'background-color': '#ffc107'} || {'background-color': '#f5f5f5'}"
                            style="background-color: #f5f5f5; ">

                            <!-- aceitar ou negar -->
                            <div class="btn-group" ng-if="allTrabalhos.versao2 == 't' && profile.permissions == 3"
                              style="width: 100px;position: absolute;top:1em;right: 1em;">
                              <button class="btn btn-success" onclick="aceitarAlteracaoProjeto(this);"
                                value="{{ allTrabalhos.idTrabalho }}"><i class="fas fa-check"></i></button>
                              <button class="btn btn-danger" onclick="eliminarProjetoOpen(this);"
                                value="{{ allTrabalhos.idTrabalho }}"><i class="fas fa-times"></i></button>
                            </div>


                            <!-- nota do trabalho -->
                            <div ng-if="allTrabalhos.nota != 0 && allTrabalhos.nota != ''"
                              style="position: absolute;bottom:1em;right: 1em;">

                              <div ng-if="allTrabalhos.nota >= 18.00"
                                style="border: 1px solid #DAA520; border-radius: 8px; color: #DAA520; padding: 5px;background-color: white;">
                                <span class="traduzir" pt="Nota: " eng="Note: ">Note: </span>{{allTrabalhos.nota |
                                number
                                : 2 }} V
                              </div>
                              <div ng-if="allTrabalhos.nota >= 10.00 && allTrabalhos.nota < 18.00"
                                style="border: 1px solid #808080; border-radius: 8px; color: #808080; padding: 5px;background-color: white;">
                                <span class="traduzir" pt="Nota: " eng="Note: ">Note: </span>{{allTrabalhos.nota |
                                number
                                : 2 }} V
                              </div>
                              <div ng-if="allTrabalhos.nota < 10.00"
                                style="border: 1px solid #ed2939; border-radius: 8px; color: #ed2939; padding: 5px;background-color: white;">
                                <span class="traduzir" pt="Nota: " eng="Note: ">Note: </span>{{allTrabalhos.nota |
                                number
                                : 2 }} V
                              </div>

                            </div>


                            <strong class="d-inline-block mb-2 text" style="color: black">{{ allTrabalhos.idTrabalho
                              }}</strong>
                            <h3 class="mb-0">{{ allTrabalhos.nome }}</h3>
                            <div class="mb-1 text-muted">{{ allTrabalhos.ano }}</div>
                            <p class="card-text mb-auto" style="white-space: pre-wrap;">{{ allTrabalhos.resumo }}</p>
                            <p><span class="traduzir" pt="Por:" eng="By">By:</span><span
                                ng-repeat="alunoDoGrupo in allTrabalhos.alunos">
                                <!-- se tiver 3 de permissoes -->
                                <a class="removerAlunoDoTrabalho" alunoEmail="{{alunoDoGrupo.email}}"
                                  ng-if="profile.permissions == 3" idTrabalho="{{allTrabalhos.idTrabalho}}"
                                  onclick="removerAlunoDoTrabalho(this);"
                                  ng-click="trabalhos.eliminarAlunoDoTrabalho(allTrabalhos.idTrabalho, alunoDoGrupo.email);">{{
                                  alunoDoGrupo.nome }}.</a>
                                <!-- se não tiver 3 de permissoes -->
                                <span ng-if="profile.permissions != 3">{{
                                  alunoDoGrupo.nome }}.</span>
                              </span>
                              <button class="btn btn-success"
                                style="height: 2em;width: 2em; padding: 0em; border-radius: 50%;"
                                ng-if="profile.permissions == 3"
                                onclick="callAlterar('addAlunoAoTrabalho', 'changeProfile');createIdTrabalhosessionStorage(this);"
                                value="{{ allTrabalhos.idTrabalho }}">+</button>

                              <span ng-if="allTrabalhos.informacao" class="text-muted"><br><br>
                                <span class="traduzir" pt="Informações adicionais: "
                                  eng="Additional information: ">Additional information: </span>
                                {{allTrabalhos.informacao}}
                              </span>
                            </p>
                            <p style="width: 100%;">
                              <span ng-if="allTrabalhos.codigo">
                                <a href="{{allTrabalhos.codigo}}" target="_blank" role="button" class="traduzir"
                                  pt="Ver código" eng="See code">
                                  See code
                                </a>&nbsp;
                              </span>
                              <span ng-if="allTrabalhos.relatorio">
                                <a href="{{allTrabalhos.relatorio}}" target="_blank" role="button" class="traduzir"
                                  pt="Ver relatório" eng="See report">
                                  See report
                                </a>&nbsp;
                              </span>
                              <a data-toggle="collapse" ng-if="allTrabalhos.podeAlterar == true"
                                href="#accordion-{{allTrabalhos.idTrabalho}}" role="button" aria-expanded="false"
                                class="accordionTrabalhos traduzir" pt="Editar" eng="Edit">Edit</a>&nbsp;
                            </p>
                          </div>

                          <div class="col-auto d-none d-lg-block">
                            <img ng-src="{{allTrabalhos.imagem}}"
                              style="border: 1px solid grey;object-fit: cover; height: 100%;" class="bd-placeholder-img"
                              width="200" alt="Project picture">

                          </div>
                          <div class="collapse" id="accordion-{{allTrabalhos.idTrabalho}}"
                            ng-if="allTrabalhos.podeAlterar == true">
                            <div class="card card-body rounded-0" style="background-color: lightgrey;"
                              ng-style="allTrabalhos.versao2 == 't' && {'background-color': '#eead2d'} || {'background-color': 'lightgrey'}">
                              <div class="container col-md-12">
                                <div class="row d-flex justify-content-center" style="padding-bottom: 5em;">
                                  <form
                                    onsubmit="alterarProjeto(this, angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.profileEmail);"
                                    class="row d-flex justify-content-center">
                                    <div class="col-md-6">
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" disabled style="display: none;" name="idTrabalho"
                                          value="{{allTrabalhos.idTrabalho}}">
                                        <input type="text" ng-disabled="allTrabalhos.versao2 == 't'"
                                          value="{{allTrabalhos.nome}}" class="form-control"
                                          id="alterarNomeTrabalho{{allTrabalhos.idTrabalho}}" placeholder="Nome"
                                          name="nome" required>
                                        <label for="alterarNomeTrabalho{{allTrabalhos.idTrabalho}}" class=" traduzir"
                                          pt="Nome" eng="Name">Name</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" ng-disabled="allTrabalhos.versao2 == 't'"
                                          value="{{allTrabalhos.relatorio}}" class="form-control"
                                          id="alterarRelatorioTrabalho{{allTrabalhos.idTrabalho}}" name="relatorio"
                                          placeholder="Relatorio">
                                        <label for="alterarRelatorioTrabalho{{allTrabalhos.idTrabalho}}"
                                          class=" traduzir" pt="Link para o relatório" eng="Report link">Report
                                          link</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input type="text" ng-disabled="allTrabalhos.versao2 == 't'"
                                          value="{{allTrabalhos.informacao}}" name="info" class="form-control"
                                          id="alterarInformacaoTrabalho{{allTrabalhos.idTrabalho}}"
                                          placeholder="Informação">
                                        <label for="alterarInformacaoTrabalho{{allTrabalhos.idTrabalho}}"
                                          class=" traduzir" pt="Informações Extra" eng="Extra information">Extra
                                          information</label>
                                      </div>
                                    </div>

                                    <div class="col-md-6">
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input ng-disabled="allTrabalhos.versao2 == 't'" type="text" name="imagem"
                                          value="{{allTrabalhos.imagem}}" class="form-control"
                                          id="alterarImagemTrabalho{{allTrabalhos.idTrabalho}}" placeholder="Imagem"
                                          required>
                                        <label for="alterarImagemTrabalho{{allTrabalhos.idTrabalho}}" class=" traduzir"
                                          pt="Imagem" eng="Image">Image</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;">
                                        <input ng-disabled="allTrabalhos.versao2 == 't'" type="text" name="codigo"
                                          value="{{allTrabalhos.codigo}}" class="form-control"
                                          id="alterarCodigoTrabalho{{allTrabalhos.idTrabalho}}" placeholder="Codigo">
                                        <label for="alterarCodigoTrabalho{{allTrabalhos.idTrabalho}}" class=" traduzir"
                                          pt="Link para o código" eng="Code link">Code link</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;"
                                        ng-if="profile.permissions == 3">
                                        <input ng-disabled="allTrabalhos.versao2 == 't'" type="number" step="0.01"
                                          max="20" min="0" name="nota" value="{{allTrabalhos.nota}}"
                                          class="form-control" id="alterarNotaTrabalho{{allTrabalhos.idTrabalho}}"
                                          placeholder="Nota">
                                        <label for="alterarInformacaoTrabalho{{allTrabalhos.idTrabalho}}"
                                          class=" traduzir" pt="Nota" eng="Note">Note</label>
                                      </div>
                                      <div class="form-floating" style="margin-bottom:1em;"
                                        ng-if="profile.permissions != 3">
                                        <input type="number" step="0.01" name="istoNaoFazNadaSoMostra"
                                          value="{{allTrabalhos.nota}}" class="form-control"
                                          id="istoNaoFazNadaSoMostra{{allTrabalhos.idTrabalho}}" disabled
                                          placeholder="Nota">
                                        <label for="istoNaoFazNadaSoMostra{{allTrabalhos.idTrabalho}}" class=" traduzir"
                                          pt="Nota" eng="Note">Note</label>
                                      </div>
                                    </div>
                                    <div class="col-md-12">
                                      <div class="form-floating">
                                        <textarea ng-disabled="allTrabalhos.versao2 == 't'" class="form-control"
                                          name="resumo" id="alterarResumo{{allTrabalhos.idTrabalho}}"
                                          style="height: 10em;"
                                          placeholder="Brief summary">{{allTrabalhos.resumo}}</textarea>
                                        <label for="alterarFotoFundoLink" class=" traduzir" pt="Breve resumo do projeto"
                                          eng="Project's brief summary">Project's brief summary</label>
                                      </div>
                                    </div>

                                    <div id="divErroInfoProfile" style="display: none;">
                                      <p id="mensagemDeErroInfoProfile" class="w3-padding responsiveMensagemDeErro"
                                        style="color: #dc3545"></p>
                                    </div>
                                    <button class="btn btn-lg btn-warning traduzir" pt="Alterar" eng="Update"
                                      ng-if="profile.permissions == 3 && allTrabalhos.versao2 != 't'"
                                      style="position: absolute; bottom: 0.5em; left: 50%; transform: translateX(-125%); margin: 1em;width: 10%;min-width: 6em;">Update</button>
                                    <button class="btn btn-lg btn-warning traduzir" pt="Alterar" eng="Update"
                                      ng-if="allTrabalhos.versao2 != 't' && profile.permissions != 3"
                                      style="position: absolute; bottom: 0.5em; left: 50%; transform: translateX(-65%); margin: 1em;width: 10%;min-width: 6em;">Update</button>
                                  </form>
                                  <button class="btn btn-lg btn-danger traduzir" pt="Eliminar" eng="Delete"
                                    ng-if="profile.permissions == 3 && allTrabalhos.versao2 != 't'"
                                    style="position: absolute; right: 50%; transform: translateX(125%); bottom: 0.5em; margin: 1em;width: 10%;min-width: 6em;"
                                    onclick="eliminarProjetoOpen(this);"
                                    value="{{ allTrabalhos.idTrabalho }}">Delete</button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                      </div>
                      <span ng-if="trabalhos.trabalhosForProfessor.length === 0" class="p-4 text-muted traduzir"
                        pt="Professor sem histórico de projetos fim de curso"
                        eng="Teacher with no history of End-of-course projects">Teacher with no
                        history of End-of-course projects</span>
                      <button class="btn btn-success traduzir responsiveButtonNovo" pt="Adicionar novo +"
                        eng="Add new +" style="position: absolute;" ng-if="profile.permissions == 3"
                        onclick="callAlterar('createProject', 'changeProfile');">Add new
                        +</button>
                    </div>
                  </div>
                  <!-- students for a teacher -->
                  <div
                    class="tab-pane fade row g-0 border border-top-0 rounded-bottom overflow-hidden flex-md-row shadow-sm h-md-250 position-relative"
                    ng-style="profile.permissions == 3 && profile.alunos.length != 0 && {'padding-top': '2em'}"
                    style="background-color: white;" id="Students" role="tabpanel" aria-labelledby="Students-tab">
                    <div class="col p-4 d-flex flex-column position-static">
                      <table class="table table-hover" ng-if="profile.alunos.length > 0">
                        <thead>
                          <tr>
                            <th scope="col">#</th>
                            <th scope="col" class=" traduzir" pt="Nome" eng="Name">Name</th>
                            <!-- <th scope="col">Email</th> -->
                            <th scope="col" ng-if="profile.permissions == 3" class="actionTd traduzir" pt="Ação"
                              eng="Action">
                              Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="aluno in profile.alunos">
                            <th scope="row">{{ aluno.numero }}</th>
                            <td>{{ aluno.nome }}</td>
                            <!-- <td>{{ aluno.email }}</td> -->
                            <td ng-if="profile.permissions == 3" class="actionTd"><button
                                class="btn btn-sm btn-warning traduzir actionButtons" pt="Alterar" eng="Update"
                                alunoEmail="{{ aluno.email }}"
                                onclick="updateStudentFromThisTeacher(this);">Update</button>
                              <button class="btn btn-sm btn-danger traduzir actionButtons" pt="Eliminar" eng="Delete"
                                value="{{ aluno.email }}" onclick="confirmRemoverStudentOpen(this);">Delete</button>
                            </td>
                          </tr>
                        </tbody>

                      </table>
                      <span ng-if="profile.alunos.length === 0" class="p-4 text-muted traduzir"
                        pt="Professor sem histórico de alunos" eng="Teacher with no history of students">Teacher with no
                        history of
                        students</span>

                      <button class="btn btn-success traduzir responsiveButtonNovo" pt="Adicionar novo +"
                        eng="Add new +" style="position: absolute;" ng-if="profile.permissions == 3"
                        onclick="callAlterar('addAlunoAoProfessor', 'changeProfile');">Add
                        new +</button>
                    </div>
                  </div>
                  <!-- ORIENTACAO -->
                  <div
                    class="show tab-pane fade row g-0 border border-top-0 rounded-bottom overflow-hidden flex-md-row shadow-sm h-md-250 position-relative"
                    style="background-color: white;" id="Orientation" role="tabpanel" aria-labelledby="Orientation-tab">
                    <div class="col-md-12 p-5 d-flex flex-column position-static">
                      <div ng-if="profile.orientacoesAtuais.length > 0">
                        <h3 class="display-6 traduzir semiTitles" pt="Atualmente orientando:"
                          eng="Currently orienting: ">
                          Currently orienting: </h3>
                        <hr>
                        <div class="row " ng-repeat="instituicao in profile.orientacoesAtuais">
                          <h4 class="display-6 semiBigTitles" style="padding-top: 1em;"
                            ng-style="$first && {'padding-top': '0.2em'}">{{ instituicao.Sigla }} - {{
                            instituicao.nome }}</h4>
                          <div class="col-md-6" ng-if="instituicao.mestre"
                            ng-class="{'col-md-12':instituicao.doutor == false}">
                            <h5 style="padding-top: 0.5em;" class="display-6 semiBigFont traduzir" pt="Mestrado"
                              eng="Master's degree">Master's degree</h5>
                            <table class="table table-hover">
                              <thead>
                                <tr>
                                  <th scope="col" class=" traduzir" pt="Nome" eng="Name">Name</th>
                                  <th scope="col" class=" traduzir" pt="Ano de início" eng="Start year">Start year</th>
                                  <th scope="col" ng-if="profile.permissions == 3" class="actionTd traduzir" pt="Ação"
                                    eng="Action">Action</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr id="orientacoesMostrarTR{{orientacoes.id}}"
                                  student="{{orientacoes.alunoNome}} - {{orientacoes.alunoEmail}} - {{orientacoes.alunoNumero}}"
                                  title="Master's degree" dataInicio="{{orientacoes.dataInicio}}"
                                  dataFim="at the moment" institution="{{instituicao.Sigla}} - {{instituicao.nome}}"
                                  nomeCurso="{{orientacoes.nomeCurso}}" tema="{{orientacoes.tema}}"
                                  relatorio="{{orientacoes.relatorio}}" link="{{orientacoes.link}}"
                                  ng-repeat="orientacoes in instituicao.Orientacoes" ng-if="orientacoes.titulo == 't'">
                                  <td scope="row" style='cursor: pointer;' orientacoesId="{{orientacoes.id}}"
                                    onclick="openInfoOrientacoes(this);">{{ orientacoes.alunoNome }}</td>
                                  <td scope="row" style='cursor: pointer;' orientacoesId="{{orientacoes.id}}"
                                    onclick="openInfoOrientacoes(this);">{{ orientacoes.dataInicio }}</td>
                                  <td ng-if="profile.permissions == 3" class="actionTd">
                                    <button idOrientacao="{{ orientacoes.id }}"
                                      class="actionButtons btn btn-sm btn-warning traduzir" pt="Alterar" eng="Update"
                                      nameAluno="{{orientacoes.alunoNome}}" numeroAluno="{{orientacoes.alunoNumero}}"
                                      onclick='alterarOrientacaoOpen(this);'>Update</button>
                                    <button idOrientacao="{{ orientacoes.id }}"
                                      class="actionButtons btn btn-sm btn-danger traduzir" pt="Remover" eng="Remove"
                                      onclick='confirmRemoverOrientationOpen(this);'>Remove</button>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                          <div class=" col-md-6" ng-if="instituicao.doutor"
                            ng-class="{'col-md-12':instituicao.mestre == false}">
                            <h5 style="padding-top: 0.5em;" class="display-6 traduzir semiBigFont" pt="Doutoramento"
                              eng="Doctorate's degree">Doctorate's degree
                            </h5>
                            <table class="table table-hover">
                              <thead>
                                <tr>
                                  <th scope="col" class=" traduzir" pt="Nome" eng="Name">Name</th>
                                  <th scope="col" class=" traduzir" pt="Ano de início" eng="Start year">Start year</th>
                                  <th scope="col" ng-if="profile.permissions == 3" class="actionTd traduzir" pt="Ação"
                                    eng="Action">Action</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr id="orientacoesMostrarTR{{orientacoes.id}}"
                                  student="{{orientacoes.alunoNome}} - {{orientacoes.alunoEmail}} - {{orientacoes.alunoNumero}}"
                                  title="Doctorate's degree" dataInicio="{{orientacoes.dataInicio}}"
                                  nomeCurso="{{orientacoes.nomeCurso}}" tema="{{orientacoes.tema}}"
                                  relatorio="{{orientacoes.relatorio}}" link="{{orientacoes.link}}"
                                  dataFim="at the moment" institution="{{instituicao.Sigla}} - {{instituicao.nome}}"
                                  ng-repeat="orientacoes in instituicao.Orientacoes" ng-if="orientacoes.titulo == 'f'">
                                  <td scope="row" style='cursor: pointer;' orientacoesId="{{orientacoes.id}}"
                                    onclick="openInfoOrientacoes(this);">{{ orientacoes.alunoNome }}</td>
                                  <td scope="row" style='cursor: pointer;' orientacoesId="{{orientacoes.id}}"
                                    onclick="openInfoOrientacoes(this);">{{ orientacoes.dataInicio }}</td>
                                  <td ng-if="profile.permissions == 3" class="actionTd">
                                    <button idOrientacao="{{ orientacoes.id }}"
                                      class="actionButtons btn btn-sm btn-warning traduzir" pt="Alterar" eng="Update"
                                      nameAluno="{{orientacoes.alunoNome}}" numeroAluno="{{orientacoes.alunoNumero}}"
                                      onclick='alterarOrientacaoOpen(this);'>Update</button>
                                    <button idOrientacao="{{ orientacoes.id }}"
                                      class="actionButtons btn btn-sm btn-danger traduzir" pt="Remover" eng="Remove"
                                      onclick='confirmRemoverOrientationOpen(this);'>Remove</button>
                                  </td>
                                </tr>
                              </tbody>
                            </table>

                          </div>
                        </div>
                      </div>
                      <h3 style="padding-top: 3em;" class="display-6 traduzir semiTitles" pt="Orientações completadas: "
                        eng="Completed orientations: "
                        ng-if="profile.orientacoesAtuais.length > 0 && profile.orientacoesHistorico.length > 0">
                        Completed
                        orientations:

                      </h3>
                      <hr ng-if="profile.orientacoesAtuais.length > 0 && profile.orientacoesHistorico.length > 0">
                      <h3 ng-if="profile.orientacoesAtuais.length === 0 && profile.orientacoesHistorico.length > 0"
                        class="display-6 traduzir semiTitles" pt="Orientações completadas: "
                        eng="Completed orientations: ">Previous orientations

                      </h3>
                      <hr ng-if="profile.orientacoesAtuais.length === 0 && profile.orientacoesHistorico.length > 0">
                      <span ng-if="profile.orientacoesAtuais.length === 0 && profile.orientacoesHistorico.length === 0"
                        class="text-muted traduzir" pt="Professor sem histórico de alunos orientados "
                        eng="Teacher with no history of student orientations">Teacher with no history of student
                        orientations</span>
                      <div ng-if="profile.orientacoesHistorico.length > 0">
                        <div class="row" ng-repeat="instituicao in profile.orientacoesHistorico">
                          <h4 style="padding-top: 1em;" class="display-6 semiBigTitles"
                            ng-style="$first && {'padding-top': '0.2em'}">{{ instituicao.Sigla
                            }} - {{ instituicao.nome }}</h4>

                          <div class="col-md-6" ng-if="instituicao.mestre"
                            ng-class="{'col-md-12':instituicao.doutor == false}">
                            <h5 style="padding-top: 0.5em;" class="display-6 semiBigFont traduzir" pt="Mestrado"
                              eng="Master's degree">Master's degree</h5>
                            <table class="table table-hover">
                              <thead>
                                <tr>
                                  <th scope="col" class=" traduzir" pt="Nome" eng="Name">Name</th>
                                  <th scope="col" class=" traduzir" pt="Ano de início " eng="Start year ">Start year
                                  </th>
                                  <th scope="col" class=" traduzir" pt="Ano do fim" eng="End year ">End year</th>
                                  <th scope="col" ng-if="profile.permissions == 3" class="actionTd traduzir" pt="Ação"
                                    eng="Action">Action</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr id="orientacoesMostrarTR{{orientacoes.id}}"
                                  student="{{orientacoes.alunoNome}} - {{orientacoes.alunoEmail}} - {{orientacoes.alunoNumero}}"
                                  title="Master's degree" dataInicio="{{orientacoes.dataInicio}}"
                                  nomeCurso="{{orientacoes.nomeCurso}}" tema="{{orientacoes.tema}}"
                                  relatorio="{{orientacoes.relatorio}}" link="{{orientacoes.link}}"
                                  dataFim="{{orientacoes.dataFim}}"
                                  institution="{{instituicao.Sigla}} - {{instituicao.nome}}"
                                  ng-repeat="orientacoes in instituicao.Orientacoes" ng-if="orientacoes.titulo == 't'">
                                  <td scope="row" style='cursor: pointer;' orientacoesId="{{orientacoes.id}}"
                                    onclick="openInfoOrientacoes(this);">{{ orientacoes.alunoNome }}</td>
                                  <td scope="row" style='cursor: pointer;' orientacoesId="{{orientacoes.id}}"
                                    onclick="openInfoOrientacoes(this);">{{ orientacoes.dataInicio }}</td>
                                  <td scope="row" style='cursor: pointer;' orientacoesId="{{orientacoes.id}}"
                                    onclick="openInfoOrientacoes(this);">{{ orientacoes.dataFim }}</td>
                                  <td ng-if="profile.permissions == 3" class="actionTd">
                                    <button idOrientacao="{{ orientacoes.id }}"
                                      class="actionButtons btn btn-sm btn-warning traduzir" pt="Alterar" eng="Update"
                                      nameAluno="{{orientacoes.alunoNome}}" numeroAluno="{{orientacoes.alunoNumero}}"
                                      onclick='alterarOrientacaoOpen(this);'>Update</button>
                                    <button idOrientacao="{{ orientacoes.id }}"
                                      class="actionButtons btn btn-sm btn-danger traduzir" pt="Remover" eng="Remove"
                                      onclick="confirmRemoverOrientationOpen(this);">Remove</button>
                                  </td>
                                </tr>
                              </tbody>
                            </table>

                          </div>


                          <div class="col-md-6" ng-if="instituicao.doutor"
                            ng-class="{'col-md-12':instituicao.mestre == false}">
                            <h5 style="padding-top: 0.5em;" class="display-6 traduzir semiBigFont" pt="Doutoramento"
                              eng="Doctorate's degree">Doctorate's degree</h5>
                            <table class="table table-hover">
                              <thead>
                                <tr>
                                  <th scope="col" class=" traduzir" pt="Nome" eng="Name">Name</th>
                                  <th scope="col" class=" traduzir" pt="Ano de início" eng="Start year">Start year</th>
                                  <th scope="col" class=" traduzir" pt="Ano do fim" eng="End year">End year</th>
                                  <th scope="col" ng-if="profile.permissions == 3" class="actionTd traduzir" pt="Ação"
                                    eng="Action">Action</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr id="orientacoesMostrarTR{{orientacoes.id}}"
                                  student="{{orientacoes.alunoNome}} - {{orientacoes.alunoEmail}} - {{orientacoes.alunoNumero}}"
                                  title="Doctorate's degree" dataInicio="{{orientacoes.dataInicio}}"
                                  nomeCurso="{{orientacoes.nomeCurso}}" tema="{{orientacoes.tema}}"
                                  relatorio="{{orientacoes.relatorio}}" link="{{orientacoes.link}}"
                                  dataFim="{{orientacoes.dataFim}}"
                                  institution="{{instituicao.Sigla}} - {{instituicao.nome}}"
                                  ng-repeat="orientacoes in instituicao.Orientacoes" ng-if="orientacoes.titulo == 'f'">
                                  <td scope="row" style='cursor: pointer;' orientacoesId="{{orientacoes.id}}"
                                    onclick="openInfoOrientacoes(this);">{{ orientacoes.alunoNome }}</td>
                                  <td scope="row" style='cursor: pointer;' orientacoesId="{{orientacoes.id}}"
                                    onclick="openInfoOrientacoes(this);">{{ orientacoes.dataInicio }}</td>
                                  <td scope="row" style='cursor: pointer;' orientacoesId="{{orientacoes.id}}"
                                    onclick="openInfoOrientacoes(this);">{{ orientacoes.dataFim }}</td>
                                  <td ng-if="profile.permissions == 3" class="actionTd">
                                    <button idOrientacao="{{ orientacoes.id }}"
                                      class="actionButtons btn btn-sm btn-warning traduzir" pt="Alterar" eng="Update"
                                      nameAluno="{{orientacoes.alunoNome}}" numeroAluno="{{orientacoes.alunoNumero}}"
                                      onclick='alterarOrientacaoOpen(this);'>Update</button>
                                    <button idOrientacao="{{ orientacoes.id }}"
                                      class="actionButtons btn btn-sm btn-danger traduzir" pt="Remover" eng="Remove"
                                      onclick='confirmRemoverOrientationOpen(this);'>Remove</button>
                                  </td>
                                </tr>
                              </tbody>
                            </table>

                          </div>
                        </div>
                      </div>

                      <button class="btn btn-success traduzir responsiveButtonNovo" pt="Adicionar novo +"
                        eng="Add new +" style="position: absolute;" ng-if="profile.permissions == 3"
                        onclick="callAlterar('addOrientacaoAoProfessor', 'changeProfile');">Add
                        new +</button>
                    </div>

                  </div>
                </div>
              </div>
              <div ng-if="profile.existe == false" class="d-flex justify-content-center">
                <div>
                  <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%)"
                    class="alert alert-danger traduzir" pt="Não existe nenhum professor com este email!"
                    eng="There is no teacher with this email!" role="alert">
                    There is no teacher with this email!
                  </div>
                </div>
              </div>
            </div>
          </div>
          &nbsp;
        </div>

      </div>


      <footer class="bg-dark text-white w-100" style="position: fixed;bottom: 0em;height: 2em;padding: 2rem;">
        <p class="float-end"><a href="#"><i class="arrow up" style="zoom: 150%;"></i></a></p>
        <p class="text-center responsiveVerySmalText">&copy; 2021 E&#8209;Teacher, Inc. &middot; <span class=" traduzir"
            pt="Por" eng="By">by</span>: Daniel Ventura, Gonçalo Dinis <span class="traduzir" pt="e"
            eng="and">and</span>
          Rodrigo
          Gomes
          &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
      </footer>


      <!-- bootstrap -->
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>


      <!-- angular -->
      <script src="./js/angular.min.js"></script>
      <script src="./js/angular-ui-router.min.js"></script>
      <script src="./js/app.js"></script>
      <script>


        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const yearMin = 1900;

        addOrientacaoAoProfessorStartYear.max = new Date().getFullYear();
        addOrientacaoAoProfessorStartYear.min = yearMin;
        addOrientacaoAoProfessorEndYear.max = new Date().getFullYear();
        addOrientacaoAoProfessorEndYear.min = yearMin;

        changeOrientacaoAoProfessorStartYear.max = new Date().getFullYear();
        changeOrientacaoAoProfessorStartYear.min = yearMin;
        changeOrientacaoAoProfessorEndYear.max = new Date().getFullYear();
        changeOrientacaoAoProfessorEndYear.min = yearMin;

        createResearchProjectLinkDataInicio.max = new Date().getFullYear();
        createResearchProjectLinkDataInicio.min = yearMin;
        createResearchProjectLinkDataFim.max = new Date().getFullYear();
        createResearchProjectLinkDataFim.min = yearMin;

        alterarExpLink.max = new Date().getFullYear();
        alterarExpLink.min = yearMin;

        let mandadoParaCima = false;


        function setQueryStringParameter(name, value) {
          urlParams.set(name, value);
          window.history.replaceState({}, "", decodeURIComponent(`${window.location.pathname}?${urlParams}`));
        }

        function deleteQueryStringParameter(name) {
          urlParams.delete(name);
          window.history.replaceState({}, "", decodeURIComponent(`${window.location.pathname}?${urlParams}`));
        }

        function openNotification(textoPt, textoEng) {
          let texto = "";
          if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
            texto = textoPt;
          } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
            texto = textoEng;
          }
          let x = document.getElementById("notification");
          document.getElementById("notificationText").innerText = texto;
          x.className = "show";
          setTimeout(function () { x.className = x.className.replace("show", ""); }, 2999);
        }

        const urlBase = window.location.origin;

        verificarLogin();
        verificarContaCriadaAgora();


        function openLink(linkToOpen, className) {
          let i;
          const x = document.getElementsByClassName(className);
          for (i = 0; i < x.length; i++) {
            x[i].style.display = "none";
          }
          document.getElementById(linkToOpen).style.display = "block";
        }

        function openNavBar(navToOpen, className) {
          let i;
          const x = document.getElementsByClassName(className);
          for (i = 0; i < x.length; i++) {
            x[i].classList.remove("active");
          }
          document.getElementById(navToOpen).classList.add("active");
        }


        function updateNavBar(aux) {
          const navLink = document.getElementsByClassName('navBarETeacher');
          let i = 0;
          const callPage = sessionStorage.getItem("E-Teacher Page");
          while (navLink[i] !== undefined) {
            navLink[i].classList.remove("active");
            i = i + 1;
          }
          if (aux === "in") {
            document.getElementById("callLogin").classList.add("active");
          } else if (aux === "out") {
            document.getElementById(callPage).classList.add("active");
          }

        }

        async function callPerfil() {
          //chamar a função verificar login
          await verificarLogin();
          angular.element(document.querySelector('html')).scope().profile.viewMyProfile();
          angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.closeSearch();
          sessionStorage.setItem("E-Teacher Page", "callPerfil");
          openLink("profilePage", "mainPage");
          openNavBar("callAccount", "navBarETeacher");
          document.getElementById("loginNavBar").style.display = "none";
          document.body.style.backgroundColor = "#f5f5f5";
          //window.location.href = window.location.origin;

        }



        async function callChangePassword() {
          //chamar a função verificar login
          sessionStorage.setItem("E-Teacher Page", "callChangePassword");
          openLink("changePasswordPage", "mainPage");
          document.getElementById("createPasswordEmailUser").value = sessionStorage.getItem('E-Teacher User Email');
          openNavBar("callAccount", "navBarETeacher");
          document.getElementById("loginNavBar").style.display = "none";
          document.body.style.backgroundColor = "#f5f5f5";
        }

        function callViewMyTeachers() {
          deleteQueryStringParameter("searchUserProfile");
          sessionStorage.setItem("E-Teacher Page", "callViewMyTeachers");
          openLink("viewMyTeachersPage", "mainPage");
          openNavBar("callAccount", "navBarETeacher");
          document.getElementById("loginNavBar").style.display = "none";
          document.body.style.backgroundColor = "#f5f5f5";
        }

        function callSearch() {
          if (sessionStorage.getItem('E-Teacher User Token') === null) {
            document.getElementById("loginNavBar").style.display = "block";
          }
          sessionStorage.setItem("E-Teacher Page", "callSearch");
          openLink("searchPage", "mainPage");
          openNavBar("callSearch", "navBarETeacher");
          document.body.style.backgroundColor = "#f5f5f5";
        }


        function callCriarPalavraPasseAluno() {
          sessionStorage.setItem("E-Teacher Page", "criarPalavraPasseAluno");
          openLink("criarPalavraPasseAlunoPage", "mainPage");
          document.getElementById("loginNavBar").style.display = "none";
          document.getElementById("searchNavBar").style.display = "none";
          document.getElementById("accountNavBar").style.display = "none";
          document.body.style.backgroundColor = "#f5f5f5";
        }

        function focusSearch() {
          if (sessionStorage.getItem('E-Teacher User Token') === null) {
            document.getElementById("loginNavBar").style.display = "block";
          }
          document.getElementById("indexPage").style.display = "none";
          document.getElementById("profilePage").style.display = "none";
        }


        //login, signin and logout
        function callLogin() {
          document.getElementById('loginOrSignin').style.display = 'block';
          openLink('login', 'loginOrSignin');
          updateNavBar("in");
        }


        function callSignin() {
          document.getElementById('loginOrSignin').style.display = 'block';
          openLink('signin', 'loginOrSignin');
          updateNavBar("in");
        }



        function callVerification(index) {
          if (index) {
            openLink("verificationAccountIndex", 'loginOrSigninIndex');
          } else {
            document.getElementById('loginOrSignin').style.display = 'block';
            openLink("verificationAccount", 'loginOrSignin');
          }

        }

        async function registar(emailField, nameField, studentNumberField, passwordField, configmPasswordField, index) {
          const email = document.getElementById(emailField);
          const nome = document.getElementById(nameField);
          const password = document.getElementById(passwordField);
          const passwordConfirm = document.getElementById(configmPasswordField);
          let check = true;
          let user = "professores";
          let studentNumber = 1;

          let divErro = "", mensagemErro = "";
          if (index) {
            divErro = "divErroSigninIndex";
            mensagemErro = "mensagemDeErroSigninIndex";

          } else {
            divErro = "divErroSignin";
            mensagemErro = "mensagemDeErroSignin";
          }
          if (password.value === passwordConfirm.value) {
            //continuar com o processo de registar
            let body;

            //verificar se não existe um email registado
            let tipo = await angular.element(document.querySelector('controllerUsers')).scope().searchUsers.verificarTipoDeConta(email.value);
            if (tipo == "false") {
              body = JSON.stringify({ email: email.value, nome: nome.value, password: password.value, user });
              return fetch(`${urlBase}/registarUser`, {
                headers: {
                  "Content-Type": "application/json",
                },
                method: "POST",
                body: body,
              }).then((response) => {
                if (response.status === 409) {
                  email.style.borderColor = "#dc3545";
                  document.getElementById(divErro).style.display = "block";
                  if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                    document.getElementById(mensagemErro).innerText = "Email já associado!";
                  } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                    document.getElementById(mensagemErro).innerText = "Email already associated!";
                  }

                }
                if (!response.ok) {
                  throw new Error(response.statusText);
                }
                return response.json();
              }).then((response) => {
                criarConta(email.value, user, index);
              });
            } else {
              email.style.borderColor = "#dc3545";
              document.getElementById(divErro).style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById(mensagemErro).innerText = "Email já registado no E-Teacher!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById(mensagemErro).innerText = "Email already registered on E-Teacher!";
              }
            }
          } else {

            //mostrar mensagem de erro a dizer que as passwords precisam ser iguais
            password.style.borderColor = "#dc3545";
            passwordConfirm.style.borderColor = "#dc3545";
            document.getElementById(divErro).style.display = "block";
            if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
              document.getElementById(mensagemErro).innerText = "Palavras-passe diferentes!";
            } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
              document.getElementById(mensagemErro).innerText = "Different passwords!";
            }

          }

        }

        async function login(emailField, passwordField, navTabTeacher, navTabStudent, index, navTabAdmin) {
          const email = document.getElementById(emailField);
          const password = document.getElementById(passwordField);
          const teacher = document.getElementById(navTabTeacher);
          const student = document.getElementById(navTabStudent);
          const admin = document.getElementById(navTabAdmin);
          let user = "professores";
          if (student.classList.contains('active')) {
            user = "alunos";
          } else if (admin.classList.contains('active')) {
            user = "admin";
          }
          let divErro = "", mensagemErro = "";
          if (index) {
            divErro = "divErroLoginIndex";
            mensagemErro = "mensagemDeErroLoginIndex";

          } else {
            divErro = "divErroLogin";
            mensagemErro = "mensagemDeErroLogin";
          }
          let body = JSON.stringify({ email: email.value, password: password.value, user });
          return fetch(`${urlBase}/loginUser`, {
            headers: {
              "Content-Type": "application/json",
            },
            method: "POST",
            body: body,
          }).then((response) => {
            if (response.status === 401) {
              password.style.borderColor = "#dc3545";
              document.getElementById(divErro).style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById(mensagemErro).innerText = "Palavra-passe incorreta!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById(mensagemErro).innerText = "Wrong password!";
              }
              let erro = "erro";
              return erro;
            } else if (response.status === 404) {
              email.style.borderColor = "#dc3545";
              document.getElementById(divErro).style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById(mensagemErro).innerText = "Email inexistente!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById(mensagemErro).innerText = "Email does not exist!";
              }
              let erro = "erro";
              return erro;
            }
            if (!response.ok) {
              return 0;
            }

            return response.json();
          }).then((response) => {
            if (response != "erro") {
              const token = response.token;
              const hashedToken = response.hashedToken;
              const tipo = response.tipo;
              sessionStorage.setItem('E-Teacher User Token', token);
              sessionStorage.setItem('E-Teacher User hashedToken', hashedToken);
              sessionStorage.setItem('E-Teacher User Email', email.value);
              sessionStorage.setItem('E-Teacher User Tipo', tipo);
              if (tipo === "professores")
                window.location.href = window.location.origin + "?searchUserProfile=" + email.value;
              else if (tipo !== "admin")
                window.location.href = window.location.origin;
              else
                window.location.href = window.location.origin + "/admin.html";
            }
          });
        }

        async function timeout(ms) {
          return new Promise(resolve => setTimeout(resolve, ms));
        }

        function verificarContaCriadaAgora() {
          const contaCriada = urlParams.get('contaCriada');
          const studentEmail = urlParams.get('studentEmail');
          const alterarPassword = urlParams.get('alterarPassword');
          const password = urlParams.get('password');
          const passwordAlterada = urlParams.get('passwordAlterada');
          const searchUserProfile = urlParams.get('searchUserProfile');
          const tokenExpired = urlParams.get('tokenExpired');
          const callChangePassword = urlParams.get('callChangePassword');
          if (sessionStorage.getItem("E-Teacher Idioma") === null) {
            sessionStorage.setItem("E-Teacher Idioma", "pt");
          } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
            openNavBar('escolherEn', 'escolherLingua');
          }

          if (contaCriada)
            openNotification("Conta ativada com sucesso!", "Account successfuly activated!");
          if (alterarPassword) {
            document.getElementById("indexPage").style.display = "none";
            document.getElementById("createPasswordEmail").value = studentEmail;
            document.getElementById("createPasswordOldPassword").value = password;
            callCriarPalavraPasseAluno();
          }
          if (passwordAlterada) {
            document.getElementById("nav-Student-tab-login-index").click();
            openNotification("Palavra-passe alterada com sucessso!", "Password successfully changed!");
          }
          if (searchUserProfile) {
            irParaProfile(searchUserProfile);
            if (sessionStorage.getItem("E-Teacher User Tipo") == "alunos") {
              document.getElementById("profilePage").style.display = "block";
              document.getElementById("viewMyTeachersPage").style.display = "none";
              openNavBar("callSearch", "navBarETeacher");
            } else if (searchUserProfile == sessionStorage.getItem("E-Teacher User Email")) {
              openNavBar("callAccount", "navBarETeacher");
            } else if (searchUserProfile != sessionStorage.getItem("E-Teacher User Email")) {
              openNavBar("callSearch", "navBarETeacher");
            }
          } else {
            if (sessionStorage.getItem("E-Teacher User Tipo") == "alunos") {
              document.getElementById("profilePage").style.display = "none";
              document.getElementById("viewMyTeachersPage").style.display = "block";
              openNavBar("callAccount", "navBarETeacher");
            }
          }
          if (tokenExpired) {
            openNotification("Token expirado!", "Token Expired!");
          }
          if (callChangePassword) {
            const emailRecebido = urlParams.get('email');
            const encriptedPassword = urlParams.get('encriptedPassword');
            openLink("resetPasswordPage", "mainPage");
            document.getElementById("resetPasswordEmailUser").value = emailRecebido;
            document.getElementById("resetPasswordOldPasswordUser").value = encriptedPassword;
            openNotification("Por favor, digite a sua nova palavra-passe", "Please, enter your new password");
          }
        }


        async function irParaProfile(searchUserProfile) {
          while (angular.element(document.querySelector('html')).scope() === undefined) {
            await timeout(1);
          }
          searchProfessor();
          if ((sessionStorage.getItem("E-Teacher User Email") === undefined) || (sessionStorage.getItem("E-Teacher User Email") !== searchUserProfile)) {
            angular.element(document.querySelector('html')).scope().profile.searchProfile(searchUserProfile);
            angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.trabalhosSearch(searchUserProfile);
            document.getElementById("loginNavBar").style.display = "block";
          }
        }


        async function fetchToken() {
          const token = sessionStorage.getItem('E-Teacher User Token');
          const hashedToken = sessionStorage.getItem('E-Teacher User hashedToken');
          const body = JSON.stringify({ token: token, hashedToken: hashedToken });
          const responseAwait = await fetch(`${urlBase}/decodeJwt`, {
            headers: {
              "Content-Type": "application/json",
            },
            method: "POST",
            body: body
          });
          const response = await responseAwait.json();
          return response;
        }

        async function verificarLogin() {
          if (sessionStorage.getItem('E-Teacher User Token') !== null) {
            await fetchToken().then((response) => {
              const tipo = response.tipo;
              if (response.message === "Token expired!") {
                // token expirou, dá logout
                const tokenExpirou = true;
                logout(tokenExpirou);
                return;
              }
              let tipoConta;
              // esta autenticado
              if (tipo === "professor") {
                tipoConta = "professores";
              } else if (tipo === "aluno") {
                tipoConta = "alunos";
              } else if (tipo === "admin") {
                window.location.href = window.location.origin + "/admin.html";
              }
              const email = response.email;
              sessionStorage.setItem('E-Teacher User Email', email);
              sessionStorage.setItem('E-Teacher User Tipo', tipoConta);
              document.getElementById("callAccount").style.display = "block";
              document.getElementById("loginNavBar").style.display = "none";
              if (tipo === "professor") {
                document.getElementById("profilePage").style.display = "block";
                document.getElementById("viewMyTeachersPage").style.display = "none";
              }
            });

          } else {
            // não está autenticado
            document.getElementById("indexPage").style.display = "block";
            document.getElementById("callAccount").style.display = "none";
            document.getElementById("profilePage").style.display = "none";

          }

        }


        async function criarConta(email, user, index, password) {
          let body = null;
          if (password !== undefined) {
            body = JSON.stringify({ email, user, password, urlBase });
          } else {
            body = JSON.stringify({ email, user, urlBase });
          }
          const resposta = await enviarEmail(body);
          if (resposta == true) {
            if (index !== 'nada') {
              callVerification(index);
            }
            openNotification("Conta criada com sucesso!", "Account successfully created!");
          } else {
            if (index !== 'nada') {
              if (index) {
                divErro = "divErroSigninIndex";
                mensagemErro = "mensagemDeErroSigninIndex";

              } else {
                divErro = "divErroSignin";
                mensagemErro = "mensagemDeErroSignin";
              }
              document.getElementById(divErro).style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById(mensagemErro).innerText = "Houve um erro na criação da conta, tente mais tarde!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById(mensagemErro).innerText = "There was an error creating the account, try again later!";
              }
            }
          }
        }

        function leaveLoginOrSignin() {
          document.getElementById('loginOrSignin').style.display = 'none';
          updateNavBar("out");
        }

        function logout(tokenExpirou) {
          sessionStorage.removeItem('E-Teacher User Token');
          sessionStorage.removeItem('E-Teacher User hashedToken');
          sessionStorage.removeItem('E-Teacher User Email');
          sessionStorage.removeItem('E-Teacher User Tipo');
          sessionStorage.removeItem('E-Teacher User Page');
          sessionStorage.removeItem('E-Teacher Idioma');
          if (tokenExpirou === undefined) {
            window.location.href = window.location.origin;
          } else {
            window.location.href = window.location.origin + "?tokenExpired=true";
          }

        }

        // others
        function openSearch() {
          document.getElementById("searchContent").style.display = "block";
          document.getElementById("searchBar").style.width = "30%";
          document.getElementById("searchButton").style.display = "block";
        }

        function closeSearch() {
          document.getElementById("homeContent").style.display = "block";
          document.getElementById("searchContent").style.display = "none";
          document.getElementById("searchBar").style.width = "20%";
          document.getElementById("searchButton").style.display = "none";
        }


        async function enviarEmail(body) {
          return fetch(`${urlBase}/confirmacaoDeContaEmail`, {
            headers: {
              "Content-Type": "application/json",
            },
            method: "POST",
            body: body,
          }).then((response) => {
            return response.json();
          }).then((response) => {
            return response;
          });
        }


        // profile
        function fotoZoom(tipo) {
          const modal = document.getElementById("fotoZoom");
          const modalImg = document.getElementById("fotoZoomed");
          const captionText = document.getElementById("caption-fotoZoom");
          if (tipo == "perfil") {
            // alteracoes para a foto de perfil
            modalImg.src = document.getElementById("fotoPerfilOriginal").src;
            captionText.innerText = document.getElementById("fotoPerfilOriginal").alt;
          } else {
            // alteracoes para a foto de fundo
            modalImg.src = document.getElementById("fotoFundoOriginal").src;
            captionText.innerText = document.getElementById("fotoFundoOriginal").alt;
          }
          modal.style.display = "block";
        }

        async function alterarConta(chave, valor, email) {
          const obj = {};
          obj[chave] = valor;
          obj["email"] = email;
          const body = JSON.stringify(obj);
          return fetch(`${urlBase}/alterarConta`, {
            headers: {
              "Content-Type": "application/json",
            },
            method: "POST",
            body: body,
          }).then((response) => {
          });
        }

        function alterarFotoPerfil(ondeE) {
          const chave = "fotoPerfil";
          const valor = document.getElementById("alterarFotoPerfilLink").value;
          const email = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          angular.element(document.querySelector('html')).scope().profile.MudarFoto(ondeE, valor);
          alterarConta(chave, valor, email);
          document.getElementById("closeAlterarPerfil").click();
          profileUpdated();
        }

        function alterarFotoFundo(ondeE) {
          const chave = "fotoFundo";
          const valor = document.getElementById("alterarFotoFundoLink").value;
          const email = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          angular.element(document.querySelector('html')).scope().profile.MudarFoto(ondeE, valor);
          alterarConta(chave, valor, email);
          document.getElementById("closeAlterarPerfil").click();
          profileUpdated();
        }

        function alterarInfoProfile() {
          const email = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const nome = document.getElementById("alterarNomeLink").value;
          let exp = document.getElementById("alterarExpLink").value;
          if (exp === "") {
            exp = 0;
          }
          const idArea = document.getElementById("alterarIdAreaLink").value;
          const resumo = document.getElementById("alterarResumoLink").value;
          const resultado = new Date().getFullYear() - exp;
          const expInput = document.getElementById("alterarExpLink");
          expInput.style.borderColor = "#ced4da";
          document.getElementById("divErroInfoProfile").style.display = "none";
          document.getElementById("mensagemDeErroInfoProfile").innerText = "";
          const body = JSON.stringify({ email, nome, exp, idArea, resumo });
          return fetch(`${urlBase}/alterarConta`, {
            headers: {
              "Content-Type": "application/json",
            },
            method: "POST",
            body: body,
          }).then((response) => {
            angular.element(document.querySelector('html')).scope().profile.MudarPerfil(nome, exp, idArea, resumo);
            closeAlterar();
            profileUpdated();
          });


        }

        function apagarFoto(qual) {
          const email = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          if (qual === "perfil") {
            alterarConta("fotoPerfil", "", email);
          } else if (qual === "fundo") {
            alterarConta("fotoFundo", "", email);
          }
          document.getElementById("closeAlterarPerfil").click();
        }
        // Get the <span> element that closes the modal
        const span = document.getElementsByClassName("closeImageZoom")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
          document.getElementById("fotoZoom").style.display = "none";
        }

        // create new project
        function createProject() {
          const idTrabalho = document.getElementById("createProjectIdTrabalho").value;
          const nome = document.getElementById("createProjectNome").value;
          const resumo = document.getElementById("createProjectResumo").value;
          const ano = new Date().getFullYear();
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const body = JSON.stringify({ idTrabalho, nome, resumo, ano, professorEmail });
          let novoProjeto = JSON.stringify({ idTrabalho: idTrabalho, nome: nome, resumo: resumo, ano: ano, imagem: "https://www.provalore.com.br/wp-content/uploads/2018/07/projetos.png", relatorio: "", codigo: "", informacao: "", nota: "", alunos: [] });
          let existe = angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.createProject(novoProjeto);
          if (existe != true) {
            return fetch(`${urlBase}/createProject`, {
              headers: {
                "Content-Type": "application/json",
              },
              method: "POST",
              body: body,
            }).then((response) => {
              document.getElementById("createProjectIdTrabalho").value = "";
              document.getElementById("createProjectNome").value = "";
              document.getElementById("createProjectResumo").value = "";
              openNotification("Projeto criado com sucesso!", "Project successfully created!");
            });
          }

        }

        // create new research project
        function createResearchProject() {
          const title = document.getElementById("createResearchProjectTitle").value;
          const sigla = document.getElementById("createResearchProjectSigla").value;
          const investigador = document.getElementById("createResearchProjectPrincipalInvestigador").value;
          const financiador = document.getElementById("createResearchProjectFinanciador").value;
          const dataInicio = document.getElementById("createResearchProjectLinkDataInicio").value;
          const dataFim = document.getElementById("createResearchProjectLinkDataFim").value;
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          if (dataInicio > dataFim && dataFim != "") {
            document.getElementById("divErroCreateResearchProject").style.display = "block";
            if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
              document.getElementById("mensagemDeErroCreateResearchProject").innerHTML = "O ano do fim não pode ser mais recente do que o ano de início!";
            } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
              document.getElementById("mensagemDeErroCreateResearchProject").innerHTML = "The end date cannot be earlier than the start date!";
            }
            document.getElementById("createResearchProjectLinkDataInicio").style.borderColor = "#dc3545";
            document.getElementById("createResearchProjectLinkDataFim").style.borderColor = "#dc3545";
            return false;
          } else {
            document.getElementById("divErroCreateResearchProject").style.display = "none";
            document.getElementById("mensagemDeErroCreateResearchProject").innerHTML = "";
            document.getElementById("createResearchProjectLinkDataInicio").style.borderColor = "#ced4da";
            document.getElementById("createResearchProjectLinkDataFim").style.borderColor = "#ced4da";

            let body;
            if (dataFim == "") {
              body = JSON.stringify({ titulo: title, sigla, investigadorPrincipal: investigador, financiador, dataInicio, professorEmail });
            } else {
              body = JSON.stringify({ titulo: title, sigla, investigadorPrincipal: investigador, financiador, dataInicio, dataFim, professorEmail });
            }

            return fetch(`${urlBase}/createResearchProject`, {
              headers: {
                "Content-Type": "application/json",
              },
              method: "POST",
              body: body,
            }).then((response) => {
              closeAlterar();
              angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.ReloadResearchProject();
              openNotification("Projeto de pesquisa criado com sucesso!", "Research project successfully created!");
              document.getElementById("createResearchProjectTitle").value = "";
              document.getElementById("createResearchProjectSigla").value = "";
              document.getElementById("createResearchProjectPrincipalInvestigador").value = "";
              document.getElementById("createResearchProjectFinanciador").value = "";
              document.getElementById("createResearchProjectLinkDataInicio").value = "";
              document.getElementById("createResearchProjectLinkDataFim").value = "";
            });
          }
        }



        async function alterarProjeto(form, professorEmail) {
          let idTrabalho = form.idTrabalho.value;
          let nome = form.nome.value;
          let imagem = form.imagem.value;
          let relatorio = form.relatorio.value;
          let codigo = form.codigo.value;
          let info = form.info.value;
          let resumo = form.resumo.value;
          if (sessionStorage.getItem("E-Teacher User Tipo") == "professores") {
            //professor
            let nota = form.nota.value;
            const body = JSON.stringify({ idTrabalho, nome, imagem, relatorio, codigo, info, nota, resumo });
            let check = await angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.checkIfProfessorTemEsteProjetoDeFinalDeCurso(idTrabalho);
            if (check != false) {
              angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.alterarTrabalho(body);
              return fetch(`${urlBase}/alterarProject`, {
                headers: {
                  "Content-Type": "application/json",
                },
                method: "POST",
                body: body,
              }).then((response) => {
                openNotification("Projeto alterado com sucesso!", "Project successfully updated!");
              });
            }
          } else {

            //aluno
            let nota = form.istoNaoFazNadaSoMostra.value;
            let antigoIdTrabalho = idTrabalho;
            idTrabalho = idTrabalho + " v2";
            let ano = new Date().getFullYear();
            let body = JSON.stringify({ idTrabalho, nome, resumo, ano, professorEmail });

            let trabalhosDoProfessor = angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.trabalhosForProfessor;
            trabalhosDoProfessor.forEach((trabalhos, index) => {
              if (trabalhos.idTrabalho === antigoIdTrabalho) {
                const antigoAlunos = trabalhos.alunos;
                antigoAlunos.forEach((aluno, index2) => {

                  return fetch(`${urlBase}/createProject`, {
                    headers: {
                      "Content-Type": "application/json"
                    },
                    method: "POST",
                    body: body,
                  }).then((response) => {

                    //let trabalhosDoProfessor = angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.trabalhosForProfessor;
                    //agora dar update
                    trabalhosDoProfessor.forEach((trabalhos, index) => {
                      if (trabalhos.idTrabalho === antigoIdTrabalho) {
                        nota = trabalhos.nota;
                      }
                    });

                    body = JSON.stringify({ idTrabalho, nome, imagem, relatorio, codigo, info, resumo, versao2: true, nota: nota });
                    return fetch(`${urlBase}/alterarProject`, {
                      headers: {
                        "Content-Type": "application/json",
                      },
                      method: "POST",
                      body: body,
                    }).then((response) => {
                      //agora adicionar alunos a este projeto
                      trabalhosDoProfessor.forEach((trabalhos, index) => {
                        if (trabalhos.idTrabalho === antigoIdTrabalho) {
                          const antigoAlunos = trabalhos.alunos;

                          //verificar se já existe uma versão 2 deste projeto, se sim apaga-se essa versão e cria-se esta
                          trabalhosDoProfessor.forEach((trabalhos2, index2) => {
                            if ((trabalhos2.idTrabalho == idTrabalho) && (trabalhos2.versao2 == "t")) {
                              //versão 2 deste projeto encontrada! Hora de apagar!
                              angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.removerTrabalho(idTrabalho);
                            }
                          });
                          //funcao a partir do angular
                          const novoProjeto = JSON.stringify({ idTrabalho: idTrabalho, nome: nome, resumo: resumo, ano: ano, imagem: imagem, relatorio: relatorio, codigo: codigo, informacao: info, nota: nota, alunos: antigoAlunos, versao2: "t" });
                          angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.createProject(novoProjeto);

                          //adicionar na base de dados
                          antigoAlunos.forEach((aluno, index2) => {

                            let numAluno = aluno.email;
                            body = JSON.stringify({ alunoEmail: numAluno, idTrabalho });
                            return fetch(`${urlBase}/adicionarAlunoAoTrabalho`, {
                              headers: {
                                "Content-Type": "application/json",
                              },
                              method: "POST",
                              body: body,
                            }).then((response) => {

                            });
                          });
                        }
                      });
                      //chamar uma função para enviar email
                      let emailAlunoQueQuerFazerAAleracao = sessionStorage.getItem("E-Teacher User Email");
                      let professorDoTrabalho = professorEmail;
                      let mensagem = "The student " + emailAlunoQueQuerFazerAAleracao + " proposed a new change in project " + antigoIdTrabalho + "!<br>Click on this <a href = '" + urlBase + "' >link</a> to check!<br><br><hr><br><br>O aluno " + emailAlunoQueQuerFazerAAleracao + " propôs uma nova alteração no seu projeto " + antigoIdTrabalho + "!<br>Clique neste <a href = '" + urlBase + "' >link</a> Para ver!";
                      let subject = "New project change proposal";
                      enviarEmailGeral(professorDoTrabalho, mensagem, subject);
                      openNotification("Proposta de alteração pendente!", "Pending amendment proposal!");
                    });

                  });

                });
              }
            });
          }
        }

        async function alterarProjetoInvestigacao(form, professorEmail) {
          let id = form.id.value;
          let titulo = form.titulo.value;
          let investigadorPrincipal = form.investigadorPrincipal.value;
          let dataInicio = parseInt(form.dataInicio.value);
          let Image = form.Image.value;
          let sigla = form.sigla.value;
          let financiador = form.financiador.value;
          let link = form.link.value;
          let resumo = form.resumo.value;
          let body;
          let dataFim = "";
          if (dataInicio > new Date().getFullYear()) {
            form.dataFim.style.borderColor = "#dc3545";
            form.dataInicio.style.borderColor = "#dc3545";
            document.getElementById("divErroUpdateResearchProject" + id).style.display = "block";
            if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
              document.getElementById("mensagemDeErroUpdateResearchProject" + id).innerHTML = "O ano do inicio não pode ser maior do que o ano atual!";
            } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
              document.getElementById("mensagemDeErroUpdateResearchProject" + id).innerHTML = "The start date cannot be higher than the current date!";
            }

            return false;
          } else {
            form.dataFim.style.borderColor = "#ced4da";
            form.dataInicio.style.borderColor = "#ced4da";
            document.getElementById("divErroUpdateResearchProject" + id).style.display = "none";
            document.getElementById("mensagemDeErroUpdateResearchProject" + id).innerHTML = "";
          }
          if (form.dataFim.value != "") {
            dataFim = parseInt(form.dataFim.value);
            if (dataInicio > dataFim) {
              form.dataFim.style.borderColor = "#dc3545";
              form.dataInicio.style.borderColor = "#dc3545";
              document.getElementById("divErroUpdateResearchProject" + id).style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById("mensagemDeErroUpdateResearchProject" + id).innerHTML = "O ano do fim não pode ser maior do que o ano atual!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById("mensagemDeErroUpdateResearchProject" + id).innerHTML = "The end date cannot be earlier than the start date!";
              }
              return false;
            } else {
              form.dataFim.style.borderColor = "#ced4da";
              form.dataInicio.style.borderColor = "#ced4da";
              document.getElementById("divErroUpdateResearchProject" + id).style.display = "none";
              document.getElementById("mensagemDeErroUpdateResearchProject" + id).innerHTML = "";
            }
            if (dataFim > new Date().getFullYear()) {
              form.dataFim.style.borderColor = "#dc3545";
              form.dataInicio.style.borderColor = "#dc3545";
              document.getElementById("divErroUpdateResearchProject" + id).style.display = "block"; if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById("mensagemDeErroUpdateResearchProject" + id).innerHTML = "O ano do fim não pode ser maior do que o ano atual!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById("mensagemDeErroUpdateResearchProject" + id).innerHTML = "The end date cannot be earlier than the start date!";
              }
              return false;
            } else {
              form.dataFim.style.borderColor = "#ced4da";
              form.dataInicio.style.borderColor = "#ced4da";
              document.getElementById("divErroUpdateResearchProject" + id).style.display = "none";
              document.getElementById("mensagemDeErroUpdateResearchProject" + id).innerHTML = "";
            }

          }
          body = JSON.stringify({ id, titulo, investigadorPrincipal, dataInicio, dataFim, Image, sigla, financiador, link, resumo });
          let check = await angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.checkIfProfessorTemEsteResearchProjetoDeFinalDeCurso(id);
          if (check != false) {
            return fetch(`${urlBase}/alterarResearchProject`, {
              headers: {
                "Content-Type": "application/json",
              },
              method: "POST",
              body: body,
            }).then((response) => {
              angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.ReloadResearchProject();
              openNotification("Projeto alterado com sucesso!", "Project successfully updated!");
            });
          }
        }

        async function aceitarAlteracaoProjeto(form) {
          let idTrabalho = form.value;

          let check = await angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.checkIfProfessorTemEsteProjetoDeFinalDeCurso(idTrabalho);
          if (check != false) {

            let ultimas3Letras = idTrabalho.slice(-3);
            if (ultimas3Letras === " v2") {
              let novoIdTrabalho = idTrabalho.slice(0, -3);
              //apagar o que vai ser substituido
              let obj = {};
              obj.value = novoIdTrabalho;
              await eliminarProjeto(obj);
              //alterar o outro para ficar com o mesmo idTrabalho
              const body = JSON.stringify({ idTrabalho, novoIdTrabalho: novoIdTrabalho, versao2: false });
              return fetch(`${urlBase}/aceitarAlteracaoProjeto`, {
                headers: {
                  "Content-Type": "application/json",
                },
                method: "POST",
                body: body,
              }).then((response) => {
                angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.reloadProjetos();
                openNotification("Proposta de alteração aceite!", "Amendment proposal accepted!");
              });
            }
          }

        }


        async function eliminarProjeto(tag) {
          const idTrabalho = tag.value;
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          let check = await angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.checkIfProfessorTemEsteProjetoDeFinalDeCurso(idTrabalho);
          if (check != false) {
            const body = JSON.stringify({ idTrabalho, professorEmail });
            return fetch(`${urlBase}/apagarProject`, {
              headers: {
                "Content-Type": "application/json",
              },
              method: "POST",
              body: body,
            }).then((response) => {
              angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.removerTrabalho(idTrabalho);
              openNotification("Projeto eliminado com sucesso!", "Project successfully deleted!");
              closeAlterar();
            });
          }
        }


        async function eliminarResearchProjeto(tag) {
          const idTrabalho = tag.value;
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          let check = await angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.checkIfProfessorTemEsteResearchProjetoDeFinalDeCurso(idTrabalho);
          if (check != false) {
            const body = JSON.stringify({ idTrabalho, professorEmail });
            return fetch(`${urlBase}/apagarResearchProject`, {
              headers: {
                "Content-Type": "application/json",
              },
              method: "POST",
              body: body,
            }).then((response) => {
              angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.ReloadResearchProject();
              openNotification("Projeto de pesquisa eliminado com sucesso!", "Research Project successfully deleted!");
              closeAlterar();
            });
          }
        }


        // add new student to project
        async function addAlunoAoTrabalho() {
          const alunoEmail = document.getElementById("adicionarAlunoAoTrabalho").value;
          const idTrabalho = sessionStorage.getItem("E-Teacher User idTrabalho");
          if (alunoEmail != 0) {
            let check = await angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.checkIfProfessorTemEsteProjetoDeFinalDeCurso(idTrabalho);
            if (check != false) {
              angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.addAlunoAoTrabalho(alunoEmail);
              const body = JSON.stringify({ alunoEmail, idTrabalho });
              return fetch(`${urlBase}/adicionarAlunoAoTrabalho`, {
                headers: {
                  "Content-Type": "application/json",
                },
                method: "POST",
                body: body,
              }).then((response) => {

              });
            }
          }

        }

        async function removerAlunoDoTrabalho(tag) {
          const alunoEmail = tag.getAttribute("alunoEmail");
          const idTrabalho = tag.getAttribute("idTrabalho");
          let check = await angular.element(document.querySelector('controllerTrabalho')).scope().trabalhos.checkIfProfessorTemEsteProjetoDeFinalDeCurso(idTrabalho);
          if (check != false) {
            const body = JSON.stringify({ alunoEmail, idTrabalho });
            return fetch(`${urlBase}/eliminarAlunoDoTrabalho`, {
              headers: {
                "Content-Type": "application/json"
              },
              method: "POST",
              body: body
            }).then((response) => {
              openNotification("Aluno removido com sucesso!", "Student successfully removed!");
            });

          }
        }



        // add new student to the teacher
        function addAlunoAoProfessor() {
          const numeroALuno = document.getElementById("adicionarAlunoAoProfessor").value;
          const emailProfessor = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          angular.element(document.querySelector('html')).scope().profile.addAlunoAoProfessor(numeroALuno);
          const body = JSON.stringify({ numeroALuno, emailProfessor });
          return fetch(`${urlBase}/adicionarAlunoAoProfessor`, {
            headers: {
              "Content-Type": "application/json",
            },
            method: "POST",
            body: body,
          }).then((response) => {
            if (response.status === 404) {
              document.getElementById("divErroAddAlunoAoProfessor").style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById("mensagemDeErroAddAlunoAoProfessor").innerText = "Aluno não existe!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById("mensagemDeErroAddAlunoAoProfessor").innerText = "Student does not exist!";
              }
            } else if (response.status === 409) {
              document.getElementById("divErroAddAlunoAoProfessor").style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById("mensagemDeErroAddAlunoAoProfessor").innerText = "Aluno já neste professor!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById("mensagemDeErroAddAlunoAoProfessor").innerText = "Student already in this teacher!";
              }
            } else {
              document.getElementById("divErroAddAlunoAoProfessor").style.display = "none";
              document.getElementById("mensagemDeErroAddAlunoAoProfessor").innerText = "";
              closeAlterar();
            }
          });
        }



        function createIdTrabalhosessionStorage(button) {
          sessionStorage.setItem("E-Teacher User idTrabalho", button.value);
        }



        function profileUpdated() {
          openNotification("Perfil alterado com sucesso!", "Profile successfully updated!");

        }



        function callAlterar(idParaMostrar, classParaEsconder) {
          document.getElementById("alterarProfile").style.display = "block";
          openLink(idParaMostrar, classParaEsconder);
          if (idParaMostrar == "addOrientacaoAoProfessor") {
            if (angular.element(document.querySelector('html')).scope().profile.alunos.length == 0) {
              document.getElementById("addOrientacaoAoProfessorAluno").style.borderColor = "#dc3545";
              document.getElementById("divErroAddOrientacaoAoProfessor").style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById("mensagemDeErroAddOrientacaoAoProfessor").innerText = "Não existem alunos! Por favor adicione um novo na aba dos alunos!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById("mensagemDeErroAddOrientacaoAoProfessor").innerText = "There are no students! Please enter a new one in students tab!";
              }

            } else {
              document.getElementById("addOrientacaoAoProfessorAluno").style.borderColor = "#ced4da";
              document.getElementById("divErroAddOrientacaoAoProfessor").style.display = "none";
              document.getElementById("mensagemDeErroAddOrientacaoAoProfessor").innerText = "";
            }
          } else if (idParaMostrar == "addAlunoAoTrabalho") {
            if (angular.element(document.querySelector('html')).scope().profile.alunos.length == 0) {
              document.getElementById("adicionarAlunoAoTrabalho").style.borderColor = "#dc3545";
              document.getElementById("divErroAddAluno").style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById("mensagemDeErroAddAluno").innerText = "Não existem alunos! Por favor adicione um novo na aba dos alunos!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById("mensagemDeErroAddAluno").innerText = "There are no students! Please enter a new one in students tab!";
              }
            } else {
              document.getElementById("adicionarAlunoAoTrabalho").style.borderColor = "#ced4da";
              document.getElementById("divErroAddAluno").style.display = "none";
              document.getElementById("mensagemDeErroAddAluno").innerText = "";
            }
          }
        }


        function callInfo(idParaMostrar, classParaEsconder) {
          document.getElementById("infoProfile").style.display = "block";
          openLink(idParaMostrar, classParaEsconder);
        }


        function closeAlterar() {
          document.getElementById('alterarProfile').style.display = 'none';
          sessionStorage.removeItem("E-Teacher User idTrabalho");
        }

        function closeInfo() {
          document.getElementById('infoProfile').style.display = 'none';
        }



        function verificarStudentNumber(teacherCheckBox, divStudentNumber, studentNumberField) {
          if (document.getElementById(teacherCheckBox).checked) {
            document.getElementById(divStudentNumber).style.display = "none";
            document.getElementById(studentNumberField).value = "1";
          } else {
            document.getElementById(divStudentNumber).style.display = "block";
            document.getElementById(studentNumberField).value = "";
          }
        }


        function mandarSearchParaCima() {
          if (document.getElementById("searchBarInput").value.length >= 3) {
            mandadoParaCima = true;
            document.getElementById("searchBar").className = 'mandarParaCima';
            document.getElementById("searchBar").style = 'width: 100%; animation-name: mandarParaCima; animation-duration: 0.5s;';
            //aparecer os perfis
            document.getElementById("resultDoSearch").style.display = "block";
          }
        }
        function mandarSearchParaBaixo() {
          const searchBar = document.getElementById("searchBarInput").value;
          if (searchBar.length <= 2 && mandadoParaCima) {
            document.getElementById("searchBar").className = 'mandarParaBaixo';
            document.getElementById("searchBar").style = 'width: 100%; animation-name: mandarParaBaixo; animation-duration: 0.5s;';
            document.getElementById("resultDoSearch").style.display = "none";
          }

        }

        function focusSearchBar() {
          document.getElementById("searchBarInput").style = "width:40%; min-width: 160px;transition: width 0.5s;";
          document.getElementById("searchButton").style.display = "block";
        }


        function searchProfessor(emailDoProfessorAProcurar) {
          sessionStorage.setItem("E-Teacher Page", "callPerfil");
          openLink("profilePage", "mainPage");
          document.body.style.backgroundColor = "#f5f5f5";
        }

        //funcao que vai abrir o form pop up para alterar o aluno
        async function updateStudentFromThisTeacher(tag) {
          const alunoEmail = tag.getAttribute("alunoEmail");
          const professorEmail = sessionStorage.getItem('E-Teacher User Email');
          let check = await angular.element(document.querySelector('html')).scope().profile.checkIfProfessorTemEsteAluno(professorEmail, alunoEmail);
          if (check != false) {
            //alunoPertence a este professor! check tem o valor do aluno
            //defenir os campos do alterarAluno com os dados do aluno
            document.getElementById("emailAlterarAluno").value = check.email;
            document.getElementById("nameAlterarAluno").value = check.nome;
            document.getElementById("studentNumberAlterarAluno").value = check.numero;
            callAlterar('alterarAluno', 'changeProfile');
          }
        }



        async function updateRecursoDigital(tag) {
          const id = tag.getAttribute("idRS");
          const descricao = tag.getAttribute("descricao");
          const url = tag.getAttribute("url");
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          let check = await angular.element(document.querySelector('html')).scope().profile.checkIfProfessorTemEsteRecursoDigital(id);
          if (check != false) {
            //alunoPertence a este professor! check tem o valor do aluno
            //defenir os campos do alterarAluno com os dados do aluno
            document.getElementById("idAlterarRecursoDigital").value = id;
            document.getElementById("descricaoAlterarRecursoDigital").value = descricao;
            document.getElementById("urlAlterarRecursoDigital").value = url;
            callAlterar('alterarRecursoDigital', 'changeProfile');
          }
        }



        //funcao que vai alterar o aluno
        async function alterarAluno() {
          const alunoEmail = document.getElementById("emailAlterarAluno");
          const alunoNome = document.getElementById("nameAlterarAluno");
          const alunoNumero = document.getElementById("studentNumberAlterarAluno");
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          let check = await angular.element(document.querySelector('html')).scope().profile.checkIfProfessorTemEsteAluno(professorEmail, alunoEmail.value);
          if (check != false) {
            //alunoPertence a este professor! check tem o valor do aluno
            document.getElementById("divErroAlterarAluno").style.display = "none";
            document.getElementById("mensagemDeErroAlterarAluno").innerText = "";
            const body = JSON.stringify({ alunoEmail: alunoEmail.value, alunoNome: alunoNome.value, alunoNumero: alunoNumero.value });
            return fetch(`${urlBase}/alterarAluno`, {
              headers: {
                "Content-Type": "application/json"
              },
              method: "POST",
              body: body
            }).then((response) => {
              angular.element(document.querySelector('html')).scope().profile.changeStudent(body);
              closeAlterar();
              openNotification("Aluno alterado com sucesso!", "Student successfully updated!");
            });
          } else {
            document.getElementById("divErroAlterarAluno").style.display = "block";
            if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
              document.getElementById("mensagemDeErroAlterarAluno").innerText = "Não possui este aluno!";
            } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
              document.getElementById("mensagemDeErroAlterarAluno").innerText = "You don't have this student!";
            }
          }

        }


        //funcao que vai alterar o aluno
        async function alterarRecursoDigital() {
          const id = document.getElementById("idAlterarRecursoDigital");
          const descricao = document.getElementById("descricaoAlterarRecursoDigital");
          const url = document.getElementById("urlAlterarRecursoDigital");
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;

          let check = await angular.element(document.querySelector('html')).scope().profile.checkIfProfessorTemEsteRecursoDigital(id.value);
          if (check != false) {
            const body = JSON.stringify({ id: id.value, descricao: descricao.value, url: url.value });
            return fetch(`${urlBase}/alterarRecursoDigital`, {
              headers: {
                "Content-Type": "application/json"
              },
              method: "POST",
              body: body
            }).then((response) => {
              angular.element(document.querySelector('html')).scope().profile.reloadRecursosDigitais();
              closeAlterar();
              openNotification("Recurso digital alterado com sucesso!", "Digital resource successfully updated!");
            });
          } else {
            document.getElementById("divErroAlterarAluno").style.display = "block";
            if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
              document.getElementById("mensagemDeErroAlterarAluno").innerText = "Não possui este recurso digital!";
            } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
              document.getElementById("mensagemDeErroAlterarAluno").innerText = "You don't have digital resource!";
            }
          }

        }

        async function eliminarStudentFromThisTeacher(tag) {
          const alunoEmail = tag.value;
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          let check = await angular.element(document.querySelector('html')).scope().profile.checkIfProfessorTemEsteAluno(professorEmail, alunoEmail);
          if (check != false) {

            const body = JSON.stringify({ alunoEmail, professorEmail });
            return fetch(`${urlBase}/eliminarAlunoDoProfessor`, {
              headers: {
                "Content-Type": "application/json"
              },
              method: "POST",
              body: body
            }).then((response) => {
              openNotification("Aluno removido com sucesso!", "Student successfully removed!");
              closeAlterar();
              angular.element(document.querySelector('html')).scope().profile.eliminarAlunoDoProfessor(alunoEmail);
            });
          }
        }



        async function removerOrientacao(tag) {
          const idOrientacao = tag.value;
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          let check = await angular.element(document.querySelector('html')).scope().profile.checkIfProfessorTemEstaOrientacao(professorEmail, idOrientacao);
          if (check != false) {
            const body = JSON.stringify({ idOrientacao, professorEmail });
            return fetch(`${urlBase}/removerOrientacao`, {
              headers: {
                "Content-Type": "application/json"
              },
              method: "POST",
              body: body
            }).then((response) => {
              openNotification("Orientação removida com sucesso!", "Orientation successfully removed!");
              closeAlterar();
              angular.element(document.querySelector('html')).scope().profile.reloadOrientations();
            });
          }
        }



        async function removerDisciplina(tag) {
          const idDisciplina = tag.getAttribute("idDisciplinas");
          const idInstituicao = tag.getAttribute("idInstituicao");
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const body = JSON.stringify({ idDisciplina, idInstituicao, professorEmail });
          let check = await angular.element(document.querySelector('html')).scope().profile.checkIfProfessorTemEstaDisciplina(idDisciplina, idInstituicao, professorEmail);
          if (check != false) {

            return fetch(`${urlBase}/removerDisciplinaAtiva`, {
              headers: {
                "Content-Type": "application/json"
              },
              method: "POST",
              body: body
            }).then((response) => {
              angular.element(document.querySelector('html')).scope().profile.reloadDisciplinas();
              closeAlterar();
              openNotification("Disciplina removida com sucesso!", "Subject successfully removed!");
            });

          }
        }

        async function removerRecursoDigital(tag) {
          const idRS = tag.getAttribute("idRS");
          const body = JSON.stringify({ idRS });
          let check = await angular.element(document.querySelector('html')).scope().profile.checkIfProfessorTemEsteRecursoDigital(idRS);
          if (check != false) {
            return fetch(`${urlBase}/removerRecursoDigital`, {
              headers: {
                "Content-Type": "application/json"
              },
              method: "POST",
              body: body
            }).then((response) => {
              angular.element(document.querySelector('html')).scope().profile.reloadRecursosDigitais();
              closeAlterar();
              openNotification("Recurso digital removido com sucesso!", "Digital resources successfully removed!");
            });
          }
        }

        async function apagarDisciplina(tag) {
          const idDisciplina = tag.getAttribute("idDisciplinas");
          const idInstituicao = tag.getAttribute("idInstituicao");
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const body = JSON.stringify({ idDisciplina, idInstituicao, professorEmail });
          let check = await angular.element(document.querySelector('html')).scope().profile.checkIfProfessorTemEstaDisciplina(idDisciplina, idInstituicao, professorEmail);
          if (check != false) {

            return fetch(`${urlBase}/removerDisciplinaCompletamente`, {
              headers: {
                "Content-Type": "application/json"
              },
              method: "POST",
              body: body
            }).then((response) => {
              openNotification("Disciplina eliminada com sucesso!", "Subject successfully removed completly!");
              closeAlterar();
              angular.element(document.querySelector('html')).scope().profile.reloadDisciplinas();
            });

          }
        }


        function addDisciplinaAoProfessor() {
          const idInstituicao = document.getElementById("addDisciplinaInstituicaoAoProfessor").value;
          const semestre = document.getElementById("addDisciplinaSemestreAoProfessor").value;
          const idDisciplina = document.getElementById("addDisciplinaDisciplinaAoProfessor").value;
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const body = JSON.stringify({ idDisciplina, idInstituicao, semestre, professorEmail });
          return fetch(`${urlBase}/addDisciplinaProfessor`, {
            headers: {
              "Content-Type": "application/json"
            },
            method: "POST",
            body: body
          }).then((response) => {
            if (response.status === 409) {
              document.getElementById("divErroAddDisciplinasAoProfessor").style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById("mensagemDeErroAddDisciplinasAoProfessor").innerText = "Disciplina já existente!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById("mensagemDeErroAddDisciplinasAoProfessor").innerText = "Subject already exist!";
              }
            } else {
              document.getElementById("divErroAddDisciplinasAoProfessor").style.display = "none";
              document.getElementById("mensagemDeErroAddDisciplinasAoProfessor").innerText = "";
              openNotification("Disciplina adicionada com sucesso!", "Subject successfully added!");
              angular.element(document.querySelector('html')).scope().profile.reloadDisciplinas();
            }

          });
        }


        function addOrientacaoAoProfessor() {
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const idInstituicao = document.getElementById("addOrientacaoAoProfessorInstituicao").value;
          const titulo = document.getElementById("addOrientacaoAoProfessorTitulo").value;
          const nomeCurso = document.getElementById("addOrientacaoAoProfessorNomeDoCurso").value;
          const tema = document.getElementById("addOrientacaoAoProfessorTema").value;
          const link = document.getElementById("addOrientacaoAoProfessorLink").value;
          const relatorio = document.getElementById("addOrientacaoAoProfessorRelatorio").value;
          const alunoEmail = document.getElementById("addOrientacaoAoProfessorAluno").value;
          const dataInicio = document.getElementById("addOrientacaoAoProfessorStartYear").value;
          const dataFim = document.getElementById("addOrientacaoAoProfessorEndYear").value;
          if (alunoEmail != 0) {
            if ((dataFim < dataInicio) && (dataFim != "")) {
              document.getElementById("addOrientacaoAoProfessorStartYear").style.borderColor = "#dc3545";
              document.getElementById("addOrientacaoAoProfessorEndYear").style.borderColor = "#dc3545";
              document.getElementById("divErroAddOrientacaoAoProfessor").style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById("mensagemDeErroAddOrientacaoAoProfessor").innerText = "O ano do fim não pode ser mais recente do que o ano de início!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById("mensagemDeErroAddOrientacaoAoProfessor").innerText = "The end date cannot be earlier than the start date!";
              }
              return false;
            }
            document.getElementById("addOrientacaoAoProfessorEndYear").style.borderColor = "#ced4da";
            document.getElementById("addOrientacaoAoProfessorStartYear").style.borderColor = "#ced4da";
            let body;
            if (dataFim === "") {
              body = JSON.stringify({ idInstituicao, professorEmail, titulo, alunoEmail, dataInicio, nomeCurso, tema, link, relatorio });
            } else {
              body = JSON.stringify({ idInstituicao, professorEmail, titulo, alunoEmail, dataInicio, dataFim, nomeCurso, tema, link, relatorio });
            }
            return fetch(`${urlBase}/addOrientacaoProfessor`, {
              headers: {
                "Content-Type": "application/json"
              },
              method: "POST",
              body: body
            }).then((response) => {
              if (response.status === 409) {
                document.getElementById("divErroAddOrientacaoAoProfessor").style.display = "block";
                if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                  document.getElementById("mensagemDeErroAddOrientacaoAoProfessor").innerText = "Orientação já existente!";
                } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                  document.getElementById("mensagemDeErroAddOrientacaoAoProfessor").innerText = "Orientation already exist!";
                }
              } else {
                document.getElementById("divErroAddOrientacaoAoProfessor").style.display = "none";
                document.getElementById("mensagemDeErroAddOrientacaoAoProfessor").innerText = "";
                closeAlterar();
                openNotification("Orientação adicionada com sucesso!", "Orientation successfully added!");
                angular.element(document.querySelector('html')).scope().profile.reloadOrientations();
                document.getElementById("addOrientacaoAoProfessorNomeDoCurso").value = "";
                document.getElementById("addOrientacaoAoProfessorTema").value = "";
                document.getElementById("addOrientacaoAoProfessorLink").value = "";
                document.getElementById("addOrientacaoAoProfessorRelatorio").value = "";
                document.getElementById("addOrientacaoAoProfessorStartYear").value = "";
                document.getElementById("addOrientacaoAoProfessorEndYear").value = "";
              }

            });
          }
        }

        function addRecursoDigitalAoProfessor() {
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const descricao = document.getElementById("addRecursoDigitalAoProfessorDescricao");
          const url = document.getElementById("addRecursoDigitalAoProfessorUrl");
          const body = JSON.stringify({ descricao: descricao.value, professorEmail, url: url.value });
          return fetch(`${urlBase}/addRecursoDigitalProfessor`, {
            headers: {
              "Content-Type": "application/json"
            },
            method: "POST",
            body: body
          }).then((response) => {
            angular.element(document.querySelector('html')).scope().profile.reloadRecursosDigitais();
            closeAlterar();
            openNotification("Recurso digital adicionado com sucesso!", "Digital resource successfully added!");
            descricao.value = "";
            url.value = "";
          });
        }


        async function updateOrientacaoAoProfessor() {
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const idOrientacao = document.getElementById("updateOrientacaoAoProfessorIdOrientacao").value;
          const nomeCurso = document.getElementById("changeOrientacaoAoProfessorNomeDoCurso").value;
          const title = document.getElementById("changeOrientacaoAoProfessorTitulo").value;
          const tema = document.getElementById("changeOrientacaoAoProfessorTema").value;
          const relatorio = document.getElementById("changeOrientacaoAoProfessorRelatorio").value;
          const link = document.getElementById("changeOrientacaoAoProfessorLink").value;
          const instituicao = document.getElementById("changeOrientacaoAoProfessorInstituicao").value;
          const dataInicio = document.getElementById("changeOrientacaoAoProfessorStartYear").value;
          let dataFim = document.getElementById("changeOrientacaoAoProfessorEndYear").value;
          let check = await angular.element(document.querySelector('html')).scope().profile.checkIfProfessorTemEstaOrientacao(professorEmail, idOrientacao);
          if (check != false) {
            if (dataFim < dataInicio && dataFim != "") {
              document.getElementById("changeOrientacaoAoProfessorStartYear").style.borderColor = "#dc3545";
              document.getElementById("changeOrientacaoAoProfessorEndYear").style.borderColor = "#dc3545";
              document.getElementById("divErroChangeOrientacaoAoProfessor").style.display = "block";

              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById("mensagemDeErroChangeOrientacaoAoProfessor").innerText = "O ano do fim não pode ser mais recente do que o ano de início!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById("mensagemDeErroChangeOrientacaoAoProfessor").innerText = "The end date cannot be earlier than the start date!";
              }
              return false;
            }
            document.getElementById("changeOrientacaoAoProfessorStartYear").style.borderColor = "#ced4da";
            document.getElementById("changeOrientacaoAoProfessorEndYear").style.borderColor = "#ced4da";
            document.getElementById("divErroChangeOrientacaoAoProfessor").style.borderColor = "#ced4da";
            document.getElementById("mensagemDeErroChangeOrientacaoAoProfessor").style.borderColor = "#ced4da";
            document.getElementById("divErroChangeOrientacaoAoProfessor").style.display = "none";
            document.getElementById("mensagemDeErroChangeOrientacaoAoProfessor").innerText = "";

            const body = JSON.stringify({ idOrientacao, professorEmail, dataFim, nomeCurso, title, tema, relatorio, link, instituicao, dataInicio });

            return fetch(`${urlBase}/changeOrientacaoProfessor`, {
              headers: {
                "Content-Type": "application/json"
              },
              method: "POST",
              body: body
            }).then((response) => {
              document.getElementById("divErroChangeOrientacaoAoProfessor").style.display = "none";
              document.getElementById("mensagemDeErroChangeOrientacaoAoProfessor").innerText = "";
              openNotification("Orientação alterada com sucesso!", "Orientation successfully updated!");
              angular.element(document.querySelector('html')).scope().profile.reloadOrientations();
              closeAlterar();
            });
          }

        }




        function confirmRemoverOrientationOpen(tag) {
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const idorientacao = tag.getAttribute("idorientacao");
          document.getElementById("removeOrientacaoAoProfessorId").value = idorientacao;
          callAlterar('confirmRemoverOrientation', 'changeProfile');

        }

        function confirmRemoverStudentOpen(tag) {
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const alunoEmail = tag.value;
          document.getElementById("removeStudentAoProfessor").value = alunoEmail;
          callAlterar('confirmRemoverAlunosDoProfessor', 'changeProfile');

        }
        function alterarOrientacaoOpen(tag) {
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const idOrientacao = tag.getAttribute("idOrientacao");
          const alunoNome = tag.getAttribute("nameAluno");
          const alunoNumero = tag.getAttribute("numeroAluno");
          let instituicaoDaOrientacao = angular.element(document.querySelector('html')).scope().profile.orientacoes;
          instituicaoDaOrientacao.instituicoes.forEach((instituicao, index) => {
            instituicao.Orientacoes.forEach((orientacao, index) => {
              if (orientacao.id == idOrientacao) {
                document.getElementById("updateOrientacaoAoProfessorIdOrientacao").value = orientacao.id;
                document.getElementById("changeOrientacaoAoProfessorNomeDoCurso").value = orientacao.nomeCurso;
                document.getElementById("changeOrientacaoAoProfessorTitulo").value = orientacao.titulo;
                document.getElementById("changeOrientacaoAoProfessorTema").value = orientacao.tema;
                document.getElementById("changeOrientacaoAoProfessorRelatorio").value = orientacao.relatorio;
                document.getElementById("changeOrientacaoAoProfessorLink").value = orientacao.link;
                document.getElementById("changeOrientacaoAoProfessorTema").value = orientacao.tema;
                document.getElementById("changeOrientacaoAoProfessorAluno").value = orientacao.alunoEmail;
                document.getElementById("changeOrientacaoAoProfessorAluno").innerText = alunoNome + " | " + alunoNumero;
                document.getElementById("changeOrientacaoAoProfessorInstituicao").value = instituicao.id;
                document.getElementById("changeOrientacaoAoProfessorStartYear").value = orientacao.dataInicio;
                let dataFim = orientacao.dataFim;
                if (dataFim == 0) {
                  dataFim = "";
                }
                document.getElementById("changeOrientacaoAoProfessorEndYear").value =
                  dataFim;
                callAlterar('changeOrientacaoAoProfessor', 'changeProfile');
              }
            });

          });

        }

        function eliminarProjetoOpen(tag) {
          const idTrabalho = tag.value;
          document.getElementById("removeProjetoAoProfessor").value = idTrabalho;
          callAlterar('confirmApagarTrabalhos', 'changeProfile');
        }


        function eliminarResearchProjetoOpen(tag) {
          const idTrabalho = tag.value;
          document.getElementById("removeResearchProjetoAoProfessor").value = idTrabalho;
          callAlterar('confirmApagarResearchProject', 'changeProfile');
        }

        function confirmRemoverDisciplinasOpen(tag) {
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const idDisciplina = tag.getAttribute("idDisciplinas");
          const idInstituicao = tag.getAttribute("idInstituicao");
          document.getElementById("removeDisciplinaAoProfessorId").setAttribute("idDisciplinas", idDisciplina);
          document.getElementById("removeDisciplinaAoProfessorId").setAttribute("idInstituicao", idInstituicao);
          callAlterar('confirmRemoverDisciplina', 'changeProfile');
        }


        function confirmApagarRecursoDigitalOpen(tag) {
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const id = tag.value;
          document.getElementById("removeRecursoDigitalAoProfessorId").setAttribute("idRS", id);
          callAlterar('confirmRemoverRecursoDigital', 'changeProfile');
        }


        function confirmApagarDisciplinasOpen(tag) {
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const idDisciplina = tag.getAttribute("idDisciplinas");
          const idInstituicao = tag.getAttribute("idInstituicao");
          document.getElementById("apagarDisciplinaAoProfessorId").setAttribute("idDisciplinas", idDisciplina);
          document.getElementById("apagarDisciplinaAoProfessorId").setAttribute("idInstituicao", idInstituicao);
          callAlterar('confirmApagarDisciplina', 'changeProfile');
        }


        function openInfoOrientacoes(tag) {
          const tr = document.getElementById("orientacoesMostrarTR" + tag.getAttribute("orientacoesId"));
          const title = tr.getAttribute("title");
          const nomeCurso = tr.getAttribute("nomeCurso");
          const tema = tr.getAttribute("tema");
          const relatorio = tr.getAttribute("relatorio");
          const link = tr.getAttribute("link");
          const student = tr.getAttribute("student");
          const dataInicio = tr.getAttribute("dataInicio");
          const dataFim = tr.getAttribute("dataFim");
          const institution = tr.getAttribute("institution");

          if (sessionStorage.getItem("E-Teacher Idioma") == "en") {
            document.getElementById("infoOrientationTitle").innerText = title;
          } else if (sessionStorage.getItem("E-Teacher Idioma") == "pt") {
            if (title == "Master's degree")
              document.getElementById("infoOrientationTitle").innerText = "Mestrado";
            else
              document.getElementById("infoOrientationTitle").innerText = "Doutoramento";
          }

          document.getElementById("infoOrientationStudent").innerText = student;
          document.getElementById("infoOrientationDuration").innerText = dataInicio + " - " + dataFim;
          document.getElementById("infoOrientationInstitution").innerText = institution;
          document.getElementById("infoOrientationCourseName").innerText = nomeCurso;
          document.getElementById("infoOrientationTheme").innerText = tema;
          document.getElementById("infoOrientationReport").href = relatorio;
          document.getElementById("infoOrientationLink").href = link;
          callInfo('infoOrientacao', 'infoProfile');
        }




        function changePasswordStudent() {
          const studentEmail = document.getElementById("createPasswordEmail");
          const oldPassword = document.getElementById("createPasswordOldPassword");
          const password = document.getElementById("createPasswordPassword");
          const confirmPassword = document.getElementById("createPasswordConfirmPassword");
          if (password.value !== confirmPassword.value) {
            //passwords diferentes
            password.style.borderColor = "#dc3545";
            confirmPassword.style.borderColor = "#dc3545";
            document.getElementById("divErroConfirmPassword").style.display = "block";
            if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
              document.getElementById("mensagemDeErroConfirmPassword").innerText = "Palavras-passe diferentes!";
            } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
              document.getElementById("mensagemDeErroConfirmPassword").innerText = "Different passwords!";
            }
          } else {
            //passwords identicas          
            password.style.borderColor = "#ced4da";
            confirmPassword.style.borderColor = "#ced4da";
            document.getElementById("divErroConfirmPassword").style.display = "none";
            document.getElementById("mensagemDeErroConfirmPassword").innerText = "";
            const body = JSON.stringify({ email: studentEmail.value, password: password.value, oldPassword: oldPassword.value });
            return fetch(`${urlBase}/alterarPasswordAluno`, {
              headers: {
                "Content-Type": "application/json",
              },
              method: "POST",
              body: body,
            }).then((response) => {
              if (response.status === 404) {
                studentEmail.style.borderColor = "#dc3545";
                oldPassword.style.borderColor = "#dc3545";
                document.getElementById('divErroConfirmPassword').style.display = "block";
                if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                  document.getElementById('mensagemDeErroConfirmPassword').innerText = "Aluno não encontrado!";
                } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                  document.getElementById('mensagemDeErroConfirmPassword').innerText = "Student not found!";
                }
              } else {
                studentEmail.style.borderColor = "#ced4da";
                oldPassword.style.borderColor = "#ced4da";
                document.getElementById('divErroConfirmPassword').style.display = "none";
                document.getElementById('mensagemDeErroConfirmPassword').innerText = "";
              }
              if (!response.ok) {
                throw new Error(response.statusText);
              }
              return response.json();
            }).then((response) => {
              window.location.href = window.location.origin + "?passwordAlterada=true";
            });
          }
        }

        async function changePasswordUser() {
          const studentEmail = document.getElementById("createPasswordEmailUser");
          const oldPassword = document.getElementById("createPasswordOldPasswordUser");
          const password = document.getElementById("createPasswordPasswordUser");
          const confirmPassword = document.getElementById("createPasswordConfirmPasswordUser");
          if (password.value !== confirmPassword.value) {
            //passwords diferentes
            password.style.borderColor = "#dc3545";
            confirmPassword.style.borderColor = "#dc3545";
            document.getElementById("divErroConfirmPasswordUser").style.display = "block";
            if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
              document.getElementById("mensagemDeErroConfirmPasswordUser").innerText = "Palavras-passe diferentes!";
            } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
              document.getElementById("mensagemDeErroConfirmPasswordUser").innerText = "Different passwords!";
            }
          } else {
            //passwords identicas          
            password.style.borderColor = "#ced4da";
            confirmPassword.style.borderColor = "#ced4da";
            document.getElementById("divErroConfirmPasswordUser").style.display = "none";
            document.getElementById("mensagemDeErroConfirmPasswordUser").innerText = "";

            const body = JSON.stringify({ email: studentEmail.value, password: password.value, oldPassword: oldPassword.value, tipo: sessionStorage.getItem('E-Teacher User Tipo') });
            return fetch(`${urlBase}/alterarPasswordUser`, {
              headers: {
                "Content-Type": "application/json",
              },
              method: "POST",
              body: body,
            }).then((response) => {
              if (response.status === 404) {
                studentEmail.style.borderColor = "#dc3545";
                oldPassword.style.borderColor = "#dc3545";
                document.getElementById('divErroConfirmPasswordUser').style.display = "block";
                if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                  document.getElementById('mensagemDeErroConfirmPasswordUser').innerText = "Email e palavra-passe não coincidem!";
                } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                  document.getElementById('mensagemDeErroConfirmPasswordUser').innerText = "Email and password does not match!";
                }
              } else {
                studentEmail.style.borderColor = "#ced4da";
                oldPassword.style.borderColor = "#ced4da";
                document.getElementById('divErroConfirmPasswordUser').style.display = "none";
                document.getElementById('mensagemDeErroConfirmPasswordUser').innerText = "";
              }
              if (!response.ok) {
                throw new Error(response.statusText);
              }
              return response.json();
            }).then((response) => {
              window.location.reload();
              openNotification("Palavra-passe alterada com sucesso!", "Password successfully updated!");
            });
          }
        }


        async function resetPasswordUser() {
          const email = document.getElementById("resetPasswordEmailUser");
          const oldPassword = document.getElementById("resetPasswordOldPasswordUser");
          const password = document.getElementById("resetPasswordPasswordUser");
          const confirmPassword = document.getElementById("resetPasswordConfirmPasswordUser");
          if (password.value !== confirmPassword.value) {
            //passwords diferentes
            password.style.borderColor = "#dc3545";
            confirmPassword.style.borderColor = "#dc3545";
            document.getElementById("divErroConfirmPasswordUserReset").style.display = "block";
            if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
              document.getElementById("mensagemDeErroConfirmPasswordUserReset").innerText = "Palavras-passe diferentes!";
            } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
              document.getElementById("mensagemDeErroConfirmPasswordUserReset").innerText = "Different passwords!";
            }
          } else {
            //passwords identicas          
            password.style.borderColor = "#ced4da";
            confirmPassword.style.borderColor = "#ced4da";
            document.getElementById("divErroConfirmPasswordUserReset").style.display = "none";
            document.getElementById("mensagemDeErroConfirmPasswordUserReset").innerText = "";


            //ir buscar o tipo
            let tipo = await angular.element(document.querySelector('controllerUsers')).scope().searchUsers.verificarTipoDeConta(email.value);
            if (tipo == "prof") {
              tipo = "professores";
            } else if (tipo == "alun") {
              tipo = "alunos";
            } else if (tipo == "adm") {
              tipo = "admin";
            } else if (tipo == "false") {
              password.style.borderColor = "#dc3545";
              confirmPassword.style.borderColor = "#dc3545";
              document.getElementById("divErroConfirmPasswordUserReset").style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById("mensagemDeErroConfirmPasswordUserReset").innerText = "Credenciais não aceites, por favor clique no link enviado para o seu email!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById("mensagemDeErroConfirmPasswordUserReset").innerText = "Different passwords!";
              }
              return;
            }
            let body = JSON.stringify({ email: email.value, password: oldPassword.value, tipo });

            //confirmar que a password antiga está certa
            let confirmacao = await fetch(`${urlBase}/checkPasswordUser`, {
              headers: {
                "Content-Type": "application/json",
              },
              method: "POST",
              body: body,
            }).then((response) => {
              return response.json();
            }).then((response) => {
              return response;
            });
            if (confirmacao.response == "certo") {
              body = JSON.stringify({ tipo, email: email.value, password: password.value });
              return fetch(`${urlBase}/alterarPasswordEsquecida`, {
                headers: {
                  "Content-Type": "application/json",
                },
                method: "POST",
                body: body,
              }).then((response) => {
                return response.json();
              }).then((response) => {
                openLink("indexPage", "mainPage");
                openNotification("Palavra-passe alterada com sucesso!", "Password successfully updated!");
              });
            } else {
              password.style.borderColor = "#dc3545";
              confirmPassword.style.borderColor = "#dc3545";
              document.getElementById("divErroConfirmPasswordUserReset").style.display = "block";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById("mensagemDeErroConfirmPasswordUserReset").innerText = "Credenciais não aceites, por favor clique no link enviado para o seu email!";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById("mensagemDeErroConfirmPasswordUserReset").innerText = "Different passwords!";
              }
            }
          }
        }


        async function forgotPasswordUser(idDoEmail, idDaDivErro, idDoPErro) {
          const userEmail = document.getElementById(idDoEmail);
          //verificar se o email faz parte da nossa base de dados
          let verificarEmail = await angular.element(document.querySelector('controllerUsers')).scope().searchUsers.verificarUtilizadorExistente(userEmail.value);
          if (verificarEmail === false) {
            document.getElementById(idDoPErro).style.color = "#dc3545";
            userEmail.style.borderColor = "#dc3545";
            document.getElementById(idDaDivErro).style.display = "block";
            if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
              document.getElementById(idDoPErro).innerText = "Email não associado a uma conta E-Teacher!";
            } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
              document.getElementById(idDoPErro).innerText = "Email not associated with an account E-Teacher!";
            }

          } else {
            document.getElementById(idDaDivErro).style.display = "none";
            document.getElementById(idDoPErro).innerText = "";
            userEmail.style.borderColor = "#ced4da";

            //descubrir o tipo
            let tipo = await angular.element(document.querySelector('controllerUsers')).scope().searchUsers.verificarTipoDeConta(userEmail.value);
            if (tipo == "prof") {
              tipo = "professores";
            } else if (tipo == "alun") {
              tipo = "alunos";
            }

            const body = JSON.stringify({ email: userEmail.value, tipo });
            //arranjar password
            return fetch(`${urlBase}/getPasswordUser`, {
              headers: {
                "Content-Type": "application/json",
              },
              method: "POST",
              body: body,
            }).then((response) => {
              return response.json();
            }).then((response) => {
              const password = response.response.password;
              //prosseguir
              //enviar o email
              const Mensagem = 'Parece que pediu uma alteração de palavra-passe!<br><br>Clique neste link para para a <a href = "' + window.location.origin + '?email=' + userEmail.value + '&callChangePassword=true&encriptedPassword=' + password + '" >alterar</a>!<br><br>Caso não tenha pedido a alteração da sua palavra-passe simplesmente ignore este email.<br><br>Obrigado,<br><br>E-Teacher<br><br><hr><br><br>Looks like you asked for a password update!<br><br>Click on this link to <a href = "' + window.location.origin + '?email=' + userEmail.value + '&callChangePassword=true&encriptedPassword=' + password + '" >change it</a>!<br><br>If you have not requested to change your password, simply ignore this email.<br><br>Thanks,<br><br>E-Teacher';
              const Subject = "Alteração de palavra passe";
              enviarEmailGeral(userEmail.value, Mensagem, Subject);

              document.getElementById(idDaDivErro).style.display = "block";
              document.getElementById(idDoPErro).style.color = "#198754";
              if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                document.getElementById(idDoPErro).innerText = "Email enviado! Por favor verifique a caixa de entrada do seu email.";
              } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                document.getElementById(idDoPErro).innerText = "Email sent! Please check your email inbox";
              }
              userEmail.style.borderColor = "#198754";

            });
          }
        }

        async function signInStudent() {
          const studentEmail = document.getElementById("emailSigninStudent");
          const studentName = document.getElementById("nameSigninStudent");
          const studentNumber = document.getElementById("studentNumberSigninStudent");
          const passwordRandom = generatePassword();
          //verificar se não existe nenhum email desses
          let tipo = await angular.element(document.querySelector('controllerUsers')).scope().searchUsers.verificarTipoDeConta(studentEmail.value);
          if (tipo == "false") {
            const body = JSON.stringify({ email: studentEmail.value, nome: studentName.value, password: passwordRandom, studentNumber: studentNumber.value, user: 'alunos' });
            return fetch(`${urlBase}/registarUser`, {
              headers: {
                "Content-Type": "application/json",
              },
              method: "POST",
              body: body,
            }).then((response) => {
              if (response.status === 409) {
                studentEmail.style.borderColor = "#dc3545";
                studentNumber.style.borderColor = "#dc3545";
                document.getElementById('divErroSigninStudent').style.display = "block";
                if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
                  document.getElementById('mensagemDeErroSigninStudent').innerText = "Email ou número de aluno já em uso!";
                } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
                  document.getElementById('mensagemDeErroSigninStudent').innerText = "Email or Student number in use!";
                }
              } else {
                studentEmail.style.borderColor = "#ced4da";
                studentNumber.style.borderColor = "#ced4da";
                document.getElementById('divErroSigninStudent').style.display = "none";
                document.getElementById('mensagemDeErroSigninStudent').innerText = "";
              }
              if (!response.ok) {
                throw new Error(response.statusText);
              }
              return response.json();
            }).then((response) => {
              criarConta(studentEmail.value, 'alunos', 'nada', passwordRandom);
              callAlterar('addAlunoAoProfessor', 'changeProfile');
              document.getElementById("adicionarAlunoAoProfessor").value = studentNumber.value;
              studentEmail.value = "";
              studentName.value = "";
              studentNumber.value = "";
              document.getElementById("addAlunoAoProfessorSubmit").click();
            });
          } else {
            studentEmail.style.borderColor = "#dc3545";
            document.getElementById('divErroSigninStudent').style.display = "block";
            if (sessionStorage.getItem("E-Teacher Idioma") === "pt") {
              document.getElementById('mensagemDeErroSigninStudent').innerText = "Email já registado no E-Teacher!";
            } else if (sessionStorage.getItem("E-Teacher Idioma") === "en") {
              document.getElementById('mensagemDeErroSigninStudent').innerText = "Email already registered on E-Teacher!";
            }
          }
        }

        function addOrcidId() {
          const professorEmail = angular.element(document.querySelector('html')).scope().profile.originalEmail;
          const orcidId = document.getElementById("addOrcidIdInput");
          const obj = {};
          obj["orcidId"] = orcidId.value;
          obj["email"] = professorEmail;
          const body = JSON.stringify(obj);
          return fetch(`${urlBase}/alterarConta`, {
            headers: {
              "Content-Type": "application/json",
            },
            method: "POST",
            body: body,
          }).then((response) => {
            angular.element(document.querySelector('html')).scope().profile.alterarOrcidId(orcidId.value);
            openNotification("Conta Orcid conectada!", "Orcid account connected!");
          });
        }

        function openNewTab(link) {
          window.open(link);
        }

        function enviarEmailGeral(Para, Mensagem, Subject) {
          const body = JSON.stringify({ Subject, Para, Mensagem, urlBase });
          return fetch(`${urlBase}/enviarEmailGeral`, {
            headers: {
              "Content-Type": "application/json",
            },
            method: "POST",
            body: body,
          }).then((response) => {
            return response.json();
          }).then((response) => {
            return response;
          });
        }


        function generatePassword() {
          const passwordLength = 8;
          var numberChars = "0123456789";
          var upperChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
          var lowerChars = "abcdefghijklmnopqrstuvwxyz";
          var allChars = numberChars + upperChars + lowerChars;
          var randPasswordArray = Array(passwordLength);
          randPasswordArray[0] = numberChars;
          randPasswordArray[1] = upperChars;
          randPasswordArray[2] = lowerChars;
          randPasswordArray = randPasswordArray.fill(allChars, 3);
          return shuffleArray(randPasswordArray.map(function (x) { return x[Math.floor(Math.random() * x.length)] })).join('');
        }

        function shuffleArray(array) {
          for (var i = array.length - 1; i > 0; i--) {
            var j = Math.floor(Math.random() * (i + 1));
            var temp = array[i];
            array[i] = array[j];
            array[j] = temp;
          }
          return array;
        }


        function changeLanguage(lingua) {
          sessionStorage.setItem('E-Teacher Idioma', lingua);
          window.location.reload();
        }

        if (sessionStorage.getItem('E-Teacher Idioma') === "pt") {
          document.getElementById("imagemFlagIdioma").setAttribute("src", "./img/flags/portugal.png");
        } else if (sessionStorage.getItem('E-Teacher Idioma') === "en") {
          document.getElementById("imagemFlagIdioma").setAttribute("src", "./img/flags/reino-unido.png");
        }


        //change language
        if (sessionStorage.getItem('E-Teacher Idioma') === 'pt') {

          const traduzir = document.getElementsByClassName("traduzir");
          i = 0;
          while (traduzir[i] != undefined) {
            const pt = traduzir[i].getAttribute("pt");
            traduzir[i].innerText = pt;
            i++;
          }
        }
      </script>
    </body>
  </controllerUsers>
</controllerTrabalho>

</html>